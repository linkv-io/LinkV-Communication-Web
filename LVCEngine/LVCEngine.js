!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.LVCEngine=t():e.LVCEngine=t()}(this,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=49)}([function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.Handler=void 0;var c=r(131),u=r(6),l=r(27),p=function(e){function t(){var t=e.call(this)||this;return t._logger=null,t._statistics=null,t._sensorstats=null,t._streamId="",t._direction="send",t._sendStream=new MediaStream,t._videoCustomBitrate=0,t._audioCustomBitrate=0,t._customFramerate=0,t._hasTrack=!1,t._isNegotiating=!1,t._transceiverArr=new Array,t._currentStream=null,t._pcStats=null,t._logger=u.logger.collect,t}return o(t,e),t.createFactory=function(){return function(){return new t}},Object.defineProperty(t.prototype,"name",{get:function(){return"Handler"},enumerable:!1,configurable:!0}),t.prototype.close=function(){if(this._pc)try{this._statistics&&(this._statistics.stopInterval(),this._statistics=null),this._sensorstats&&(this._sensorstats=null),this.removeAllListeners(),this._pc.close(),this._pc.onicecandidate=null,this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onnegotiationneeded=null,this._pc.onconnectionstatechange=null,this._pc.ontrack=null,this._isNegotiating=!1,this._hasTrack=!1}catch(e){}},t.prototype.run=function(e){var t=this,r=e.streamId,n=e.direction,o=e.iceServers,i=e.iceTransportPolicy;this._streamId=r,this._direction=n;try{this._pc=new RTCPeerConnection({iceServers:o||[],iceTransportPolicy:i||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"})}catch(e){throw new Error(e)}this._pc.onicecandidate=function(e){},this._pc.onicegatheringstatechange=function(e){t._logger.debug(r+"onicegatheringstatechange:::",t._pc.iceGatheringState)},this._pc.onsignalingstatechange=function(e){t._logger.debug(r+"onsignalingstatechange:::",t._pc.signalingState)},this._pc.onconnectionstatechange=function(e){t._logger.debug("onconnectionstatechange:::",e.currentTarget.connectionState)}},t.prototype.setLocalOfferSdp=function(e){return i(this,void 0,void 0,(function(){var t,r,n,o,i,c,u,l;return s(this,(function(s){if(t=new Array,"recv"==this._direction)t.push(this._pc.addTransceiver("audio",{direction:"recvonly"})),t.push(this._pc.addTransceiver("video",{direction:"recvonly"}));else{if(void 0===e)throw new Error("mediastream must be not exist.");if(r=e.mediastream,n=e.encodings,!r)throw new Error("mediastream must be not exist.");this._currentStream=r;try{for(o=a(r.getTracks()),i=o.next();!i.done;i=o.next())c=i.value,t.push(this._pc.addTransceiver(c,{direction:"sendonly",streams:[this._sendStream],sendEncodings:n}))}catch(e){u={error:e}}finally{try{i&&!i.done&&(l=o.return)&&l.call(o)}finally{if(u)throw u.error}}}return this._transceiverArr=t,[2]}))}))},t.prototype.setRemoteAnswerSdp=function(e){var t=e.remoteAnswerSdp;return i(this,void 0,void 0,(function(){var e,r,n;return s(this,(function(o){switch(o.label){case 0:e=0!==this._videoCustomBitrate||0!==this._audioCustomBitrate?this.setSdpCustomBitrate(t):t,r={type:"answer",sdp:e},o.label=1;case 1:return o.trys.push([1,3,,4]),this._logger.report("remote answersdp",r),[4,this._pc.setRemoteDescription(r)];case 2:return o.sent(),[3,4];case 3:return n=o.sent(),this._logger.report("set remote answersdp error",{streamId:this._streamId,reason:n}),this._logger.error("set remote answersdp error."),[3,4];case 4:return[2]}}))}))},t.prototype.setIceCandidate=function(e){for(var t=this,r=0;r<e.length;r+=1){var n=new RTCIceCandidate(e[r]);this._pc.addIceCandidate(n).catch((function(e){t._logger.error("addIceCandidate",e)}))}},t.prototype.stopTransceiver=function(){var e,t,r,n,o=this._transceiverArr;if(!o)throw new Error("associated RTCRtpTransceiver not found");if("closed"!==this._pc.signalingState)try{for(var i=a(o),s=i.next();!s.done;s=i.next()){(l=s.value).sender.replaceTrack(null),this._pc.removeTrack(l.sender)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}if(null!=this._currentStream)try{for(var c=a(this._currentStream.getTracks()),u=c.next();!u.done;u=c.next()){var l;(l=u.value).stop()}}catch(e){r={error:e}}finally{try{u&&!u.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}this.close()},t.prototype.getLocalOfferSdp=function(){return i(this,void 0,void 0,(function(){var e=this;return s(this,(function(t){return[2,new Promise((function(t,r){e._pc.onnegotiationneeded=function(r){return i(e,void 0,void 0,(function(){var e,r;return s(this,(function(n){switch(n.label){case 0:if(this._isNegotiating)return[2];this._isNegotiating=!0,n.label=1;case 1:return n.trys.push([1,7,,8]),[4,this._pc.createOffer()];case 2:e=n.sent(),r=void 0,r=0!==this._videoCustomBitrate||0!==this._audioCustomBitrate?this.setSdpCustomBitrate(e.sdp):e.sdp,this._logger.report("local offer sdp",r),n.label=3;case 3:return n.trys.push([3,5,,6]),[4,this._pc.setLocalDescription({type:"offer",sdp:r})];case 4:return n.sent(),[3,6];case 5:throw n.sent(),new Error("set local offer sdp error");case 6:return t({localOfferSdp:e.sdp}),[3,8];case 7:throw n.sent(),new Error("create local offer sdp error");case 8:return[2]}}))}))}}))]}))}))},t.prototype.getICEConnectionState=function(){var e=this;return new Promise((function(t,r){e._pc.oniceconnectionstatechange=function(r){switch(e._logger.report(e._streamId+"get connectionstatechange state:::",e._pc.iceConnectionState),e._pc.iceConnectionState){case"checking":break;case"connected":case"completed":var n="send"==e._direction?"PUBLISHING":"PLAYING";e._logger.info("stream "+n+" success."),t({state:n,code:1});break;case"failed":var o="send"==e._direction?"NO_PUBLISH":"NO_PLAY";e._logger.info("stream "+o),t({state:o,code:0})}}}))},t.prototype.getTrack=function(){var e=this;return new Promise((function(t,r){e._pc.ontrack=function(r){var n,o;if(!e._hasTrack&&(e._hasTrack=!0,e._logger.debug(e._streamId+"gettrack:::",r.streams.length),0!==r.streams.length)){try{for(var i=a(r.streams[0].getTracks()),s=i.next();!s.done;s=i.next()){var c=s.value;e._logger.debug(e._streamId+"gettrack kind:::",c)}}catch(e){n={error:e}}finally{try{s&&!s.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}e._currentStream=r.streams[0],t(r.streams[0])}}}))},t.prototype.setCustomerValue=function(e){this._videoCustomBitrate=e.videoCustomBitrate,this._audioCustomBitrate=e.audioCustomBitrate,this._customFramerate=e.customFramerate},t.prototype.setSdpCustomBitrate=function(e){var t,r,n,o;if(0!==this._videoCustomBitrate||0!==this._audioCustomBitrate){var i=c.parse(e),s=i.media;try{for(var u=a(s),l=u.next();!l.done;l=u.next()){var p=l.value,f=p.fmtp;try{for(var d=(n=void 0,a(f)),h=d.next();!h.done;h=d.next()){var g=h.value;if("video"===p.type&&0!==this._videoCustomBitrate)c.parseParams(g.config)["profile-level-id"]&&(g.config+=";x-google-max-bitrate="+this._videoCustomBitrate+";x-google-min-bitrate="+this._videoCustomBitrate+";x-google-start-bitrate="+this._videoCustomBitrate);else"audio"===p.type&&0!==this._audioCustomBitrate&&(g.config+=";maxaveragebitrate="+this._audioCustomBitrate)}}catch(e){n={error:e}}finally{try{h&&!h.done&&(o=d.return)&&o.call(d)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{l&&!l.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}return c.write(i)}throw new RangeError("customBitRate value not invalid")},t.prototype.replaceTrack=function(e){return i(this,void 0,void 0,(function(){var t,r;return s(this,(function(n){switch(n.label){case 0:t=this._pc.getSenders().find((function(t){if(!t.track)throw new Error("mediastreamTrack is not exist.");return t.track.kind==e.kind})),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,t.replaceTrack(e)];case 2:return n.sent(),[3,4];case 3:throw r=n.sent(),new Error(r);case 4:return[2]}}))}))},t.prototype.transportStats=function(e){return i(this,void 0,void 0,(function(){var t;return s(this,(function(r){switch(r.label){case 0:return null==this._pcStats&&(this._pcStats=new l.pcStats({framerate:this._customFramerate,bitrate:this._videoCustomBitrate,direction:this._direction})),[4,this._pc.getStats()];case 1:switch(t=r.sent(),this._pcStats.collectRTCStatsReport(t),e){case l.type.LocalAudio:return[2,this._pcStats.getLocalAudioStats()];case l.type.LocalVideo:return[2,this._pcStats.getLocalVideoStats()];case l.type.RemoteAudio:return[2,this._pcStats.getRemoteAudioStats()];case l.type.RemoteVideo:return[2,this._pcStats.getRemoteVideoStats()];case l.type.Sensor:case l.type.Crystalball:return[2,{crystalBall:this._pcStats.getCrystalballStats(),sensor:this._pcStats.getSensorStats()}]}return[2]}}))}))},t.prototype._assertSendDirection=function(){if("send"!==this._direction)throw new Error('method can just be called for handlers with "send" direction')},t.prototype._assertRecvDirection=function(){if("recv"!==this._direction)throw new Error('method can just be called for handlers with "recv" direction')},t}(r(134).HandlerInterface);t.Handler=p},function(e,t,r){"use strict";(function(e){var n=t;function o(e,t,r){for(var n=Object.keys(t),o=0;o<n.length;++o)void 0!==e[n[o]]&&r||(e[n[o]]=t[n[o]]);return e}function i(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),r&&o(this,r)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}n.asPromise=r(55),n.base64=r(56),n.EventEmitter=r(57),n.float=r(58),n.inquire=r(59),n.utf8=r(60),n.pool=r(61),n.LongBits=r(62),n.isNode=Boolean(void 0!==e&&e&&e.process&&e.process.versions&&e.process.versions.node),n.global=n.isNode&&e||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},n.isString=function(e){return"string"==typeof e||e instanceof String},n.isObject=function(e){return e&&"object"==typeof e},n.isset=n.isSet=function(e,t){var r=e[t];return!(null==r||!e.hasOwnProperty(t))&&("object"!=typeof r||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},n.Buffer=function(){try{var e=n.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),n._Buffer_from=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(e){return"number"==typeof e?n.Buffer?n._Buffer_allocUnsafe(e):new n.Array(e):n.Buffer?n._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},n.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(e){return e?n.LongBits.from(e).toHash():n.LongBits.zeroHash},n.longFromHash=function(e,t){var r=n.LongBits.fromHash(e);return n.Long?n.Long.fromBits(r.lo,r.hi,t):r.toNumber(Boolean(t))},n.merge=o,n.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},n.newError=i,n.ProtocolError=i("ProtocolError"),n.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(1===t[e[r]]&&void 0!==this[e[r]]&&null!==this[e[r]])return e[r]}},n.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n._configure=function(){var e=n.Buffer;e?(n._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,r){return new e(t,r)},n._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):n._Buffer_from=n._Buffer_allocUnsafe=null}}).call(this,r(29))},function(e,t,r){function n(e){if(e)return function(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}(e)}e.exports=n,n.prototype.on=n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},n.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r,n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var o=0;o<n.length;o++)if((r=n[o])===t||r.fn===t){n.splice(o,1);break}return 0===n.length&&delete this._callbacks["$"+e],this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(r){n=0;for(var o=(r=r.slice(0)).length;n<o;++n)r[n].apply(this,t)}return this},n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,r){var n,o=r(83),i=r(37),s=r(85),a=r(86),c=r(87);"undefined"!=typeof ArrayBuffer&&(n=r(88));var u="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),l="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),p=u||l;t.protocol=3;var f=t.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},d=o(f),h={type:"error",data:"parser error"},g=r(89);function y(e,t,r){for(var n=new Array(e.length),o=a(e.length,r),i=function(e,r,o){t(r,(function(t,r){n[e]=r,o(t,n)}))},s=0;s<e.length;s++)i(s,e[s],o)}t.encodePacket=function(e,r,n,o){"function"==typeof r&&(o=r,r=!1),"function"==typeof n&&(o=n,n=null);var i=void 0===e.data?void 0:e.data.buffer||e.data;if("undefined"!=typeof ArrayBuffer&&i instanceof ArrayBuffer)return function(e,r,n){if(!r)return t.encodeBase64Packet(e,n);var o=e.data,i=new Uint8Array(o),s=new Uint8Array(1+o.byteLength);s[0]=f[e.type];for(var a=0;a<i.length;a++)s[a+1]=i[a];return n(s.buffer)}(e,r,o);if(void 0!==g&&i instanceof g)return function(e,r,n){if(!r)return t.encodeBase64Packet(e,n);if(p)return function(e,r,n){if(!r)return t.encodeBase64Packet(e,n);var o=new FileReader;return o.onload=function(){t.encodePacket({type:e.type,data:o.result},r,!0,n)},o.readAsArrayBuffer(e.data)}(e,r,n);var o=new Uint8Array(1);o[0]=f[e.type];var i=new g([o.buffer,e.data]);return n(i)}(e,r,o);if(i&&i.base64)return function(e,r){var n="b"+t.packets[e.type]+e.data.data;return r(n)}(e,o);var s=f[e.type];return void 0!==e.data&&(s+=n?c.encode(String(e.data),{strict:!1}):String(e.data)),o(""+s)},t.encodeBase64Packet=function(e,r){var n,o="b"+t.packets[e.type];if(void 0!==g&&e.data instanceof g){var i=new FileReader;return i.onload=function(){var e=i.result.split(",")[1];r(o+e)},i.readAsDataURL(e.data)}try{n=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(t){for(var s=new Uint8Array(e.data),a=new Array(s.length),c=0;c<s.length;c++)a[c]=s[c];n=String.fromCharCode.apply(null,a)}return o+=btoa(n),r(o)},t.decodePacket=function(e,r,n){if(void 0===e)return h;if("string"==typeof e){if("b"===e.charAt(0))return t.decodeBase64Packet(e.substr(1),r);if(n&&!1===(e=function(e){try{e=c.decode(e,{strict:!1})}catch(e){return!1}return e}(e)))return h;var o=e.charAt(0);return Number(o)==o&&d[o]?e.length>1?{type:d[o],data:e.substring(1)}:{type:d[o]}:h}o=new Uint8Array(e)[0];var i=s(e,1);return g&&"blob"===r&&(i=new g([i])),{type:d[o],data:i}},t.decodeBase64Packet=function(e,t){var r=d[e.charAt(0)];if(!n)return{type:r,data:{base64:!0,data:e.substr(1)}};var o=n.decode(e.substr(1));return"blob"===t&&g&&(o=new g([o])),{type:r,data:o}},t.encodePayload=function(e,r,n){"function"==typeof r&&(n=r,r=null);var o=i(e);if(r&&o)return g&&!p?t.encodePayloadAsBlob(e,n):t.encodePayloadAsArrayBuffer(e,n);if(!e.length)return n("0:");y(e,(function(e,n){t.encodePacket(e,!!o&&r,!1,(function(e){n(null,function(e){return e.length+":"+e}(e))}))}),(function(e,t){return n(t.join(""))}))},t.decodePayload=function(e,r,n){if("string"!=typeof e)return t.decodePayloadAsBinary(e,r,n);var o;if("function"==typeof r&&(n=r,r=null),""===e)return n(h,0,1);for(var i,s,a="",c=0,u=e.length;c<u;c++){var l=e.charAt(c);if(":"===l){if(""===a||a!=(i=Number(a)))return n(h,0,1);if(a!=(s=e.substr(c+1,i)).length)return n(h,0,1);if(s.length){if(o=t.decodePacket(s,r,!1),h.type===o.type&&h.data===o.data)return n(h,0,1);if(!1===n(o,c+i,u))return}c+=i,a=""}else a+=l}return""!==a?n(h,0,1):void 0},t.encodePayloadAsArrayBuffer=function(e,r){if(!e.length)return r(new ArrayBuffer(0));y(e,(function(e,r){t.encodePacket(e,!0,!0,(function(e){return r(null,e)}))}),(function(e,t){var n=t.reduce((function(e,t){var r;return e+(r="string"==typeof t?t.length:t.byteLength).toString().length+r+2}),0),o=new Uint8Array(n),i=0;return t.forEach((function(e){var t="string"==typeof e,r=e;if(t){for(var n=new Uint8Array(e.length),s=0;s<e.length;s++)n[s]=e.charCodeAt(s);r=n.buffer}o[i++]=t?0:1;var a=r.byteLength.toString();for(s=0;s<a.length;s++)o[i++]=parseInt(a[s]);o[i++]=255;for(n=new Uint8Array(r),s=0;s<n.length;s++)o[i++]=n[s]})),r(o.buffer)}))},t.encodePayloadAsBlob=function(e,r){y(e,(function(e,r){t.encodePacket(e,!0,!0,(function(e){var t=new Uint8Array(1);if(t[0]=1,"string"==typeof e){for(var n=new Uint8Array(e.length),o=0;o<e.length;o++)n[o]=e.charCodeAt(o);e=n.buffer,t[0]=0}var i=(e instanceof ArrayBuffer?e.byteLength:e.size).toString(),s=new Uint8Array(i.length+1);for(o=0;o<i.length;o++)s[o]=parseInt(i[o]);if(s[i.length]=255,g){var a=new g([t.buffer,s.buffer,e]);r(null,a)}}))}),(function(e,t){return r(new g(t))}))},t.decodePayloadAsBinary=function(e,r,n){"function"==typeof r&&(n=r,r=null);for(var o=e,i=[];o.byteLength>0;){for(var a=new Uint8Array(o),c=0===a[0],u="",l=1;255!==a[l];l++){if(u.length>310)return n(h,0,1);u+=a[l]}o=s(o,2+u.length),u=parseInt(u);var p=s(o,0,u);if(c)try{p=String.fromCharCode.apply(null,new Uint8Array(p))}catch(e){var f=new Uint8Array(p);p="";for(l=0;l<f.length;l++)p+=String.fromCharCode(f[l])}i.push(p),o=s(o,u)}var d=i.length;i.forEach((function(e,o){n(t.decodePacket(e,r,!0),o,d)}))}},function(e,t,r){"use strict";var n,o,i,s,a=r(16),c=a.Reader,u=a.Writer,l=a.util,p=a.roots.webim||(a.roots.webim={});p.GroupMessage=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.gname="",e.prototype.uid="",e.prototype.nickname="",e.prototype.role=0,e.prototype.gid="",e.prototype.admin="",e.prototype.topic="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=u.create()),null!=e.gname&&Object.hasOwnProperty.call(e,"gname")&&t.uint32(10).string(e.gname),null!=e.uid&&Object.hasOwnProperty.call(e,"uid")&&t.uint32(18).string(e.uid),null!=e.nickname&&Object.hasOwnProperty.call(e,"nickname")&&t.uint32(26).string(e.nickname),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(32).int32(e.role),null!=e.gid&&Object.hasOwnProperty.call(e,"gid")&&t.uint32(42).string(e.gid),null!=e.admin&&Object.hasOwnProperty.call(e,"admin")&&t.uint32(50).string(e.admin),null!=e.topic&&Object.hasOwnProperty.call(e,"topic")&&t.uint32(58).string(e.topic),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof c||(e=c.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new p.GroupMessage;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.gname=e.string();break;case 2:n.uid=e.string();break;case 3:n.nickname=e.string();break;case 4:n.role=e.int32();break;case 5:n.gid=e.string();break;case 6:n.admin=e.string();break;case 7:n.topic=e.string();break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof c||(e=new c(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.gname&&e.hasOwnProperty("gname")&&!l.isString(e.gname)?"gname: string expected":null!=e.uid&&e.hasOwnProperty("uid")&&!l.isString(e.uid)?"uid: string expected":null!=e.nickname&&e.hasOwnProperty("nickname")&&!l.isString(e.nickname)?"nickname: string expected":null!=e.role&&e.hasOwnProperty("role")&&!l.isInteger(e.role)?"role: integer expected":null!=e.gid&&e.hasOwnProperty("gid")&&!l.isString(e.gid)?"gid: string expected":null!=e.admin&&e.hasOwnProperty("admin")&&!l.isString(e.admin)?"admin: string expected":null!=e.topic&&e.hasOwnProperty("topic")&&!l.isString(e.topic)?"topic: string expected":null},e.fromObject=function(e){if(e instanceof p.GroupMessage)return e;var t=new p.GroupMessage;return null!=e.gname&&(t.gname=String(e.gname)),null!=e.uid&&(t.uid=String(e.uid)),null!=e.nickname&&(t.nickname=String(e.nickname)),null!=e.role&&(t.role=0|e.role),null!=e.gid&&(t.gid=String(e.gid)),null!=e.admin&&(t.admin=String(e.admin)),null!=e.topic&&(t.topic=String(e.topic)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.gname="",r.uid="",r.nickname="",r.role=0,r.gid="",r.admin="",r.topic=""),null!=e.gname&&e.hasOwnProperty("gname")&&(r.gname=e.gname),null!=e.uid&&e.hasOwnProperty("uid")&&(r.uid=e.uid),null!=e.nickname&&e.hasOwnProperty("nickname")&&(r.nickname=e.nickname),null!=e.role&&e.hasOwnProperty("role")&&(r.role=e.role),null!=e.gid&&e.hasOwnProperty("gid")&&(r.gid=e.gid),null!=e.admin&&e.hasOwnProperty("admin")&&(r.admin=e.admin),null!=e.topic&&e.hasOwnProperty("topic")&&(r.topic=e.topic),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},e}(),p.User=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.userId="",e.prototype.token="",e.prototype.appId="",e.prototype.loginType=0,e.prototype.deviceType=0,e.prototype.deviceId="",e.prototype.sequence=l.Long?l.Long.fromBits(0,0,!1):0,e.prototype.cMsgId=l.Long?l.Long.fromBits(0,0,!1):0,e.prototype.appVersion="",e.prototype.country="",e.prototype.channelType=0,e.prototype.appKey="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=u.create()),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(10).string(e.userId),null!=e.token&&Object.hasOwnProperty.call(e,"token")&&t.uint32(18).string(e.token),null!=e.appId&&Object.hasOwnProperty.call(e,"appId")&&t.uint32(26).string(e.appId),null!=e.loginType&&Object.hasOwnProperty.call(e,"loginType")&&t.uint32(32).int32(e.loginType),null!=e.deviceType&&Object.hasOwnProperty.call(e,"deviceType")&&t.uint32(40).int32(e.deviceType),null!=e.deviceId&&Object.hasOwnProperty.call(e,"deviceId")&&t.uint32(50).string(e.deviceId),null!=e.sequence&&Object.hasOwnProperty.call(e,"sequence")&&t.uint32(56).int64(e.sequence),null!=e.cMsgId&&Object.hasOwnProperty.call(e,"cMsgId")&&t.uint32(64).int64(e.cMsgId),null!=e.appVersion&&Object.hasOwnProperty.call(e,"appVersion")&&t.uint32(74).string(e.appVersion),null!=e.country&&Object.hasOwnProperty.call(e,"country")&&t.uint32(82).string(e.country),null!=e.channelType&&Object.hasOwnProperty.call(e,"channelType")&&t.uint32(88).int32(e.channelType),null!=e.appKey&&Object.hasOwnProperty.call(e,"appKey")&&t.uint32(98).string(e.appKey),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof c||(e=c.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new p.User;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.userId=e.string();break;case 2:n.token=e.string();break;case 3:n.appId=e.string();break;case 4:n.loginType=e.int32();break;case 5:n.deviceType=e.int32();break;case 6:n.deviceId=e.string();break;case 7:n.sequence=e.int64();break;case 8:n.cMsgId=e.int64();break;case 9:n.appVersion=e.string();break;case 10:n.country=e.string();break;case 11:n.channelType=e.int32();break;case 12:n.appKey=e.string();break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof c||(e=new c(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.userId&&e.hasOwnProperty("userId")&&!l.isString(e.userId)?"userId: string expected":null!=e.token&&e.hasOwnProperty("token")&&!l.isString(e.token)?"token: string expected":null!=e.appId&&e.hasOwnProperty("appId")&&!l.isString(e.appId)?"appId: string expected":null!=e.loginType&&e.hasOwnProperty("loginType")&&!l.isInteger(e.loginType)?"loginType: integer expected":null!=e.deviceType&&e.hasOwnProperty("deviceType")&&!l.isInteger(e.deviceType)?"deviceType: integer expected":null!=e.deviceId&&e.hasOwnProperty("deviceId")&&!l.isString(e.deviceId)?"deviceId: string expected":null!=e.sequence&&e.hasOwnProperty("sequence")&&!(l.isInteger(e.sequence)||e.sequence&&l.isInteger(e.sequence.low)&&l.isInteger(e.sequence.high))?"sequence: integer|Long expected":null!=e.cMsgId&&e.hasOwnProperty("cMsgId")&&!(l.isInteger(e.cMsgId)||e.cMsgId&&l.isInteger(e.cMsgId.low)&&l.isInteger(e.cMsgId.high))?"cMsgId: integer|Long expected":null!=e.appVersion&&e.hasOwnProperty("appVersion")&&!l.isString(e.appVersion)?"appVersion: string expected":null!=e.country&&e.hasOwnProperty("country")&&!l.isString(e.country)?"country: string expected":null!=e.channelType&&e.hasOwnProperty("channelType")&&!l.isInteger(e.channelType)?"channelType: integer expected":null!=e.appKey&&e.hasOwnProperty("appKey")&&!l.isString(e.appKey)?"appKey: string expected":null},e.fromObject=function(e){if(e instanceof p.User)return e;var t=new p.User;return null!=e.userId&&(t.userId=String(e.userId)),null!=e.token&&(t.token=String(e.token)),null!=e.appId&&(t.appId=String(e.appId)),null!=e.loginType&&(t.loginType=0|e.loginType),null!=e.deviceType&&(t.deviceType=0|e.deviceType),null!=e.deviceId&&(t.deviceId=String(e.deviceId)),null!=e.sequence&&(l.Long?(t.sequence=l.Long.fromValue(e.sequence)).unsigned=!1:"string"==typeof e.sequence?t.sequence=parseInt(e.sequence,10):"number"==typeof e.sequence?t.sequence=e.sequence:"object"==typeof e.sequence&&(t.sequence=new l.LongBits(e.sequence.low>>>0,e.sequence.high>>>0).toNumber())),null!=e.cMsgId&&(l.Long?(t.cMsgId=l.Long.fromValue(e.cMsgId)).unsigned=!1:"string"==typeof e.cMsgId?t.cMsgId=parseInt(e.cMsgId,10):"number"==typeof e.cMsgId?t.cMsgId=e.cMsgId:"object"==typeof e.cMsgId&&(t.cMsgId=new l.LongBits(e.cMsgId.low>>>0,e.cMsgId.high>>>0).toNumber())),null!=e.appVersion&&(t.appVersion=String(e.appVersion)),null!=e.country&&(t.country=String(e.country)),null!=e.channelType&&(t.channelType=0|e.channelType),null!=e.appKey&&(t.appKey=String(e.appKey)),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if(r.userId="",r.token="",r.appId="",r.loginType=0,r.deviceType=0,r.deviceId="",l.Long){var n=new l.Long(0,0,!1);r.sequence=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.sequence=t.longs===String?"0":0;if(l.Long){n=new l.Long(0,0,!1);r.cMsgId=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.cMsgId=t.longs===String?"0":0;r.appVersion="",r.country="",r.channelType=0,r.appKey=""}return null!=e.userId&&e.hasOwnProperty("userId")&&(r.userId=e.userId),null!=e.token&&e.hasOwnProperty("token")&&(r.token=e.token),null!=e.appId&&e.hasOwnProperty("appId")&&(r.appId=e.appId),null!=e.loginType&&e.hasOwnProperty("loginType")&&(r.loginType=e.loginType),null!=e.deviceType&&e.hasOwnProperty("deviceType")&&(r.deviceType=e.deviceType),null!=e.deviceId&&e.hasOwnProperty("deviceId")&&(r.deviceId=e.deviceId),null!=e.sequence&&e.hasOwnProperty("sequence")&&("number"==typeof e.sequence?r.sequence=t.longs===String?String(e.sequence):e.sequence:r.sequence=t.longs===String?l.Long.prototype.toString.call(e.sequence):t.longs===Number?new l.LongBits(e.sequence.low>>>0,e.sequence.high>>>0).toNumber():e.sequence),null!=e.cMsgId&&e.hasOwnProperty("cMsgId")&&("number"==typeof e.cMsgId?r.cMsgId=t.longs===String?String(e.cMsgId):e.cMsgId:r.cMsgId=t.longs===String?l.Long.prototype.toString.call(e.cMsgId):t.longs===Number?new l.LongBits(e.cMsgId.low>>>0,e.cMsgId.high>>>0).toNumber():e.cMsgId),null!=e.appVersion&&e.hasOwnProperty("appVersion")&&(r.appVersion=e.appVersion),null!=e.country&&e.hasOwnProperty("country")&&(r.country=e.country),null!=e.channelType&&e.hasOwnProperty("channelType")&&(r.channelType=e.channelType),null!=e.appKey&&e.hasOwnProperty("appKey")&&(r.appKey=e.appKey),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},e}(),p.HttpRawIMMsgResponse=function(){function e(e){if(this.msgs=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.ecode=0,e.prototype.emsg="",e.prototype.unReadNum=0,e.prototype.clientIp="",e.prototype.msgs=l.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=u.create()),null!=e.ecode&&Object.hasOwnProperty.call(e,"ecode")&&t.uint32(8).int32(e.ecode),null!=e.emsg&&Object.hasOwnProperty.call(e,"emsg")&&t.uint32(18).string(e.emsg),null!=e.unReadNum&&Object.hasOwnProperty.call(e,"unReadNum")&&t.uint32(24).int32(e.unReadNum),null!=e.clientIp&&Object.hasOwnProperty.call(e,"clientIp")&&t.uint32(34).string(e.clientIp),null!=e.msgs&&e.msgs.length)for(var r=0;r<e.msgs.length;++r)p.IMMessage.encode(e.msgs[r],t.uint32(42).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof c||(e=c.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new p.HttpRawIMMsgResponse;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.ecode=e.int32();break;case 2:n.emsg=e.string();break;case 3:n.unReadNum=e.int32();break;case 4:n.clientIp=e.string();break;case 5:n.msgs&&n.msgs.length||(n.msgs=[]),n.msgs.push(p.IMMessage.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof c||(e=new c(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.ecode&&e.hasOwnProperty("ecode")&&!l.isInteger(e.ecode))return"ecode: integer expected";if(null!=e.emsg&&e.hasOwnProperty("emsg")&&!l.isString(e.emsg))return"emsg: string expected";if(null!=e.unReadNum&&e.hasOwnProperty("unReadNum")&&!l.isInteger(e.unReadNum))return"unReadNum: integer expected";if(null!=e.clientIp&&e.hasOwnProperty("clientIp")&&!l.isString(e.clientIp))return"clientIp: string expected";if(null!=e.msgs&&e.hasOwnProperty("msgs")){if(!Array.isArray(e.msgs))return"msgs: array expected";for(var t=0;t<e.msgs.length;++t){var r=p.IMMessage.verify(e.msgs[t]);if(r)return"msgs."+r}}return null},e.fromObject=function(e){if(e instanceof p.HttpRawIMMsgResponse)return e;var t=new p.HttpRawIMMsgResponse;if(null!=e.ecode&&(t.ecode=0|e.ecode),null!=e.emsg&&(t.emsg=String(e.emsg)),null!=e.unReadNum&&(t.unReadNum=0|e.unReadNum),null!=e.clientIp&&(t.clientIp=String(e.clientIp)),e.msgs){if(!Array.isArray(e.msgs))throw TypeError(".HttpRawIMMsgResponse.msgs: array expected");t.msgs=[];for(var r=0;r<e.msgs.length;++r){if("object"!=typeof e.msgs[r])throw TypeError(".HttpRawIMMsgResponse.msgs: object expected");t.msgs[r]=p.IMMessage.fromObject(e.msgs[r])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.msgs=[]),t.defaults&&(r.ecode=0,r.emsg="",r.unReadNum=0,r.clientIp=""),null!=e.ecode&&e.hasOwnProperty("ecode")&&(r.ecode=e.ecode),null!=e.emsg&&e.hasOwnProperty("emsg")&&(r.emsg=e.emsg),null!=e.unReadNum&&e.hasOwnProperty("unReadNum")&&(r.unReadNum=e.unReadNum),null!=e.clientIp&&e.hasOwnProperty("clientIp")&&(r.clientIp=e.clientIp),e.msgs&&e.msgs.length){r.msgs=[];for(var n=0;n<e.msgs.length;++n)r.msgs[n]=p.IMMessage.toObject(e.msgs[n],t)}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},e}(),p.MessageList=function(){function e(e){if(this.msg=[],this.data=[],this.msgIds=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.to="",e.prototype.deviceId="",e.prototype.msg=l.emptyArray,e.prototype.from="",e.prototype.data=l.emptyArray,e.prototype.cMsgId=l.Long?l.Long.fromBits(0,0,!1):0,e.prototype.gzipDevices=!1,e.prototype.msgId=l.Long?l.Long.fromBits(0,0,!1):0,e.prototype.msgIds=l.emptyArray,e.prototype.appid="",e.prototype.gzipDeviceIds=l.newBuffer([]),e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=u.create()),null!=e.to&&Object.hasOwnProperty.call(e,"to")&&t.uint32(10).string(e.to),null!=e.deviceId&&Object.hasOwnProperty.call(e,"deviceId")&&t.uint32(18).string(e.deviceId),null!=e.msg&&e.msg.length)for(var r=0;r<e.msg.length;++r)p.IMMessage.encode(e.msg[r],t.uint32(26).fork()).ldelim();if(null!=e.from&&Object.hasOwnProperty.call(e,"from")&&t.uint32(34).string(e.from),null!=e.data&&e.data.length)for(r=0;r<e.data.length;++r)p.google.protobuf.Any.encode(e.data[r],t.uint32(42).fork()).ldelim();if(null!=e.cMsgId&&Object.hasOwnProperty.call(e,"cMsgId")&&t.uint32(48).int64(e.cMsgId),null!=e.gzipDevices&&Object.hasOwnProperty.call(e,"gzipDevices")&&t.uint32(56).bool(e.gzipDevices),null!=e.msgId&&Object.hasOwnProperty.call(e,"msgId")&&t.uint32(64).int64(e.msgId),null!=e.msgIds&&e.msgIds.length){t.uint32(74).fork();for(r=0;r<e.msgIds.length;++r)t.int64(e.msgIds[r]);t.ldelim()}return null!=e.appid&&Object.hasOwnProperty.call(e,"appid")&&t.uint32(82).string(e.appid),null!=e.gzipDeviceIds&&Object.hasOwnProperty.call(e,"gzipDeviceIds")&&t.uint32(234).bytes(e.gzipDeviceIds),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof c||(e=c.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new p.MessageList;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.to=e.string();break;case 2:n.deviceId=e.string();break;case 3:n.msg&&n.msg.length||(n.msg=[]),n.msg.push(p.IMMessage.decode(e,e.uint32()));break;case 4:n.from=e.string();break;case 5:n.data&&n.data.length||(n.data=[]),n.data.push(p.google.protobuf.Any.decode(e,e.uint32()));break;case 6:n.cMsgId=e.int64();break;case 7:n.gzipDevices=e.bool();break;case 8:n.msgId=e.int64();break;case 9:if(n.msgIds&&n.msgIds.length||(n.msgIds=[]),2==(7&o))for(var i=e.uint32()+e.pos;e.pos<i;)n.msgIds.push(e.int64());else n.msgIds.push(e.int64());break;case 10:n.appid=e.string();break;case 29:n.gzipDeviceIds=e.bytes();break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof c||(e=new c(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.to&&e.hasOwnProperty("to")&&!l.isString(e.to))return"to: string expected";if(null!=e.deviceId&&e.hasOwnProperty("deviceId")&&!l.isString(e.deviceId))return"deviceId: string expected";if(null!=e.msg&&e.hasOwnProperty("msg")){if(!Array.isArray(e.msg))return"msg: array expected";for(var t=0;t<e.msg.length;++t){if(r=p.IMMessage.verify(e.msg[t]))return"msg."+r}}if(null!=e.from&&e.hasOwnProperty("from")&&!l.isString(e.from))return"from: string expected";if(null!=e.data&&e.hasOwnProperty("data")){if(!Array.isArray(e.data))return"data: array expected";for(t=0;t<e.data.length;++t){var r;if(r=p.google.protobuf.Any.verify(e.data[t]))return"data."+r}}if(null!=e.cMsgId&&e.hasOwnProperty("cMsgId")&&!(l.isInteger(e.cMsgId)||e.cMsgId&&l.isInteger(e.cMsgId.low)&&l.isInteger(e.cMsgId.high)))return"cMsgId: integer|Long expected";if(null!=e.gzipDevices&&e.hasOwnProperty("gzipDevices")&&"boolean"!=typeof e.gzipDevices)return"gzipDevices: boolean expected";if(null!=e.msgId&&e.hasOwnProperty("msgId")&&!(l.isInteger(e.msgId)||e.msgId&&l.isInteger(e.msgId.low)&&l.isInteger(e.msgId.high)))return"msgId: integer|Long expected";if(null!=e.msgIds&&e.hasOwnProperty("msgIds")){if(!Array.isArray(e.msgIds))return"msgIds: array expected";for(t=0;t<e.msgIds.length;++t)if(!(l.isInteger(e.msgIds[t])||e.msgIds[t]&&l.isInteger(e.msgIds[t].low)&&l.isInteger(e.msgIds[t].high)))return"msgIds: integer|Long[] expected"}return null!=e.appid&&e.hasOwnProperty("appid")&&!l.isString(e.appid)?"appid: string expected":null!=e.gzipDeviceIds&&e.hasOwnProperty("gzipDeviceIds")&&!(e.gzipDeviceIds&&"number"==typeof e.gzipDeviceIds.length||l.isString(e.gzipDeviceIds))?"gzipDeviceIds: buffer expected":null},e.fromObject=function(e){if(e instanceof p.MessageList)return e;var t=new p.MessageList;if(null!=e.to&&(t.to=String(e.to)),null!=e.deviceId&&(t.deviceId=String(e.deviceId)),e.msg){if(!Array.isArray(e.msg))throw TypeError(".MessageList.msg: array expected");t.msg=[];for(var r=0;r<e.msg.length;++r){if("object"!=typeof e.msg[r])throw TypeError(".MessageList.msg: object expected");t.msg[r]=p.IMMessage.fromObject(e.msg[r])}}if(null!=e.from&&(t.from=String(e.from)),e.data){if(!Array.isArray(e.data))throw TypeError(".MessageList.data: array expected");t.data=[];for(r=0;r<e.data.length;++r){if("object"!=typeof e.data[r])throw TypeError(".MessageList.data: object expected");t.data[r]=p.google.protobuf.Any.fromObject(e.data[r])}}if(null!=e.cMsgId&&(l.Long?(t.cMsgId=l.Long.fromValue(e.cMsgId)).unsigned=!1:"string"==typeof e.cMsgId?t.cMsgId=parseInt(e.cMsgId,10):"number"==typeof e.cMsgId?t.cMsgId=e.cMsgId:"object"==typeof e.cMsgId&&(t.cMsgId=new l.LongBits(e.cMsgId.low>>>0,e.cMsgId.high>>>0).toNumber())),null!=e.gzipDevices&&(t.gzipDevices=Boolean(e.gzipDevices)),null!=e.msgId&&(l.Long?(t.msgId=l.Long.fromValue(e.msgId)).unsigned=!1:"string"==typeof e.msgId?t.msgId=parseInt(e.msgId,10):"number"==typeof e.msgId?t.msgId=e.msgId:"object"==typeof e.msgId&&(t.msgId=new l.LongBits(e.msgId.low>>>0,e.msgId.high>>>0).toNumber())),e.msgIds){if(!Array.isArray(e.msgIds))throw TypeError(".MessageList.msgIds: array expected");t.msgIds=[];for(r=0;r<e.msgIds.length;++r)l.Long?(t.msgIds[r]=l.Long.fromValue(e.msgIds[r])).unsigned=!1:"string"==typeof e.msgIds[r]?t.msgIds[r]=parseInt(e.msgIds[r],10):"number"==typeof e.msgIds[r]?t.msgIds[r]=e.msgIds[r]:"object"==typeof e.msgIds[r]&&(t.msgIds[r]=new l.LongBits(e.msgIds[r].low>>>0,e.msgIds[r].high>>>0).toNumber())}return null!=e.appid&&(t.appid=String(e.appid)),null!=e.gzipDeviceIds&&("string"==typeof e.gzipDeviceIds?l.base64.decode(e.gzipDeviceIds,t.gzipDeviceIds=l.newBuffer(l.base64.length(e.gzipDeviceIds)),0):e.gzipDeviceIds.length&&(t.gzipDeviceIds=e.gzipDeviceIds)),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.msg=[],r.data=[],r.msgIds=[]),t.defaults){if(r.to="",r.deviceId="",r.from="",l.Long){var n=new l.Long(0,0,!1);r.cMsgId=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.cMsgId=t.longs===String?"0":0;if(r.gzipDevices=!1,l.Long){n=new l.Long(0,0,!1);r.msgId=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.msgId=t.longs===String?"0":0;r.appid="",t.bytes===String?r.gzipDeviceIds="":(r.gzipDeviceIds=[],t.bytes!==Array&&(r.gzipDeviceIds=l.newBuffer(r.gzipDeviceIds)))}if(null!=e.to&&e.hasOwnProperty("to")&&(r.to=e.to),null!=e.deviceId&&e.hasOwnProperty("deviceId")&&(r.deviceId=e.deviceId),e.msg&&e.msg.length){r.msg=[];for(var o=0;o<e.msg.length;++o)r.msg[o]=p.IMMessage.toObject(e.msg[o],t)}if(null!=e.from&&e.hasOwnProperty("from")&&(r.from=e.from),e.data&&e.data.length){r.data=[];for(o=0;o<e.data.length;++o)r.data[o]=p.google.protobuf.Any.toObject(e.data[o],t)}if(null!=e.cMsgId&&e.hasOwnProperty("cMsgId")&&("number"==typeof e.cMsgId?r.cMsgId=t.longs===String?String(e.cMsgId):e.cMsgId:r.cMsgId=t.longs===String?l.Long.prototype.toString.call(e.cMsgId):t.longs===Number?new l.LongBits(e.cMsgId.low>>>0,e.cMsgId.high>>>0).toNumber():e.cMsgId),null!=e.gzipDevices&&e.hasOwnProperty("gzipDevices")&&(r.gzipDevices=e.gzipDevices),null!=e.msgId&&e.hasOwnProperty("msgId")&&("number"==typeof e.msgId?r.msgId=t.longs===String?String(e.msgId):e.msgId:r.msgId=t.longs===String?l.Long.prototype.toString.call(e.msgId):t.longs===Number?new l.LongBits(e.msgId.low>>>0,e.msgId.high>>>0).toNumber():e.msgId),e.msgIds&&e.msgIds.length){r.msgIds=[];for(o=0;o<e.msgIds.length;++o)"number"==typeof e.msgIds[o]?r.msgIds[o]=t.longs===String?String(e.msgIds[o]):e.msgIds[o]:r.msgIds[o]=t.longs===String?l.Long.prototype.toString.call(e.msgIds[o]):t.longs===Number?new l.LongBits(e.msgIds[o].low>>>0,e.msgIds[o].high>>>0).toNumber():e.msgIds[o]}return null!=e.appid&&e.hasOwnProperty("appid")&&(r.appid=e.appid),null!=e.gzipDeviceIds&&e.hasOwnProperty("gzipDeviceIds")&&(r.gzipDeviceIds=t.bytes===String?l.base64.encode(e.gzipDeviceIds,0,e.gzipDeviceIds.length):t.bytes===Array?Array.prototype.slice.call(e.gzipDeviceIds):e.gzipDeviceIds),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},e}(),p.IMMessage=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.appId="",e.prototype.from="",e.prototype.to="",e.prototype.deviceId="",e.prototype.type=0,e.prototype.subType=0,e.prototype.title="",e.prototype.msgId=l.Long?l.Long.fromBits(0,0,!1):0,e.prototype.sequence=l.Long?l.Long.fromBits(0,0,!1):0,e.prototype.flag="",e.prototype.content="",e.prototype.clientTime=l.Long?l.Long.fromBits(0,0,!1):0,e.prototype.serverTime=l.Long?l.Long.fromBits(0,0,!1):0,e.prototype.cMsgId=l.Long?l.Long.fromBits(0,0,!1):0,e.prototype.bizStatus=0,e.prototype.deviceType=0,e.prototype.msgUnReadNum=0,e.prototype.extend1="",e.prototype.extend2="",e.prototype.extend3="",e.prototype.extend4=l.newBuffer([]),e.prototype.extend5="",e.prototype.extend6="",e.prototype.extend7="",e.prototype.requestId="",e.prototype.priority=0,e.prototype.toAppid="",e.prototype.liveip="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=u.create()),null!=e.appId&&Object.hasOwnProperty.call(e,"appId")&&t.uint32(10).string(e.appId),null!=e.from&&Object.hasOwnProperty.call(e,"from")&&t.uint32(18).string(e.from),null!=e.to&&Object.hasOwnProperty.call(e,"to")&&t.uint32(26).string(e.to),null!=e.deviceId&&Object.hasOwnProperty.call(e,"deviceId")&&t.uint32(34).string(e.deviceId),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(40).int32(e.type),null!=e.subType&&Object.hasOwnProperty.call(e,"subType")&&t.uint32(48).int32(e.subType),null!=e.title&&Object.hasOwnProperty.call(e,"title")&&t.uint32(58).string(e.title),null!=e.msgId&&Object.hasOwnProperty.call(e,"msgId")&&t.uint32(64).int64(e.msgId),null!=e.sequence&&Object.hasOwnProperty.call(e,"sequence")&&t.uint32(72).int64(e.sequence),null!=e.flag&&Object.hasOwnProperty.call(e,"flag")&&t.uint32(82).string(e.flag),null!=e.content&&Object.hasOwnProperty.call(e,"content")&&t.uint32(90).string(e.content),null!=e.clientTime&&Object.hasOwnProperty.call(e,"clientTime")&&t.uint32(96).int64(e.clientTime),null!=e.serverTime&&Object.hasOwnProperty.call(e,"serverTime")&&t.uint32(104).int64(e.serverTime),null!=e.cMsgId&&Object.hasOwnProperty.call(e,"cMsgId")&&t.uint32(112).int64(e.cMsgId),null!=e.bizStatus&&Object.hasOwnProperty.call(e,"bizStatus")&&t.uint32(120).int32(e.bizStatus),null!=e.deviceType&&Object.hasOwnProperty.call(e,"deviceType")&&t.uint32(128).int32(e.deviceType),null!=e.msgUnReadNum&&Object.hasOwnProperty.call(e,"msgUnReadNum")&&t.uint32(136).int32(e.msgUnReadNum),null!=e.extend1&&Object.hasOwnProperty.call(e,"extend1")&&t.uint32(146).string(e.extend1),null!=e.extend2&&Object.hasOwnProperty.call(e,"extend2")&&t.uint32(154).string(e.extend2),null!=e.extend3&&Object.hasOwnProperty.call(e,"extend3")&&t.uint32(162).string(e.extend3),null!=e.extend4&&Object.hasOwnProperty.call(e,"extend4")&&t.uint32(170).bytes(e.extend4),null!=e.extend5&&Object.hasOwnProperty.call(e,"extend5")&&t.uint32(178).string(e.extend5),null!=e.extend6&&Object.hasOwnProperty.call(e,"extend6")&&t.uint32(186).string(e.extend6),null!=e.extend7&&Object.hasOwnProperty.call(e,"extend7")&&t.uint32(194).string(e.extend7),null!=e.requestId&&Object.hasOwnProperty.call(e,"requestId")&&t.uint32(202).string(e.requestId),null!=e.priority&&Object.hasOwnProperty.call(e,"priority")&&t.uint32(208).int32(e.priority),null!=e.toAppid&&Object.hasOwnProperty.call(e,"toAppid")&&t.uint32(218).string(e.toAppid),null!=e.liveip&&Object.hasOwnProperty.call(e,"liveip")&&t.uint32(226).string(e.liveip),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof c||(e=c.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new p.IMMessage;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.appId=e.string();break;case 2:n.from=e.string();break;case 3:n.to=e.string();break;case 4:n.deviceId=e.string();break;case 5:n.type=e.int32();break;case 6:n.subType=e.int32();break;case 7:n.title=e.string();break;case 8:n.msgId=e.int64();break;case 9:n.sequence=e.int64();break;case 10:n.flag=e.string();break;case 11:n.content=e.string();break;case 12:n.clientTime=e.int64();break;case 13:n.serverTime=e.int64();break;case 14:n.cMsgId=e.int64();break;case 15:n.bizStatus=e.int32();break;case 16:n.deviceType=e.int32();break;case 17:n.msgUnReadNum=e.int32();break;case 18:n.extend1=e.string();break;case 19:n.extend2=e.string();break;case 20:n.extend3=e.string();break;case 21:n.extend4=e.bytes();break;case 22:n.extend5=e.string();break;case 23:n.extend6=e.string();break;case 24:n.extend7=e.string();break;case 25:n.requestId=e.string();break;case 26:n.priority=e.int32();break;case 27:n.toAppid=e.string();break;case 28:n.liveip=e.string();break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof c||(e=new c(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.appId&&e.hasOwnProperty("appId")&&!l.isString(e.appId)?"appId: string expected":null!=e.from&&e.hasOwnProperty("from")&&!l.isString(e.from)?"from: string expected":null!=e.to&&e.hasOwnProperty("to")&&!l.isString(e.to)?"to: string expected":null!=e.deviceId&&e.hasOwnProperty("deviceId")&&!l.isString(e.deviceId)?"deviceId: string expected":null!=e.type&&e.hasOwnProperty("type")&&!l.isInteger(e.type)?"type: integer expected":null!=e.subType&&e.hasOwnProperty("subType")&&!l.isInteger(e.subType)?"subType: integer expected":null!=e.title&&e.hasOwnProperty("title")&&!l.isString(e.title)?"title: string expected":null!=e.msgId&&e.hasOwnProperty("msgId")&&!(l.isInteger(e.msgId)||e.msgId&&l.isInteger(e.msgId.low)&&l.isInteger(e.msgId.high))?"msgId: integer|Long expected":null!=e.sequence&&e.hasOwnProperty("sequence")&&!(l.isInteger(e.sequence)||e.sequence&&l.isInteger(e.sequence.low)&&l.isInteger(e.sequence.high))?"sequence: integer|Long expected":null!=e.flag&&e.hasOwnProperty("flag")&&!l.isString(e.flag)?"flag: string expected":null!=e.content&&e.hasOwnProperty("content")&&!l.isString(e.content)?"content: string expected":null!=e.clientTime&&e.hasOwnProperty("clientTime")&&!(l.isInteger(e.clientTime)||e.clientTime&&l.isInteger(e.clientTime.low)&&l.isInteger(e.clientTime.high))?"clientTime: integer|Long expected":null!=e.serverTime&&e.hasOwnProperty("serverTime")&&!(l.isInteger(e.serverTime)||e.serverTime&&l.isInteger(e.serverTime.low)&&l.isInteger(e.serverTime.high))?"serverTime: integer|Long expected":null!=e.cMsgId&&e.hasOwnProperty("cMsgId")&&!(l.isInteger(e.cMsgId)||e.cMsgId&&l.isInteger(e.cMsgId.low)&&l.isInteger(e.cMsgId.high))?"cMsgId: integer|Long expected":null!=e.bizStatus&&e.hasOwnProperty("bizStatus")&&!l.isInteger(e.bizStatus)?"bizStatus: integer expected":null!=e.deviceType&&e.hasOwnProperty("deviceType")&&!l.isInteger(e.deviceType)?"deviceType: integer expected":null!=e.msgUnReadNum&&e.hasOwnProperty("msgUnReadNum")&&!l.isInteger(e.msgUnReadNum)?"msgUnReadNum: integer expected":null!=e.extend1&&e.hasOwnProperty("extend1")&&!l.isString(e.extend1)?"extend1: string expected":null!=e.extend2&&e.hasOwnProperty("extend2")&&!l.isString(e.extend2)?"extend2: string expected":null!=e.extend3&&e.hasOwnProperty("extend3")&&!l.isString(e.extend3)?"extend3: string expected":null!=e.extend4&&e.hasOwnProperty("extend4")&&!(e.extend4&&"number"==typeof e.extend4.length||l.isString(e.extend4))?"extend4: buffer expected":null!=e.extend5&&e.hasOwnProperty("extend5")&&!l.isString(e.extend5)?"extend5: string expected":null!=e.extend6&&e.hasOwnProperty("extend6")&&!l.isString(e.extend6)?"extend6: string expected":null!=e.extend7&&e.hasOwnProperty("extend7")&&!l.isString(e.extend7)?"extend7: string expected":null!=e.requestId&&e.hasOwnProperty("requestId")&&!l.isString(e.requestId)?"requestId: string expected":null!=e.priority&&e.hasOwnProperty("priority")&&!l.isInteger(e.priority)?"priority: integer expected":null!=e.toAppid&&e.hasOwnProperty("toAppid")&&!l.isString(e.toAppid)?"toAppid: string expected":null!=e.liveip&&e.hasOwnProperty("liveip")&&!l.isString(e.liveip)?"liveip: string expected":null},e.fromObject=function(e){if(e instanceof p.IMMessage)return e;var t=new p.IMMessage;return null!=e.appId&&(t.appId=String(e.appId)),null!=e.from&&(t.from=String(e.from)),null!=e.to&&(t.to=String(e.to)),null!=e.deviceId&&(t.deviceId=String(e.deviceId)),null!=e.type&&(t.type=0|e.type),null!=e.subType&&(t.subType=0|e.subType),null!=e.title&&(t.title=String(e.title)),null!=e.msgId&&(l.Long?(t.msgId=l.Long.fromValue(e.msgId)).unsigned=!1:"string"==typeof e.msgId?t.msgId=parseInt(e.msgId,10):"number"==typeof e.msgId?t.msgId=e.msgId:"object"==typeof e.msgId&&(t.msgId=new l.LongBits(e.msgId.low>>>0,e.msgId.high>>>0).toNumber())),null!=e.sequence&&(l.Long?(t.sequence=l.Long.fromValue(e.sequence)).unsigned=!1:"string"==typeof e.sequence?t.sequence=parseInt(e.sequence,10):"number"==typeof e.sequence?t.sequence=e.sequence:"object"==typeof e.sequence&&(t.sequence=new l.LongBits(e.sequence.low>>>0,e.sequence.high>>>0).toNumber())),null!=e.flag&&(t.flag=String(e.flag)),null!=e.content&&(t.content=String(e.content)),null!=e.clientTime&&(l.Long?(t.clientTime=l.Long.fromValue(e.clientTime)).unsigned=!1:"string"==typeof e.clientTime?t.clientTime=parseInt(e.clientTime,10):"number"==typeof e.clientTime?t.clientTime=e.clientTime:"object"==typeof e.clientTime&&(t.clientTime=new l.LongBits(e.clientTime.low>>>0,e.clientTime.high>>>0).toNumber())),null!=e.serverTime&&(l.Long?(t.serverTime=l.Long.fromValue(e.serverTime)).unsigned=!1:"string"==typeof e.serverTime?t.serverTime=parseInt(e.serverTime,10):"number"==typeof e.serverTime?t.serverTime=e.serverTime:"object"==typeof e.serverTime&&(t.serverTime=new l.LongBits(e.serverTime.low>>>0,e.serverTime.high>>>0).toNumber())),null!=e.cMsgId&&(l.Long?(t.cMsgId=l.Long.fromValue(e.cMsgId)).unsigned=!1:"string"==typeof e.cMsgId?t.cMsgId=parseInt(e.cMsgId,10):"number"==typeof e.cMsgId?t.cMsgId=e.cMsgId:"object"==typeof e.cMsgId&&(t.cMsgId=new l.LongBits(e.cMsgId.low>>>0,e.cMsgId.high>>>0).toNumber())),null!=e.bizStatus&&(t.bizStatus=0|e.bizStatus),null!=e.deviceType&&(t.deviceType=0|e.deviceType),null!=e.msgUnReadNum&&(t.msgUnReadNum=0|e.msgUnReadNum),null!=e.extend1&&(t.extend1=String(e.extend1)),null!=e.extend2&&(t.extend2=String(e.extend2)),null!=e.extend3&&(t.extend3=String(e.extend3)),null!=e.extend4&&("string"==typeof e.extend4?l.base64.decode(e.extend4,t.extend4=l.newBuffer(l.base64.length(e.extend4)),0):e.extend4.length&&(t.extend4=e.extend4)),null!=e.extend5&&(t.extend5=String(e.extend5)),null!=e.extend6&&(t.extend6=String(e.extend6)),null!=e.extend7&&(t.extend7=String(e.extend7)),null!=e.requestId&&(t.requestId=String(e.requestId)),null!=e.priority&&(t.priority=0|e.priority),null!=e.toAppid&&(t.toAppid=String(e.toAppid)),null!=e.liveip&&(t.liveip=String(e.liveip)),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if(r.appId="",r.from="",r.to="",r.deviceId="",r.type=0,r.subType=0,r.title="",l.Long){var n=new l.Long(0,0,!1);r.msgId=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.msgId=t.longs===String?"0":0;if(l.Long){n=new l.Long(0,0,!1);r.sequence=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.sequence=t.longs===String?"0":0;if(r.flag="",r.content="",l.Long){n=new l.Long(0,0,!1);r.clientTime=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.clientTime=t.longs===String?"0":0;if(l.Long){n=new l.Long(0,0,!1);r.serverTime=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.serverTime=t.longs===String?"0":0;if(l.Long){n=new l.Long(0,0,!1);r.cMsgId=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.cMsgId=t.longs===String?"0":0;r.bizStatus=0,r.deviceType=0,r.msgUnReadNum=0,r.extend1="",r.extend2="",r.extend3="",t.bytes===String?r.extend4="":(r.extend4=[],t.bytes!==Array&&(r.extend4=l.newBuffer(r.extend4))),r.extend5="",r.extend6="",r.extend7="",r.requestId="",r.priority=0,r.toAppid="",r.liveip=""}return null!=e.appId&&e.hasOwnProperty("appId")&&(r.appId=e.appId),null!=e.from&&e.hasOwnProperty("from")&&(r.from=e.from),null!=e.to&&e.hasOwnProperty("to")&&(r.to=e.to),null!=e.deviceId&&e.hasOwnProperty("deviceId")&&(r.deviceId=e.deviceId),null!=e.type&&e.hasOwnProperty("type")&&(r.type=e.type),null!=e.subType&&e.hasOwnProperty("subType")&&(r.subType=e.subType),null!=e.title&&e.hasOwnProperty("title")&&(r.title=e.title),null!=e.msgId&&e.hasOwnProperty("msgId")&&("number"==typeof e.msgId?r.msgId=t.longs===String?String(e.msgId):e.msgId:r.msgId=t.longs===String?l.Long.prototype.toString.call(e.msgId):t.longs===Number?new l.LongBits(e.msgId.low>>>0,e.msgId.high>>>0).toNumber():e.msgId),null!=e.sequence&&e.hasOwnProperty("sequence")&&("number"==typeof e.sequence?r.sequence=t.longs===String?String(e.sequence):e.sequence:r.sequence=t.longs===String?l.Long.prototype.toString.call(e.sequence):t.longs===Number?new l.LongBits(e.sequence.low>>>0,e.sequence.high>>>0).toNumber():e.sequence),null!=e.flag&&e.hasOwnProperty("flag")&&(r.flag=e.flag),null!=e.content&&e.hasOwnProperty("content")&&(r.content=e.content),null!=e.clientTime&&e.hasOwnProperty("clientTime")&&("number"==typeof e.clientTime?r.clientTime=t.longs===String?String(e.clientTime):e.clientTime:r.clientTime=t.longs===String?l.Long.prototype.toString.call(e.clientTime):t.longs===Number?new l.LongBits(e.clientTime.low>>>0,e.clientTime.high>>>0).toNumber():e.clientTime),null!=e.serverTime&&e.hasOwnProperty("serverTime")&&("number"==typeof e.serverTime?r.serverTime=t.longs===String?String(e.serverTime):e.serverTime:r.serverTime=t.longs===String?l.Long.prototype.toString.call(e.serverTime):t.longs===Number?new l.LongBits(e.serverTime.low>>>0,e.serverTime.high>>>0).toNumber():e.serverTime),null!=e.cMsgId&&e.hasOwnProperty("cMsgId")&&("number"==typeof e.cMsgId?r.cMsgId=t.longs===String?String(e.cMsgId):e.cMsgId:r.cMsgId=t.longs===String?l.Long.prototype.toString.call(e.cMsgId):t.longs===Number?new l.LongBits(e.cMsgId.low>>>0,e.cMsgId.high>>>0).toNumber():e.cMsgId),null!=e.bizStatus&&e.hasOwnProperty("bizStatus")&&(r.bizStatus=e.bizStatus),null!=e.deviceType&&e.hasOwnProperty("deviceType")&&(r.deviceType=e.deviceType),null!=e.msgUnReadNum&&e.hasOwnProperty("msgUnReadNum")&&(r.msgUnReadNum=e.msgUnReadNum),null!=e.extend1&&e.hasOwnProperty("extend1")&&(r.extend1=e.extend1),null!=e.extend2&&e.hasOwnProperty("extend2")&&(r.extend2=e.extend2),null!=e.extend3&&e.hasOwnProperty("extend3")&&(r.extend3=e.extend3),null!=e.extend4&&e.hasOwnProperty("extend4")&&(r.extend4=t.bytes===String?l.base64.encode(e.extend4,0,e.extend4.length):t.bytes===Array?Array.prototype.slice.call(e.extend4):e.extend4),null!=e.extend5&&e.hasOwnProperty("extend5")&&(r.extend5=e.extend5),null!=e.extend6&&e.hasOwnProperty("extend6")&&(r.extend6=e.extend6),null!=e.extend7&&e.hasOwnProperty("extend7")&&(r.extend7=e.extend7),null!=e.requestId&&e.hasOwnProperty("requestId")&&(r.requestId=e.requestId),null!=e.priority&&e.hasOwnProperty("priority")&&(r.priority=e.priority),null!=e.toAppid&&e.hasOwnProperty("toAppid")&&(r.toAppid=e.toAppid),null!=e.liveip&&e.hasOwnProperty("liveip")&&(r.liveip=e.liveip),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},e}(),p.Ack=function(){function e(e){if(this.messageAck=[],this.roomMsgAck=[],this.groupUsers=[],this.userGroups=[],this.data=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.to="",e.prototype.deviceId="",e.prototype.type=0,e.prototype.stateCode=0,e.prototype.userAck=null,e.prototype.messageAck=l.emptyArray,e.prototype.roomMsgAck=l.emptyArray,e.prototype.appId="",e.prototype.groupInfo=null,e.prototype.groupUsers=l.emptyArray,e.prototype.userGroups=l.emptyArray,e.prototype.msgId=l.Long?l.Long.fromBits(0,0,!1):0,e.prototype.cMsgId=l.Long?l.Long.fromBits(0,0,!1):0,e.prototype.userGroupsTotal=0,e.prototype.data=l.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=u.create()),null!=e.to&&Object.hasOwnProperty.call(e,"to")&&t.uint32(10).string(e.to),null!=e.deviceId&&Object.hasOwnProperty.call(e,"deviceId")&&t.uint32(18).string(e.deviceId),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(24).int32(e.type),null!=e.stateCode&&Object.hasOwnProperty.call(e,"stateCode")&&t.uint32(32).int32(e.stateCode),null!=e.userAck&&Object.hasOwnProperty.call(e,"userAck")&&p.UserAck.encode(e.userAck,t.uint32(42).fork()).ldelim(),null!=e.messageAck&&e.messageAck.length)for(var r=0;r<e.messageAck.length;++r)p.MessageAck.encode(e.messageAck[r],t.uint32(50).fork()).ldelim();if(null!=e.roomMsgAck&&e.roomMsgAck.length)for(r=0;r<e.roomMsgAck.length;++r)p.RoomMsgAck.encode(e.roomMsgAck[r],t.uint32(58).fork()).ldelim();if(null!=e.appId&&Object.hasOwnProperty.call(e,"appId")&&t.uint32(66).string(e.appId),null!=e.groupInfo&&Object.hasOwnProperty.call(e,"groupInfo")&&p.GroupMessage.encode(e.groupInfo,t.uint32(74).fork()).ldelim(),null!=e.groupUsers&&e.groupUsers.length)for(r=0;r<e.groupUsers.length;++r)p.GroupMessage.encode(e.groupUsers[r],t.uint32(82).fork()).ldelim();if(null!=e.userGroups&&e.userGroups.length)for(r=0;r<e.userGroups.length;++r)p.GroupMessage.encode(e.userGroups[r],t.uint32(90).fork()).ldelim();if(null!=e.msgId&&Object.hasOwnProperty.call(e,"msgId")&&t.uint32(96).int64(e.msgId),null!=e.cMsgId&&Object.hasOwnProperty.call(e,"cMsgId")&&t.uint32(112).int64(e.cMsgId),null!=e.userGroupsTotal&&Object.hasOwnProperty.call(e,"userGroupsTotal")&&t.uint32(120).int32(e.userGroupsTotal),null!=e.data&&e.data.length)for(r=0;r<e.data.length;++r)p.google.protobuf.Any.encode(e.data[r],t.uint32(130).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof c||(e=c.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new p.Ack;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.to=e.string();break;case 2:n.deviceId=e.string();break;case 3:n.type=e.int32();break;case 4:n.stateCode=e.int32();break;case 5:n.userAck=p.UserAck.decode(e,e.uint32());break;case 6:n.messageAck&&n.messageAck.length||(n.messageAck=[]),n.messageAck.push(p.MessageAck.decode(e,e.uint32()));break;case 7:n.roomMsgAck&&n.roomMsgAck.length||(n.roomMsgAck=[]),n.roomMsgAck.push(p.RoomMsgAck.decode(e,e.uint32()));break;case 8:n.appId=e.string();break;case 9:n.groupInfo=p.GroupMessage.decode(e,e.uint32());break;case 10:n.groupUsers&&n.groupUsers.length||(n.groupUsers=[]),n.groupUsers.push(p.GroupMessage.decode(e,e.uint32()));break;case 11:n.userGroups&&n.userGroups.length||(n.userGroups=[]),n.userGroups.push(p.GroupMessage.decode(e,e.uint32()));break;case 12:n.msgId=e.int64();break;case 14:n.cMsgId=e.int64();break;case 15:n.userGroupsTotal=e.int32();break;case 16:n.data&&n.data.length||(n.data=[]),n.data.push(p.google.protobuf.Any.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof c||(e=new c(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.to&&e.hasOwnProperty("to")&&!l.isString(e.to))return"to: string expected";if(null!=e.deviceId&&e.hasOwnProperty("deviceId")&&!l.isString(e.deviceId))return"deviceId: string expected";if(null!=e.type&&e.hasOwnProperty("type")&&!l.isInteger(e.type))return"type: integer expected";if(null!=e.stateCode&&e.hasOwnProperty("stateCode")&&!l.isInteger(e.stateCode))return"stateCode: integer expected";if(null!=e.userAck&&e.hasOwnProperty("userAck")&&(r=p.UserAck.verify(e.userAck)))return"userAck."+r;if(null!=e.messageAck&&e.hasOwnProperty("messageAck")){if(!Array.isArray(e.messageAck))return"messageAck: array expected";for(var t=0;t<e.messageAck.length;++t){if(r=p.MessageAck.verify(e.messageAck[t]))return"messageAck."+r}}if(null!=e.roomMsgAck&&e.hasOwnProperty("roomMsgAck")){if(!Array.isArray(e.roomMsgAck))return"roomMsgAck: array expected";for(t=0;t<e.roomMsgAck.length;++t){if(r=p.RoomMsgAck.verify(e.roomMsgAck[t]))return"roomMsgAck."+r}}if(null!=e.appId&&e.hasOwnProperty("appId")&&!l.isString(e.appId))return"appId: string expected";if(null!=e.groupInfo&&e.hasOwnProperty("groupInfo")&&(r=p.GroupMessage.verify(e.groupInfo)))return"groupInfo."+r;if(null!=e.groupUsers&&e.hasOwnProperty("groupUsers")){if(!Array.isArray(e.groupUsers))return"groupUsers: array expected";for(t=0;t<e.groupUsers.length;++t){if(r=p.GroupMessage.verify(e.groupUsers[t]))return"groupUsers."+r}}if(null!=e.userGroups&&e.hasOwnProperty("userGroups")){if(!Array.isArray(e.userGroups))return"userGroups: array expected";for(t=0;t<e.userGroups.length;++t){if(r=p.GroupMessage.verify(e.userGroups[t]))return"userGroups."+r}}if(null!=e.msgId&&e.hasOwnProperty("msgId")&&!(l.isInteger(e.msgId)||e.msgId&&l.isInteger(e.msgId.low)&&l.isInteger(e.msgId.high)))return"msgId: integer|Long expected";if(null!=e.cMsgId&&e.hasOwnProperty("cMsgId")&&!(l.isInteger(e.cMsgId)||e.cMsgId&&l.isInteger(e.cMsgId.low)&&l.isInteger(e.cMsgId.high)))return"cMsgId: integer|Long expected";if(null!=e.userGroupsTotal&&e.hasOwnProperty("userGroupsTotal")&&!l.isInteger(e.userGroupsTotal))return"userGroupsTotal: integer expected";if(null!=e.data&&e.hasOwnProperty("data")){if(!Array.isArray(e.data))return"data: array expected";for(t=0;t<e.data.length;++t){var r;if(r=p.google.protobuf.Any.verify(e.data[t]))return"data."+r}}return null},e.fromObject=function(e){if(e instanceof p.Ack)return e;var t=new p.Ack;if(null!=e.to&&(t.to=String(e.to)),null!=e.deviceId&&(t.deviceId=String(e.deviceId)),null!=e.type&&(t.type=0|e.type),null!=e.stateCode&&(t.stateCode=0|e.stateCode),null!=e.userAck){if("object"!=typeof e.userAck)throw TypeError(".Ack.userAck: object expected");t.userAck=p.UserAck.fromObject(e.userAck)}if(e.messageAck){if(!Array.isArray(e.messageAck))throw TypeError(".Ack.messageAck: array expected");t.messageAck=[];for(var r=0;r<e.messageAck.length;++r){if("object"!=typeof e.messageAck[r])throw TypeError(".Ack.messageAck: object expected");t.messageAck[r]=p.MessageAck.fromObject(e.messageAck[r])}}if(e.roomMsgAck){if(!Array.isArray(e.roomMsgAck))throw TypeError(".Ack.roomMsgAck: array expected");t.roomMsgAck=[];for(r=0;r<e.roomMsgAck.length;++r){if("object"!=typeof e.roomMsgAck[r])throw TypeError(".Ack.roomMsgAck: object expected");t.roomMsgAck[r]=p.RoomMsgAck.fromObject(e.roomMsgAck[r])}}if(null!=e.appId&&(t.appId=String(e.appId)),null!=e.groupInfo){if("object"!=typeof e.groupInfo)throw TypeError(".Ack.groupInfo: object expected");t.groupInfo=p.GroupMessage.fromObject(e.groupInfo)}if(e.groupUsers){if(!Array.isArray(e.groupUsers))throw TypeError(".Ack.groupUsers: array expected");t.groupUsers=[];for(r=0;r<e.groupUsers.length;++r){if("object"!=typeof e.groupUsers[r])throw TypeError(".Ack.groupUsers: object expected");t.groupUsers[r]=p.GroupMessage.fromObject(e.groupUsers[r])}}if(e.userGroups){if(!Array.isArray(e.userGroups))throw TypeError(".Ack.userGroups: array expected");t.userGroups=[];for(r=0;r<e.userGroups.length;++r){if("object"!=typeof e.userGroups[r])throw TypeError(".Ack.userGroups: object expected");t.userGroups[r]=p.GroupMessage.fromObject(e.userGroups[r])}}if(null!=e.msgId&&(l.Long?(t.msgId=l.Long.fromValue(e.msgId)).unsigned=!1:"string"==typeof e.msgId?t.msgId=parseInt(e.msgId,10):"number"==typeof e.msgId?t.msgId=e.msgId:"object"==typeof e.msgId&&(t.msgId=new l.LongBits(e.msgId.low>>>0,e.msgId.high>>>0).toNumber())),null!=e.cMsgId&&(l.Long?(t.cMsgId=l.Long.fromValue(e.cMsgId)).unsigned=!1:"string"==typeof e.cMsgId?t.cMsgId=parseInt(e.cMsgId,10):"number"==typeof e.cMsgId?t.cMsgId=e.cMsgId:"object"==typeof e.cMsgId&&(t.cMsgId=new l.LongBits(e.cMsgId.low>>>0,e.cMsgId.high>>>0).toNumber())),null!=e.userGroupsTotal&&(t.userGroupsTotal=0|e.userGroupsTotal),e.data){if(!Array.isArray(e.data))throw TypeError(".Ack.data: array expected");t.data=[];for(r=0;r<e.data.length;++r){if("object"!=typeof e.data[r])throw TypeError(".Ack.data: object expected");t.data[r]=p.google.protobuf.Any.fromObject(e.data[r])}}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.messageAck=[],r.roomMsgAck=[],r.groupUsers=[],r.userGroups=[],r.data=[]),t.defaults){if(r.to="",r.deviceId="",r.type=0,r.stateCode=0,r.userAck=null,r.appId="",r.groupInfo=null,l.Long){var n=new l.Long(0,0,!1);r.msgId=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.msgId=t.longs===String?"0":0;if(l.Long){n=new l.Long(0,0,!1);r.cMsgId=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.cMsgId=t.longs===String?"0":0;r.userGroupsTotal=0}if(null!=e.to&&e.hasOwnProperty("to")&&(r.to=e.to),null!=e.deviceId&&e.hasOwnProperty("deviceId")&&(r.deviceId=e.deviceId),null!=e.type&&e.hasOwnProperty("type")&&(r.type=e.type),null!=e.stateCode&&e.hasOwnProperty("stateCode")&&(r.stateCode=e.stateCode),null!=e.userAck&&e.hasOwnProperty("userAck")&&(r.userAck=p.UserAck.toObject(e.userAck,t)),e.messageAck&&e.messageAck.length){r.messageAck=[];for(var o=0;o<e.messageAck.length;++o)r.messageAck[o]=p.MessageAck.toObject(e.messageAck[o],t)}if(e.roomMsgAck&&e.roomMsgAck.length){r.roomMsgAck=[];for(o=0;o<e.roomMsgAck.length;++o)r.roomMsgAck[o]=p.RoomMsgAck.toObject(e.roomMsgAck[o],t)}if(null!=e.appId&&e.hasOwnProperty("appId")&&(r.appId=e.appId),null!=e.groupInfo&&e.hasOwnProperty("groupInfo")&&(r.groupInfo=p.GroupMessage.toObject(e.groupInfo,t)),e.groupUsers&&e.groupUsers.length){r.groupUsers=[];for(o=0;o<e.groupUsers.length;++o)r.groupUsers[o]=p.GroupMessage.toObject(e.groupUsers[o],t)}if(e.userGroups&&e.userGroups.length){r.userGroups=[];for(o=0;o<e.userGroups.length;++o)r.userGroups[o]=p.GroupMessage.toObject(e.userGroups[o],t)}if(null!=e.msgId&&e.hasOwnProperty("msgId")&&("number"==typeof e.msgId?r.msgId=t.longs===String?String(e.msgId):e.msgId:r.msgId=t.longs===String?l.Long.prototype.toString.call(e.msgId):t.longs===Number?new l.LongBits(e.msgId.low>>>0,e.msgId.high>>>0).toNumber():e.msgId),null!=e.cMsgId&&e.hasOwnProperty("cMsgId")&&("number"==typeof e.cMsgId?r.cMsgId=t.longs===String?String(e.cMsgId):e.cMsgId:r.cMsgId=t.longs===String?l.Long.prototype.toString.call(e.cMsgId):t.longs===Number?new l.LongBits(e.cMsgId.low>>>0,e.cMsgId.high>>>0).toNumber():e.cMsgId),null!=e.userGroupsTotal&&e.hasOwnProperty("userGroupsTotal")&&(r.userGroupsTotal=e.userGroupsTotal),e.data&&e.data.length){r.data=[];for(o=0;o<e.data.length;++o)r.data[o]=p.google.protobuf.Any.toObject(e.data[o],t)}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},e}(),p.UserAck=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.userId="",e.prototype.deviceId="",e.prototype.sessionKey="",e.prototype.serverTime=l.Long?l.Long.fromBits(0,0,!1):0,e.prototype.cMsgId=l.Long?l.Long.fromBits(0,0,!1):0,e.prototype.refreshConfig=0,e.prototype.unReadMsgSize=l.Long?l.Long.fromBits(0,0,!1):0,e.prototype.switchFlags=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=u.create()),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(10).string(e.userId),null!=e.deviceId&&Object.hasOwnProperty.call(e,"deviceId")&&t.uint32(18).string(e.deviceId),null!=e.sessionKey&&Object.hasOwnProperty.call(e,"sessionKey")&&t.uint32(26).string(e.sessionKey),null!=e.serverTime&&Object.hasOwnProperty.call(e,"serverTime")&&t.uint32(32).int64(e.serverTime),null!=e.cMsgId&&Object.hasOwnProperty.call(e,"cMsgId")&&t.uint32(40).int64(e.cMsgId),null!=e.refreshConfig&&Object.hasOwnProperty.call(e,"refreshConfig")&&t.uint32(48).int32(e.refreshConfig),null!=e.unReadMsgSize&&Object.hasOwnProperty.call(e,"unReadMsgSize")&&t.uint32(56).int64(e.unReadMsgSize),null!=e.switchFlags&&Object.hasOwnProperty.call(e,"switchFlags")&&t.uint32(64).int32(e.switchFlags),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof c||(e=c.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new p.UserAck;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.userId=e.string();break;case 2:n.deviceId=e.string();break;case 3:n.sessionKey=e.string();break;case 4:n.serverTime=e.int64();break;case 5:n.cMsgId=e.int64();break;case 6:n.refreshConfig=e.int32();break;case 7:n.unReadMsgSize=e.int64();break;case 8:n.switchFlags=e.int32();break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof c||(e=new c(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.userId&&e.hasOwnProperty("userId")&&!l.isString(e.userId)?"userId: string expected":null!=e.deviceId&&e.hasOwnProperty("deviceId")&&!l.isString(e.deviceId)?"deviceId: string expected":null!=e.sessionKey&&e.hasOwnProperty("sessionKey")&&!l.isString(e.sessionKey)?"sessionKey: string expected":null!=e.serverTime&&e.hasOwnProperty("serverTime")&&!(l.isInteger(e.serverTime)||e.serverTime&&l.isInteger(e.serverTime.low)&&l.isInteger(e.serverTime.high))?"serverTime: integer|Long expected":null!=e.cMsgId&&e.hasOwnProperty("cMsgId")&&!(l.isInteger(e.cMsgId)||e.cMsgId&&l.isInteger(e.cMsgId.low)&&l.isInteger(e.cMsgId.high))?"cMsgId: integer|Long expected":null!=e.refreshConfig&&e.hasOwnProperty("refreshConfig")&&!l.isInteger(e.refreshConfig)?"refreshConfig: integer expected":null!=e.unReadMsgSize&&e.hasOwnProperty("unReadMsgSize")&&!(l.isInteger(e.unReadMsgSize)||e.unReadMsgSize&&l.isInteger(e.unReadMsgSize.low)&&l.isInteger(e.unReadMsgSize.high))?"unReadMsgSize: integer|Long expected":null!=e.switchFlags&&e.hasOwnProperty("switchFlags")&&!l.isInteger(e.switchFlags)?"switchFlags: integer expected":null},e.fromObject=function(e){if(e instanceof p.UserAck)return e;var t=new p.UserAck;return null!=e.userId&&(t.userId=String(e.userId)),null!=e.deviceId&&(t.deviceId=String(e.deviceId)),null!=e.sessionKey&&(t.sessionKey=String(e.sessionKey)),null!=e.serverTime&&(l.Long?(t.serverTime=l.Long.fromValue(e.serverTime)).unsigned=!1:"string"==typeof e.serverTime?t.serverTime=parseInt(e.serverTime,10):"number"==typeof e.serverTime?t.serverTime=e.serverTime:"object"==typeof e.serverTime&&(t.serverTime=new l.LongBits(e.serverTime.low>>>0,e.serverTime.high>>>0).toNumber())),null!=e.cMsgId&&(l.Long?(t.cMsgId=l.Long.fromValue(e.cMsgId)).unsigned=!1:"string"==typeof e.cMsgId?t.cMsgId=parseInt(e.cMsgId,10):"number"==typeof e.cMsgId?t.cMsgId=e.cMsgId:"object"==typeof e.cMsgId&&(t.cMsgId=new l.LongBits(e.cMsgId.low>>>0,e.cMsgId.high>>>0).toNumber())),null!=e.refreshConfig&&(t.refreshConfig=0|e.refreshConfig),null!=e.unReadMsgSize&&(l.Long?(t.unReadMsgSize=l.Long.fromValue(e.unReadMsgSize)).unsigned=!1:"string"==typeof e.unReadMsgSize?t.unReadMsgSize=parseInt(e.unReadMsgSize,10):"number"==typeof e.unReadMsgSize?t.unReadMsgSize=e.unReadMsgSize:"object"==typeof e.unReadMsgSize&&(t.unReadMsgSize=new l.LongBits(e.unReadMsgSize.low>>>0,e.unReadMsgSize.high>>>0).toNumber())),null!=e.switchFlags&&(t.switchFlags=0|e.switchFlags),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if(r.userId="",r.deviceId="",r.sessionKey="",l.Long){var n=new l.Long(0,0,!1);r.serverTime=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.serverTime=t.longs===String?"0":0;if(l.Long){n=new l.Long(0,0,!1);r.cMsgId=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.cMsgId=t.longs===String?"0":0;if(r.refreshConfig=0,l.Long){n=new l.Long(0,0,!1);r.unReadMsgSize=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.unReadMsgSize=t.longs===String?"0":0;r.switchFlags=0}return null!=e.userId&&e.hasOwnProperty("userId")&&(r.userId=e.userId),null!=e.deviceId&&e.hasOwnProperty("deviceId")&&(r.deviceId=e.deviceId),null!=e.sessionKey&&e.hasOwnProperty("sessionKey")&&(r.sessionKey=e.sessionKey),null!=e.serverTime&&e.hasOwnProperty("serverTime")&&("number"==typeof e.serverTime?r.serverTime=t.longs===String?String(e.serverTime):e.serverTime:r.serverTime=t.longs===String?l.Long.prototype.toString.call(e.serverTime):t.longs===Number?new l.LongBits(e.serverTime.low>>>0,e.serverTime.high>>>0).toNumber():e.serverTime),null!=e.cMsgId&&e.hasOwnProperty("cMsgId")&&("number"==typeof e.cMsgId?r.cMsgId=t.longs===String?String(e.cMsgId):e.cMsgId:r.cMsgId=t.longs===String?l.Long.prototype.toString.call(e.cMsgId):t.longs===Number?new l.LongBits(e.cMsgId.low>>>0,e.cMsgId.high>>>0).toNumber():e.cMsgId),null!=e.refreshConfig&&e.hasOwnProperty("refreshConfig")&&(r.refreshConfig=e.refreshConfig),null!=e.unReadMsgSize&&e.hasOwnProperty("unReadMsgSize")&&("number"==typeof e.unReadMsgSize?r.unReadMsgSize=t.longs===String?String(e.unReadMsgSize):e.unReadMsgSize:r.unReadMsgSize=t.longs===String?l.Long.prototype.toString.call(e.unReadMsgSize):t.longs===Number?new l.LongBits(e.unReadMsgSize.low>>>0,e.unReadMsgSize.high>>>0).toNumber():e.unReadMsgSize),null!=e.switchFlags&&e.hasOwnProperty("switchFlags")&&(r.switchFlags=e.switchFlags),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},e}(),p.MessageAck=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.msgId=l.Long?l.Long.fromBits(0,0,!1):0,e.prototype.type=0,e.prototype.cMsgId=l.Long?l.Long.fromBits(0,0,!1):0,e.prototype.serverTime=l.Long?l.Long.fromBits(0,0,!1):0,e.prototype.sequence=l.Long?l.Long.fromBits(0,0,!1):0,e.prototype.extend1="",e.prototype.extend2="",e.prototype.extend3="",e.prototype.extend4="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=u.create()),null!=e.msgId&&Object.hasOwnProperty.call(e,"msgId")&&t.uint32(8).int64(e.msgId),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(16).int32(e.type),null!=e.cMsgId&&Object.hasOwnProperty.call(e,"cMsgId")&&t.uint32(24).int64(e.cMsgId),null!=e.serverTime&&Object.hasOwnProperty.call(e,"serverTime")&&t.uint32(32).int64(e.serverTime),null!=e.sequence&&Object.hasOwnProperty.call(e,"sequence")&&t.uint32(40).int64(e.sequence),null!=e.extend1&&Object.hasOwnProperty.call(e,"extend1")&&t.uint32(50).string(e.extend1),null!=e.extend2&&Object.hasOwnProperty.call(e,"extend2")&&t.uint32(58).string(e.extend2),null!=e.extend3&&Object.hasOwnProperty.call(e,"extend3")&&t.uint32(66).string(e.extend3),null!=e.extend4&&Object.hasOwnProperty.call(e,"extend4")&&t.uint32(74).string(e.extend4),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof c||(e=c.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new p.MessageAck;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.msgId=e.int64();break;case 2:n.type=e.int32();break;case 3:n.cMsgId=e.int64();break;case 4:n.serverTime=e.int64();break;case 5:n.sequence=e.int64();break;case 6:n.extend1=e.string();break;case 7:n.extend2=e.string();break;case 8:n.extend3=e.string();break;case 9:n.extend4=e.string();break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof c||(e=new c(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.msgId&&e.hasOwnProperty("msgId")&&!(l.isInteger(e.msgId)||e.msgId&&l.isInteger(e.msgId.low)&&l.isInteger(e.msgId.high))?"msgId: integer|Long expected":null!=e.type&&e.hasOwnProperty("type")&&!l.isInteger(e.type)?"type: integer expected":null!=e.cMsgId&&e.hasOwnProperty("cMsgId")&&!(l.isInteger(e.cMsgId)||e.cMsgId&&l.isInteger(e.cMsgId.low)&&l.isInteger(e.cMsgId.high))?"cMsgId: integer|Long expected":null!=e.serverTime&&e.hasOwnProperty("serverTime")&&!(l.isInteger(e.serverTime)||e.serverTime&&l.isInteger(e.serverTime.low)&&l.isInteger(e.serverTime.high))?"serverTime: integer|Long expected":null!=e.sequence&&e.hasOwnProperty("sequence")&&!(l.isInteger(e.sequence)||e.sequence&&l.isInteger(e.sequence.low)&&l.isInteger(e.sequence.high))?"sequence: integer|Long expected":null!=e.extend1&&e.hasOwnProperty("extend1")&&!l.isString(e.extend1)?"extend1: string expected":null!=e.extend2&&e.hasOwnProperty("extend2")&&!l.isString(e.extend2)?"extend2: string expected":null!=e.extend3&&e.hasOwnProperty("extend3")&&!l.isString(e.extend3)?"extend3: string expected":null!=e.extend4&&e.hasOwnProperty("extend4")&&!l.isString(e.extend4)?"extend4: string expected":null},e.fromObject=function(e){if(e instanceof p.MessageAck)return e;var t=new p.MessageAck;return null!=e.msgId&&(l.Long?(t.msgId=l.Long.fromValue(e.msgId)).unsigned=!1:"string"==typeof e.msgId?t.msgId=parseInt(e.msgId,10):"number"==typeof e.msgId?t.msgId=e.msgId:"object"==typeof e.msgId&&(t.msgId=new l.LongBits(e.msgId.low>>>0,e.msgId.high>>>0).toNumber())),null!=e.type&&(t.type=0|e.type),null!=e.cMsgId&&(l.Long?(t.cMsgId=l.Long.fromValue(e.cMsgId)).unsigned=!1:"string"==typeof e.cMsgId?t.cMsgId=parseInt(e.cMsgId,10):"number"==typeof e.cMsgId?t.cMsgId=e.cMsgId:"object"==typeof e.cMsgId&&(t.cMsgId=new l.LongBits(e.cMsgId.low>>>0,e.cMsgId.high>>>0).toNumber())),null!=e.serverTime&&(l.Long?(t.serverTime=l.Long.fromValue(e.serverTime)).unsigned=!1:"string"==typeof e.serverTime?t.serverTime=parseInt(e.serverTime,10):"number"==typeof e.serverTime?t.serverTime=e.serverTime:"object"==typeof e.serverTime&&(t.serverTime=new l.LongBits(e.serverTime.low>>>0,e.serverTime.high>>>0).toNumber())),null!=e.sequence&&(l.Long?(t.sequence=l.Long.fromValue(e.sequence)).unsigned=!1:"string"==typeof e.sequence?t.sequence=parseInt(e.sequence,10):"number"==typeof e.sequence?t.sequence=e.sequence:"object"==typeof e.sequence&&(t.sequence=new l.LongBits(e.sequence.low>>>0,e.sequence.high>>>0).toNumber())),null!=e.extend1&&(t.extend1=String(e.extend1)),null!=e.extend2&&(t.extend2=String(e.extend2)),null!=e.extend3&&(t.extend3=String(e.extend3)),null!=e.extend4&&(t.extend4=String(e.extend4)),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if(l.Long){var n=new l.Long(0,0,!1);r.msgId=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.msgId=t.longs===String?"0":0;if(r.type=0,l.Long){n=new l.Long(0,0,!1);r.cMsgId=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.cMsgId=t.longs===String?"0":0;if(l.Long){n=new l.Long(0,0,!1);r.serverTime=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.serverTime=t.longs===String?"0":0;if(l.Long){n=new l.Long(0,0,!1);r.sequence=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.sequence=t.longs===String?"0":0;r.extend1="",r.extend2="",r.extend3="",r.extend4=""}return null!=e.msgId&&e.hasOwnProperty("msgId")&&("number"==typeof e.msgId?r.msgId=t.longs===String?String(e.msgId):e.msgId:r.msgId=t.longs===String?l.Long.prototype.toString.call(e.msgId):t.longs===Number?new l.LongBits(e.msgId.low>>>0,e.msgId.high>>>0).toNumber():e.msgId),null!=e.type&&e.hasOwnProperty("type")&&(r.type=e.type),null!=e.cMsgId&&e.hasOwnProperty("cMsgId")&&("number"==typeof e.cMsgId?r.cMsgId=t.longs===String?String(e.cMsgId):e.cMsgId:r.cMsgId=t.longs===String?l.Long.prototype.toString.call(e.cMsgId):t.longs===Number?new l.LongBits(e.cMsgId.low>>>0,e.cMsgId.high>>>0).toNumber():e.cMsgId),null!=e.serverTime&&e.hasOwnProperty("serverTime")&&("number"==typeof e.serverTime?r.serverTime=t.longs===String?String(e.serverTime):e.serverTime:r.serverTime=t.longs===String?l.Long.prototype.toString.call(e.serverTime):t.longs===Number?new l.LongBits(e.serverTime.low>>>0,e.serverTime.high>>>0).toNumber():e.serverTime),null!=e.sequence&&e.hasOwnProperty("sequence")&&("number"==typeof e.sequence?r.sequence=t.longs===String?String(e.sequence):e.sequence:r.sequence=t.longs===String?l.Long.prototype.toString.call(e.sequence):t.longs===Number?new l.LongBits(e.sequence.low>>>0,e.sequence.high>>>0).toNumber():e.sequence),null!=e.extend1&&e.hasOwnProperty("extend1")&&(r.extend1=e.extend1),null!=e.extend2&&e.hasOwnProperty("extend2")&&(r.extend2=e.extend2),null!=e.extend3&&e.hasOwnProperty("extend3")&&(r.extend3=e.extend3),null!=e.extend4&&e.hasOwnProperty("extend4")&&(r.extend4=e.extend4),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},e}(),p.RoomMsgAck=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.msgId=l.Long?l.Long.fromBits(0,0,!1):0,e.prototype.type=0,e.prototype.subType=l.Long?l.Long.fromBits(0,0,!1):0,e.prototype.diyType=0,e.prototype.from=l.Long?l.Long.fromBits(0,0,!1):0,e.prototype.roomId=l.Long?l.Long.fromBits(0,0,!1):0,e.prototype.sequence=l.Long?l.Long.fromBits(0,0,!1):0,e.prototype.cMsgId=l.Long?l.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=u.create()),null!=e.msgId&&Object.hasOwnProperty.call(e,"msgId")&&t.uint32(8).int64(e.msgId),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(16).int32(e.type),null!=e.subType&&Object.hasOwnProperty.call(e,"subType")&&t.uint32(24).int64(e.subType),null!=e.diyType&&Object.hasOwnProperty.call(e,"diyType")&&t.uint32(32).int32(e.diyType),null!=e.from&&Object.hasOwnProperty.call(e,"from")&&t.uint32(40).int64(e.from),null!=e.roomId&&Object.hasOwnProperty.call(e,"roomId")&&t.uint32(48).int64(e.roomId),null!=e.sequence&&Object.hasOwnProperty.call(e,"sequence")&&t.uint32(56).int64(e.sequence),null!=e.cMsgId&&Object.hasOwnProperty.call(e,"cMsgId")&&t.uint32(64).int64(e.cMsgId),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof c||(e=c.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new p.RoomMsgAck;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.msgId=e.int64();break;case 2:n.type=e.int32();break;case 3:n.subType=e.int64();break;case 4:n.diyType=e.int32();break;case 5:n.from=e.int64();break;case 6:n.roomId=e.int64();break;case 7:n.sequence=e.int64();break;case 8:n.cMsgId=e.int64();break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof c||(e=new c(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.msgId&&e.hasOwnProperty("msgId")&&!(l.isInteger(e.msgId)||e.msgId&&l.isInteger(e.msgId.low)&&l.isInteger(e.msgId.high))?"msgId: integer|Long expected":null!=e.type&&e.hasOwnProperty("type")&&!l.isInteger(e.type)?"type: integer expected":null!=e.subType&&e.hasOwnProperty("subType")&&!(l.isInteger(e.subType)||e.subType&&l.isInteger(e.subType.low)&&l.isInteger(e.subType.high))?"subType: integer|Long expected":null!=e.diyType&&e.hasOwnProperty("diyType")&&!l.isInteger(e.diyType)?"diyType: integer expected":null!=e.from&&e.hasOwnProperty("from")&&!(l.isInteger(e.from)||e.from&&l.isInteger(e.from.low)&&l.isInteger(e.from.high))?"from: integer|Long expected":null!=e.roomId&&e.hasOwnProperty("roomId")&&!(l.isInteger(e.roomId)||e.roomId&&l.isInteger(e.roomId.low)&&l.isInteger(e.roomId.high))?"roomId: integer|Long expected":null!=e.sequence&&e.hasOwnProperty("sequence")&&!(l.isInteger(e.sequence)||e.sequence&&l.isInteger(e.sequence.low)&&l.isInteger(e.sequence.high))?"sequence: integer|Long expected":null!=e.cMsgId&&e.hasOwnProperty("cMsgId")&&!(l.isInteger(e.cMsgId)||e.cMsgId&&l.isInteger(e.cMsgId.low)&&l.isInteger(e.cMsgId.high))?"cMsgId: integer|Long expected":null},e.fromObject=function(e){if(e instanceof p.RoomMsgAck)return e;var t=new p.RoomMsgAck;return null!=e.msgId&&(l.Long?(t.msgId=l.Long.fromValue(e.msgId)).unsigned=!1:"string"==typeof e.msgId?t.msgId=parseInt(e.msgId,10):"number"==typeof e.msgId?t.msgId=e.msgId:"object"==typeof e.msgId&&(t.msgId=new l.LongBits(e.msgId.low>>>0,e.msgId.high>>>0).toNumber())),null!=e.type&&(t.type=0|e.type),null!=e.subType&&(l.Long?(t.subType=l.Long.fromValue(e.subType)).unsigned=!1:"string"==typeof e.subType?t.subType=parseInt(e.subType,10):"number"==typeof e.subType?t.subType=e.subType:"object"==typeof e.subType&&(t.subType=new l.LongBits(e.subType.low>>>0,e.subType.high>>>0).toNumber())),null!=e.diyType&&(t.diyType=0|e.diyType),null!=e.from&&(l.Long?(t.from=l.Long.fromValue(e.from)).unsigned=!1:"string"==typeof e.from?t.from=parseInt(e.from,10):"number"==typeof e.from?t.from=e.from:"object"==typeof e.from&&(t.from=new l.LongBits(e.from.low>>>0,e.from.high>>>0).toNumber())),null!=e.roomId&&(l.Long?(t.roomId=l.Long.fromValue(e.roomId)).unsigned=!1:"string"==typeof e.roomId?t.roomId=parseInt(e.roomId,10):"number"==typeof e.roomId?t.roomId=e.roomId:"object"==typeof e.roomId&&(t.roomId=new l.LongBits(e.roomId.low>>>0,e.roomId.high>>>0).toNumber())),null!=e.sequence&&(l.Long?(t.sequence=l.Long.fromValue(e.sequence)).unsigned=!1:"string"==typeof e.sequence?t.sequence=parseInt(e.sequence,10):"number"==typeof e.sequence?t.sequence=e.sequence:"object"==typeof e.sequence&&(t.sequence=new l.LongBits(e.sequence.low>>>0,e.sequence.high>>>0).toNumber())),null!=e.cMsgId&&(l.Long?(t.cMsgId=l.Long.fromValue(e.cMsgId)).unsigned=!1:"string"==typeof e.cMsgId?t.cMsgId=parseInt(e.cMsgId,10):"number"==typeof e.cMsgId?t.cMsgId=e.cMsgId:"object"==typeof e.cMsgId&&(t.cMsgId=new l.LongBits(e.cMsgId.low>>>0,e.cMsgId.high>>>0).toNumber())),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if(l.Long){var n=new l.Long(0,0,!1);r.msgId=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.msgId=t.longs===String?"0":0;if(r.type=0,l.Long){n=new l.Long(0,0,!1);r.subType=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.subType=t.longs===String?"0":0;if(r.diyType=0,l.Long){n=new l.Long(0,0,!1);r.from=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.from=t.longs===String?"0":0;if(l.Long){n=new l.Long(0,0,!1);r.roomId=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.roomId=t.longs===String?"0":0;if(l.Long){n=new l.Long(0,0,!1);r.sequence=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.sequence=t.longs===String?"0":0;if(l.Long){n=new l.Long(0,0,!1);r.cMsgId=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.cMsgId=t.longs===String?"0":0}return null!=e.msgId&&e.hasOwnProperty("msgId")&&("number"==typeof e.msgId?r.msgId=t.longs===String?String(e.msgId):e.msgId:r.msgId=t.longs===String?l.Long.prototype.toString.call(e.msgId):t.longs===Number?new l.LongBits(e.msgId.low>>>0,e.msgId.high>>>0).toNumber():e.msgId),null!=e.type&&e.hasOwnProperty("type")&&(r.type=e.type),null!=e.subType&&e.hasOwnProperty("subType")&&("number"==typeof e.subType?r.subType=t.longs===String?String(e.subType):e.subType:r.subType=t.longs===String?l.Long.prototype.toString.call(e.subType):t.longs===Number?new l.LongBits(e.subType.low>>>0,e.subType.high>>>0).toNumber():e.subType),null!=e.diyType&&e.hasOwnProperty("diyType")&&(r.diyType=e.diyType),null!=e.from&&e.hasOwnProperty("from")&&("number"==typeof e.from?r.from=t.longs===String?String(e.from):e.from:r.from=t.longs===String?l.Long.prototype.toString.call(e.from):t.longs===Number?new l.LongBits(e.from.low>>>0,e.from.high>>>0).toNumber():e.from),null!=e.roomId&&e.hasOwnProperty("roomId")&&("number"==typeof e.roomId?r.roomId=t.longs===String?String(e.roomId):e.roomId:r.roomId=t.longs===String?l.Long.prototype.toString.call(e.roomId):t.longs===Number?new l.LongBits(e.roomId.low>>>0,e.roomId.high>>>0).toNumber():e.roomId),null!=e.sequence&&e.hasOwnProperty("sequence")&&("number"==typeof e.sequence?r.sequence=t.longs===String?String(e.sequence):e.sequence:r.sequence=t.longs===String?l.Long.prototype.toString.call(e.sequence):t.longs===Number?new l.LongBits(e.sequence.low>>>0,e.sequence.high>>>0).toNumber():e.sequence),null!=e.cMsgId&&e.hasOwnProperty("cMsgId")&&("number"==typeof e.cMsgId?r.cMsgId=t.longs===String?String(e.cMsgId):e.cMsgId:r.cMsgId=t.longs===String?l.Long.prototype.toString.call(e.cMsgId):t.longs===Number?new l.LongBits(e.cMsgId.low>>>0,e.cMsgId.high>>>0).toNumber():e.cMsgId),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},e}(),p.AckCodeEnum=(n={},(o=Object.create(n))[n[0]="SUCCESS"]=0,o[n[1]="TOKEN_EXPIRE"]=1,o),p.SwitchFlagEnum=function(){var e={},t=Object.create(e);return t[e[0]="NONE"]=0,t[e[1]="GATEWAY_ENABLE"]=1,t}(),p.AckTypeEnum=function(){var e={},t=Object.create(e);return t[e[0]="CONNECT_ACK"]=0,t[e[1]="LOGIN_ACK"]=1,t[e[2]="LOGOUT_ACK"]=2,t[e[3]="SEND_MSG_ACK"]=3,t[e[4]="INCEPT_MSG_ACK"]=4,t[e[5]="ROOM_CREATE_ACK"]=5,t[e[6]="ROOM_LOGIN_ACK"]=6,t[e[7]="ROOM_LOGOUT_ACK"]=7,t[e[8]="ROOM_KICK_ACK"]=8,t[e[9]="ROOM_GAG_ACK"]=9,t[e[10]="BURNED_ACK"]=10,t}(),p.SubTypeEnum=function(){var e={},t=Object.create(e);return t[e[0]="TEXT"]=0,t[e[1]="IMAGE"]=1,t[e[2]="AUDIO"]=2,t[e[3]="VEDIO"]=3,t[e[10]="GROUP_CREATE"]=10,t[e[11]="GROUP_JOIN"]=11,t[e[12]="GROUP_EXIT"]=12,t[e[13]="GROUP_INFO"]=13,t[e[14]="GROUP_INFO_UPDATE"]=14,t[e[15]="GROUP_ADMIN"]=15,t[e[16]="GROUP_USERS"]=16,t[e[17]="GROUP_USERGROUPS"]=17,t[e[20]="GROUP_DISSOLVE"]=20,t[e[21]="PULL_HISTORY_MSG"]=21,t[e[22]="GROUP_CHAT"]=22,t[e[30]="EVENT_GROUPINFO"]=30,t[e[31]="EVENT_GROUPMEM"]=31,t[e[32]="EVENT_GROUPDISMISS"]=32,t[e[33]="EVENT_CANCLE_MSG"]=33,t[e[34]="EVENT_UPDATE_PUSHTOKEN"]=34,t[e[40]="EVENTTYPE_CHAT"]=40,t[e[41]="EVENTTYPE_GROUPCHAT"]=41,t[e[42]="EVENTTYPE_TOPSESSION"]=42,t[e[35]="EVENT_ROOM_GAG_ADD_MSG"]=35,t[e[36]="EVENT_ROOM_GAG_DEL_MSG"]=36,t[e[37]="EVENT_ROOM_GET_GAG_LIST"]=37,t[e[38]="EVENT_ROOM_GET_GAG_STATUS"]=38,t[e[39]="EVENT_ROOM_BLACK_NOTIFY"]=39,t[e[51]="CHAT_MESSAGELIST_VALUE"]=51,t[e[52]="ROOM_MESSAGELIST_VALUE"]=52,t[e[60]="ROOM_CREATE"]=60,t[e[61]="ROOM_LOGIN"]=61,t[e[62]="ROOM_LOGOUT"]=62,t[e[63]="ROOM_KICK"]=63,t[e[64]="ROOM_GAG"]=64,t[e[65]="ROOM_SYSTEM"]=65,t[e[66]="ROOM_NOTICE"]=66,t[e[67]="ROOM_AT"]=67,t[e[68]="ROOM_BLACK"]=68,t[e[69]="ROOM_CLOSE"]=69,t[e[70]="ROOM_PULL"]=70,t[e[71]="ROOM_SERVER_REMOVE"]=71,t[e[80]="ROOM_DIY"]=80,t[e[90]="PUSH_OFFICIAL"]=90,t[e[91]="PUSH_ACTIVITY"]=91,t[e[100]="PULL_LOG"]=100,t[e[110]="CHAT_UNREADMESSAGE"]=110,t}(),p.LoginTypeEnum=function(){var e={},t=Object.create(e);return t[e[0]="MANUAL"]=0,t[e[1]="AUTO"]=1,t}(),p.DeviceTypeEnum=function(){var e={},t=Object.create(e);return t[e[0]="PC"]=0,t[e[1]="WEB"]=1,t[e[2]="ANDROID"]=2,t[e[3]="IOS"]=3,t[e[4]="IPAD"]=4,t[e[5]="WINPHONE"]=5,t}(),p.ChannelTypeEnum=function(){var e={},t=Object.create(e);return t[e[0]="LIVE"]=0,t[e[1]="API_GATEWAY"]=1,t}(),p.RequestEnum=function(){var e={},t=Object.create(e);return t[e[0]="POST"]=0,t[e[1]="GET"]=1,t}(),p.TypeEnum=function(){var e={},t=Object.create(e);return t[e[0]="LOGIN"]=0,t[e[1]="LOGOUT"]=1,t[e[2]="ACK"]=2,t[e[10]="CHAT"]=10,t[e[11]="GROUPCHAT"]=11,t[e[12]="PUSH"]=12,t[e[13]="GROUPMANAGE"]=13,t[e[14]="GROUPMANAGELIST"]=14,t[e[20]="ROOM"]=20,t[e[21]="ROOM_BATCH"]=21,t[e[30]="EVENT"]=30,t[e[31]="OFFICIAL"]=31,t[e[40]="SYSTEM"]=40,t[e[50]="LIST"]=50,t[e[60]="GATEWAY"]=60,t[e[-1]="CLOSE"]=-1,t[e[-2]="LIMIT_QPS_CLOSE"]=-2,t[e[-3]="APP_CLOSE"]=-3,t[e[-4]="APP_STATICS"]=-4,t[e[-99]="KEEPALIVE"]=-99,t[e[-100]="PULL"]=-100,t}(),p.google=((s={}).protobuf=((i={}).Any=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.type_url="",e.prototype.value=l.newBuffer([]),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=u.create()),null!=e.type_url&&Object.hasOwnProperty.call(e,"type_url")&&t.uint32(10).string(e.type_url),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).bytes(e.value),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof c||(e=c.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new p.google.protobuf.Any;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.type_url=e.string();break;case 2:n.value=e.bytes();break;default:e.skipType(7&o)}}return n},e.decodeDelimited=function(e){return e instanceof c||(e=new c(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.type_url&&e.hasOwnProperty("type_url")&&!l.isString(e.type_url)?"type_url: string expected":null!=e.value&&e.hasOwnProperty("value")&&!(e.value&&"number"==typeof e.value.length||l.isString(e.value))?"value: buffer expected":null},e.fromObject=function(e){if(e instanceof p.google.protobuf.Any)return e;var t=new p.google.protobuf.Any;return null!=e.type_url&&(t.type_url=String(e.type_url)),null!=e.value&&("string"==typeof e.value?l.base64.decode(e.value,t.value=l.newBuffer(l.base64.length(e.value)),0):e.value.length&&(t.value=e.value)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.type_url="",t.bytes===String?r.value="":(r.value=[],t.bytes!==Array&&(r.value=l.newBuffer(r.value)))),null!=e.type_url&&e.hasOwnProperty("type_url")&&(r.type_url=e.type_url),null!=e.value&&e.hasOwnProperty("value")&&(r.value=t.bytes===String?l.base64.encode(e.value,0,e.value.length):t.bytes===Array?Array.prototype.slice.call(e.value):e.value),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,a.util.toJSONOptions)},e}(),i),s),e.exports=p},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){this.$data=e,this.sequence=e.sequence,this.msgId=e.msgId};t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateLoggerInstance=t.logger=void 0;var n=r(119);t.logger={},t.generateLoggerInstance=function(e){var r=new n.Log(e);Object.defineProperty(t.logger,"collect",{value:r,writable:!1,enumerable:!1,configurable:!0})}},function(e,t,r){e.exports=function e(t,r,n){function o(s,a){if(!r[s]){if(!t[s]){if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=r[s]={exports:{}};t[s][0].call(u.exports,(function(e){return o(t[s][1][e]||e)}),u,u.exports,e,t,r,n)}return r[s].exports}for(var i=!1,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(e,t,r){"use strict";var n=Object.prototype.hasOwnProperty,o="~";function i(){}function s(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function a(e,t,r,n,i){if("function"!=typeof r)throw new TypeError("The listener must be a function");var a=new s(r,n||e,i),c=o?o+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function c(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function u(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(o=!1)),u.prototype.eventNames=function(){var e,t,r=[];if(0===this._eventsCount)return r;for(t in e=this._events)n.call(e,t)&&r.push(o?t.slice(1):t);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},u.prototype.listeners=function(e){var t=o?o+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,i=r.length,s=new Array(i);n<i;n++)s[n]=r[n].fn;return s},u.prototype.listenerCount=function(e){var t=o?o+e:e,r=this._events[t];return r?r.fn?1:r.length:0},u.prototype.emit=function(e,t,r,n,i,s){var a=o?o+e:e;if(!this._events[a])return!1;var c,u,l=this._events[a],p=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),p){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,r),!0;case 4:return l.fn.call(l.context,t,r,n),!0;case 5:return l.fn.call(l.context,t,r,n,i),!0;case 6:return l.fn.call(l.context,t,r,n,i,s),!0}for(u=1,c=new Array(p-1);u<p;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var f,d=l.length;for(u=0;u<d;u++)switch(l[u].once&&this.removeListener(e,l[u].fn,void 0,!0),p){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,t);break;case 3:l[u].fn.call(l[u].context,t,r);break;case 4:l[u].fn.call(l[u].context,t,r,n);break;default:if(!c)for(f=1,c=new Array(p-1);f<p;f++)c[f-1]=arguments[f];l[u].fn.apply(l[u].context,c)}}return!0},u.prototype.on=function(e,t,r){return a(this,e,t,r,!1)},u.prototype.once=function(e,t,r){return a(this,e,t,r,!0)},u.prototype.removeListener=function(e,t,r,n){var i=o?o+e:e;if(!this._events[i])return this;if(!t)return c(this,i),this;var s=this._events[i];if(s.fn)s.fn!==t||n&&!s.once||r&&s.context!==r||c(this,i);else{for(var a=0,u=[],l=s.length;a<l;a++)(s[a].fn!==t||n&&!s[a].once||r&&s[a].context!==r)&&u.push(s[a]);u.length?this._events[i]=1===u.length?u[0]:u:c(this,i)}return this},u.prototype.removeAllListeners=function(e){var t;return e?(t=o?o+e:e,this._events[t]&&c(this,t)):(this._events=new i,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=o,u.EventEmitter=u,void 0!==t&&(t.exports=u)},{}]},{},[1])(1)},function(e,t,r){"use strict";var n,o="object"==typeof Reflect?Reflect:null,i=o&&"function"==typeof o.apply?o.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};n=o&&"function"==typeof o.ownKeys?o.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,e.exports.once=function(e,t){return new Promise((function(r,n){function o(r){e.removeListener(t,i),n(r)}function i(){"function"==typeof e.removeListener&&e.removeListener("error",o),r([].slice.call(arguments))}m(e,t,i,{once:!0}),"error"!==t&&function(e,t,r){"function"==typeof e.on&&m(e,"error",t,r)}(e,o,{once:!0})}))},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var c=10;function u(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function p(e,t,r,n){var o,i,s;if(u(r),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),i=e._events),s=i[t]),void 0===s)s=i[t]=r,++e._eventsCount;else if("function"==typeof s?s=i[t]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),(o=l(e))>0&&s.length>o&&!s.warned){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=e,a.type=t,a.count=s.length,console&&console.warn}return e}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},o=f.bind(n);return o.listener=r,n.wrapFn=o,o}function h(e,t,r){var n=e._events;if(void 0===n)return[];var o=n[t];return void 0===o?[]:"function"==typeof o?r?[o.listener||o]:[o]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(o):y(o,o.length)}function g(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function y(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function m(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function o(i){n.once&&e.removeEventListener(t,o),r(i)}))}}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");c=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return l(this)},a.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,o=this._events;if(void 0!==o)n=n&&void 0===o.error;else if(!n)return!1;if(n){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var c=o[e];if(void 0===c)return!1;if("function"==typeof c)i(c,this,t);else{var u=c.length,l=y(c,u);for(r=0;r<u;++r)i(l[r],this,t)}return!0},a.prototype.addListener=function(e,t){return p(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return p(this,e,t,!0)},a.prototype.once=function(e,t){return u(t),this.on(e,d(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return u(t),this.prependListener(e,d(this,e,t)),this},a.prototype.removeListener=function(e,t){var r,n,o,i,s;if(u(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(o=-1,i=r.length-1;i>=0;i--)if(r[i]===t||r[i].listener===t){s=r[i].listener,o=i;break}if(o<0)return this;0===o?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,o),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,s||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var o,i=Object.keys(r);for(n=0;n<i.length;++n)"removeListener"!==(o=i[n])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},a.prototype.listeners=function(e){return h(this,e,!0)},a.prototype.rawListeners=function(e){return h(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):g.call(e,t)},a.prototype.listenerCount=g,a.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},function(e,t,r){var n=r(70)("socket.io-parser"),o=r(2),i=r(72),s=r(31),a=r(32);function c(){}t.protocol=4,t.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],t.CONNECT=0,t.DISCONNECT=1,t.EVENT=2,t.ACK=3,t.ERROR=4,t.BINARY_EVENT=5,t.BINARY_ACK=6,t.Encoder=c,t.Decoder=p;var u=t.ERROR+'"encode error"';function l(e){var r=""+e.type;if(t.BINARY_EVENT!==e.type&&t.BINARY_ACK!==e.type||(r+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(r+=e.nsp+","),null!=e.id&&(r+=e.id),null!=e.data){var o=function(e){try{return JSON.stringify(e)}catch(e){return!1}}(e.data);if(!1===o)return u;r+=o}return n("encoded %j as %s",e,r),r}function p(){this.reconstructor=null}function f(e){this.reconPack=e,this.buffers=[]}function d(e){return{type:t.ERROR,data:"parser error: "+e}}c.prototype.encode=function(e,r){(n("encoding packet %j",e),t.BINARY_EVENT===e.type||t.BINARY_ACK===e.type)?function(e,t){i.removeBlobs(e,(function(e){var r=i.deconstructPacket(e),n=l(r.packet),o=r.buffers;o.unshift(n),t(o)}))}(e,r):r([l(e)])},o(p.prototype),p.prototype.add=function(e){var r;if("string"==typeof e)r=function(e){var r=0,o={type:Number(e.charAt(0))};if(null==t.types[o.type])return d("unknown packet type "+o.type);if(t.BINARY_EVENT===o.type||t.BINARY_ACK===o.type){for(var i=r+1;"-"!==e.charAt(++r)&&r!=e.length;);var a=e.substring(i,r);if(a!=Number(a)||"-"!==e.charAt(r))throw new Error("Illegal attachments");o.attachments=Number(a)}if("/"===e.charAt(r+1)){for(i=r+1;++r;){if(","===(u=e.charAt(r)))break;if(r===e.length)break}o.nsp=e.substring(i,r)}else o.nsp="/";var c=e.charAt(r+1);if(""!==c&&Number(c)==c){for(i=r+1;++r;){var u;if(null==(u=e.charAt(r))||Number(u)!=u){--r;break}if(r===e.length)break}o.id=Number(e.substring(i,r+1))}if(e.charAt(++r)){var l=function(e){try{return JSON.parse(e)}catch(e){return!1}}(e.substr(r));if(!(!1!==l&&(o.type===t.ERROR||s(l))))return d("invalid payload");o.data=l}return n("decoded %s as %j",e,o),o}(e),t.BINARY_EVENT===r.type||t.BINARY_ACK===r.type?(this.reconstructor=new f(r),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",r)):this.emit("decoded",r);else{if(!a(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(r=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,this.emit("decoded",r))}},p.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},f.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=i.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},f.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(e,t,r){"use strict";(function(e){var n=r(73),o=r(74),i=r(75);function s(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,r){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return p(this,e)}return u(this,e,t,r)}function u(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n);c.TYPED_ARRAY_SUPPORT?(e=t).__proto__=c.prototype:e=f(e,t);return e}(e,t,r,n):"string"==typeof t?function(e,t,r){"string"==typeof r&&""!==r||(r="utf8");if(!c.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|h(t,r),o=(e=a(e,n)).write(t,r);o!==n&&(e=e.slice(0,o));return e}(e,t,r):function(e,t){if(c.isBuffer(t)){var r=0|d(t.length);return 0===(e=a(e,r)).length||t.copy(e,0,0,r),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(n=t.length)!=n?a(e,0):f(e,t);if("Buffer"===t.type&&i(t.data))return f(e,t.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function p(e,t){if(l(t),e=a(e,t<0?0:0|d(t)),!c.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function f(e,t){var r=t.length<0?0:0|d(t.length);e=a(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function d(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function h(e,t){if(c.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return U(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return q(e).length;default:if(n)return U(e).length;t=(""+t).toLowerCase(),n=!0}}function g(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return P(this,t,r);case"utf8":case"utf-8":return T(this,t,r);case"ascii":return x(this,t,r);case"latin1":case"binary":return C(this,t,r);case"base64":return k(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function y(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function m(e,t,r,n,o){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof t&&(t=c.from(t,n)),c.isBuffer(t))return 0===t.length?-1:v(e,t,r,n,o);if("number"==typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):v(e,[t],r,n,o);throw new TypeError("val must be string, number or Buffer")}function v(e,t,r,n,o){var i,s=1,a=e.length,c=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,a/=2,c/=2,r/=2}function u(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(o){var l=-1;for(i=r;i<a;i++)if(u(e,i)===u(t,-1===l?0:i-l)){if(-1===l&&(l=i),i-l+1===c)return l*s}else-1!==l&&(i-=i-l),l=-1}else for(r+c>a&&(r=a-c),i=r;i>=0;i--){for(var p=!0,f=0;f<c;f++)if(u(e,i+f)!==u(t,f)){p=!1;break}if(p)return i}return-1}function _(e,t,r,n){r=Number(r)||0;var o=e.length-r;n?(n=Number(n))>o&&(n=o):n=o;var i=t.length;if(i%2!=0)throw new TypeError("Invalid hex string");n>i/2&&(n=i/2);for(var s=0;s<n;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[r+s]=a}return s}function b(e,t,r,n){return z(U(t,e.length-r),e,r,n)}function w(e,t,r,n){return z(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function I(e,t,r,n){return w(e,t,r,n)}function S(e,t,r,n){return z(q(t),e,r,n)}function O(e,t,r,n){return z(function(e,t){for(var r,n,o,i=[],s=0;s<e.length&&!((t-=2)<0);++s)r=e.charCodeAt(s),n=r>>8,o=r%256,i.push(o),i.push(n);return i}(t,e.length-r),e,r,n)}function k(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function T(e,t,r){r=Math.min(e.length,r);for(var n=[],o=t;o<r;){var i,s,a,c,u=e[o],l=null,p=u>239?4:u>223?3:u>191?2:1;if(o+p<=r)switch(p){case 1:u<128&&(l=u);break;case 2:128==(192&(i=e[o+1]))&&(c=(31&u)<<6|63&i)>127&&(l=c);break;case 3:i=e[o+1],s=e[o+2],128==(192&i)&&128==(192&s)&&(c=(15&u)<<12|(63&i)<<6|63&s)>2047&&(c<55296||c>57343)&&(l=c);break;case 4:i=e[o+1],s=e[o+2],a=e[o+3],128==(192&i)&&128==(192&s)&&128==(192&a)&&(c=(15&u)<<18|(63&i)<<12|(63&s)<<6|63&a)>65535&&c<1114112&&(l=c)}null===l?(l=65533,p=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),o+=p}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=4096));return r}(n)}t.Buffer=c,t.SlowBuffer=function(e){+e!=e&&(e=0);return c.alloc(+e)},t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=s(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,r){return u(null,e,t,r)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,r){return function(e,t,r,n){return l(t),t<=0?a(e,t):void 0!==r?"string"==typeof n?a(e,t).fill(r,n):a(e,t).fill(r):a(e,t)}(null,e,t,r)},c.allocUnsafe=function(e){return p(null,e)},c.allocUnsafeSlow=function(e){return p(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,o=0,i=Math.min(r,n);o<i;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!i(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=c.allocUnsafe(t),o=0;for(r=0;r<e.length;++r){var s=e[r];if(!c.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,o),o+=s.length}return n},c.byteLength=h,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)y(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?T(this,0,e):g.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,r,n,o){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),t<0||r>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&t>=r)return 0;if(n>=o)return-1;if(t>=r)return 1;if(this===e)return 0;for(var i=(o>>>=0)-(n>>>=0),s=(r>>>=0)-(t>>>=0),a=Math.min(i,s),u=this.slice(n,o),l=e.slice(t,r),p=0;p<a;++p)if(u[p]!==l[p]){i=u[p],s=l[p];break}return i<s?-1:s<i?1:0},c.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},c.prototype.indexOf=function(e,t,r){return m(this,e,t,r,!0)},c.prototype.lastIndexOf=function(e,t,r){return m(this,e,t,r,!1)},c.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-t;if((void 0===r||r>o)&&(r=o),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return _(this,e,t,r);case"utf8":case"utf-8":return b(this,e,t,r);case"ascii":return w(this,e,t,r);case"latin1":case"binary":return I(this,e,t,r);case"base64":return S(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,e,t,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function x(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(127&e[o]);return n}function C(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(e[o]);return n}function P(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var o="",i=t;i<r;++i)o+=D(e[i]);return o}function A(e,t,r){for(var n=e.slice(t,r),o="",i=0;i<n.length;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function M(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function E(e,t,r,n,o,i){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function R(e,t,r,n){t<0&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-r,2);o<i;++o)e[r+o]=(t&255<<8*(n?o:1-o))>>>8*(n?o:1-o)}function L(e,t,r,n){t<0&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-r,4);o<i;++o)e[r+o]=t>>>8*(n?o:3-o)&255}function j(e,t,r,n,o,i){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function B(e,t,r,n,i){return i||j(e,0,r,4),o.write(e,t,r,n,23,4),r+4}function N(e,t,r,n,i){return i||j(e,0,r,8),o.write(e,t,r,n,52,8),r+8}c.prototype.slice=function(e,t){var r,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=c.prototype;else{var o=t-e;r=new c(o,void 0);for(var i=0;i<o;++i)r[i]=this[i+e]}return r},c.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||M(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n},c.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||M(e,t,this.length);for(var n=this[e+--t],o=1;t>0&&(o*=256);)n+=this[e+--t]*o;return n},c.prototype.readUInt8=function(e,t){return t||M(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||M(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||M(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||M(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||M(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||M(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n>=(o*=128)&&(n-=Math.pow(2,8*t)),n},c.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||M(e,t,this.length);for(var n=t,o=1,i=this[e+--n];n>0&&(o*=256);)i+=this[e+--n]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*t)),i},c.prototype.readInt8=function(e,t){return t||M(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||M(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt16BE=function(e,t){t||M(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt32LE=function(e,t){return t||M(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||M(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||M(e,4,this.length),o.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||M(e,4,this.length),o.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||M(e,8,this.length),o.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||M(e,8,this.length),o.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||E(this,e,t,r,Math.pow(2,8*r)-1,0);var o=1,i=0;for(this[t]=255&e;++i<r&&(o*=256);)this[t+i]=e/o&255;return t+r},c.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||E(this,e,t,r,Math.pow(2,8*r)-1,0);var o=r-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+r},c.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||E(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||E(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):R(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||E(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):R(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||E(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):L(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||E(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):L(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var o=Math.pow(2,8*r-1);E(this,e,t,r,o-1,-o)}var i=0,s=1,a=0;for(this[t]=255&e;++i<r&&(s*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+r},c.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var o=Math.pow(2,8*r-1);E(this,e,t,r,o-1,-o)}var i=r-1,s=1,a=0;for(this[t+i]=255&e;--i>=0&&(s*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+r},c.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||E(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||E(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):R(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||E(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):R(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||E(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):L(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||E(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):L(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,r){return B(this,e,t,!0,r)},c.prototype.writeFloatBE=function(e,t,r){return B(this,e,t,!1,r)},c.prototype.writeDoubleLE=function(e,t,r){return N(this,e,t,!0,r)},c.prototype.writeDoubleBE=function(e,t,r){return N(this,e,t,!1,r)},c.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var o,i=n-r;if(this===e&&r<t&&t<n)for(o=i-1;o>=0;--o)e[o+t]=this[o+r];else if(i<1e3||!c.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)e[o+t]=this[o+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+i),t);return i},c.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!c.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{var s=c.isBuffer(e)?e:U(new c(e,n).toString()),a=s.length;for(i=0;i<r-t;++i)this[i+t]=s[i%a]}return this};var F=/[^+\/0-9A-Za-z-_]/g;function D(e){return e<16?"0"+e.toString(16):e.toString(16)}function U(e,t){var r;t=t||1/0;for(var n=e.length,o=null,i=[],s=0;s<n;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function q(e){return n.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(F,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function z(e,t,r,n){for(var o=0;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}}).call(this,r(29))},function(e,t,r){(function(n){function o(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==n&&"env"in n&&(e=n.env.DEBUG),e}(t=e.exports=r(78)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var r=this.useColors;if(e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+t.humanize(this.diff),!r)return;var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var o=0,i=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(o++,"%c"===e&&(i=o))})),e.splice(i,0,n)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=o,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(o())}).call(this,r(17))},function(e,t){t.encode=function(e){var t="";for(var r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t},t.decode=function(e){for(var t={},r=e.split("&"),n=0,o=r.length;n<o;n++){var i=r[n].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}},function(e,t){e.exports=function(e,t){var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},function(e,t,r){(function(n){function o(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==n&&"env"in n&&(e=n.env.DEBUG),e}(t=e.exports=r(90)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var r=this.useColors;if(e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+t.humanize(this.diff),!r)return;var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var o=0,i=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(o++,"%c"===e&&(i=o))})),e.splice(i,0,n)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=o,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(o())}).call(this,r(17))},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.uploadLog=t.getAuthEdgeList=t.getEdgeList=t.getUserSource=t.uploadSensorsStats=t.numberVersion=void 0;var s=r(46),a=r(120),c=r(25),u=null,l="",p="";function f(e){return o(this,void 0,void 0,(function(){var t,r;return i(this,(function(n){switch(n.label){case 0:if(e.method||(e.method="GET"),e.data){if("object"!=typeof e.data)throw new Error("data must be an object.");t=e.data.headers?{body:JSON.stringify(e.data),method:e.method,headers:e.data.headers}:{body:JSON.stringify(e.data),method:e.method}}else t={method:e.method};n.label=1;case 1:return n.trys.push([1,4,,5]),[4,fetch(e.url,t)];case 2:return[4,n.sent().json()];case 3:return[2,n.sent()];case 4:throw r=n.sent(),new Error(r);case 5:return[2]}}))}))}function d(){var e=[];return c.version.split(".").forEach((function(t){t.length<=1&&(t+="0"),e.push(t)})),parseInt(e.join("")+"0")}function h(){for(var e=[],t=0;t<36;t++)e[t]="0123456789abcdef".substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]="0123456789abcdef".substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-",e.join("")}function g(){return o(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,f({url:"https://geoip.linkv.fun/ip_geo",method:"GET"})];case 1:return[2,e.sent()]}}))}))}t.numberVersion=d,t.uploadSensorsStats=function(e){return o(this,void 0,void 0,(function(){var t;return i(this,(function(r){switch(r.label){case 0:return t=function(){var e=d(),t=0;if(navigator.connection||navigator.mozConnection||navigator.webkitConnection){var r=(navigator.connection||navigator.mozConnection||navigator.webkitConnection).type;t="wifi"==r?1:"2g"==r?2:"3g"==r?3:"4g"==r?4:"5g"==r?5:0}var n=s.parse(window.navigator.userAgent),o=n.browser,i=n.engine,a=n.os,u=n.platform;return{os_type:u.type,brand:u.vendor,model:""+o.name+o.version,system_version:a.version,system_name:a.name,system_versionName:a.versionName,app_version:o.version,app_engine:i.name,sdk_version:c.version,sdk_version_int:e,net_type:t}}(),[4,f({url:a.constantConfig.STATSURL+"/data_collect",method:"POST",data:n(n(n({},t),e),{event_time:Math.round((new Date).getTime()/1e3),time:(new Date).getTime()})})];case 1:if(200!==r.sent().status)throw new Error("sensors stats error.");return[2]}}))}))},t.getUserSource=function(){return s.parse(window.navigator.userAgent).platform.type},t.getEdgeList=function(e){return o(this,void 0,void 0,(function(){var t,r;return i(this,(function(n){switch(n.label){case 0:return t=a.envConfig[e.projectName][e.env],null!=u?[3,2]:[4,g()];case 1:u=n.sent(),n.label=2;case 2:return[4,f({url:t.CENTERURL+"/api/v1/join",method:"POST",data:{app_id:e.appId,user_id:e.userId,client_ip:u&&u.client_ip,proto:"https",role:"",room_id:e.roomId,user_source:"pc_center"},headers:{"Content-Type":"application/json"}})];case 3:if(200!==(r=n.sent()).code)throw new Error("get EdgeList failed.");return[2,r.data.edge_urls]}}))}))},t.getAuthEdgeList=function(e){var t=e.appId,r=e.auth,s=e.expire,c=e.projectName,l=e.env;return o(this,void 0,void 0,(function(){var e,o;return i(this,(function(i){switch(i.label){case 0:return e=a.envConfig[c][l],null!=u?[3,2]:[4,g()];case 1:u=i.sent(),i.label=2;case 2:return[4,f({url:e.CENTERURL+"/api/v1/auth",method:"POST",data:n({app_id:t,auth:r,timestamp:""+Math.round((new Date).getTime()/1e3),expire_ts:s,user_source:"pc_center",nonce:h()},u)})];case 3:if(200!==(o=i.sent()).code)throw new Error("get EdgeList failed.");return[2,o.data.edge_urls]}}))}))},t.uploadLog=function(e){var t=e.appId,r=e.userId,n=e.message;return o(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return null!=u?[3,2]:[4,g()];case 1:u=e.sent(),e.label=2;case 2:if(t)l=t;else if(!l)throw new Error("appId can not be empty.");if(r)p=r;else if(!p)throw new Error("userId can not be empty.");return[4,f({url:a.constantConfig.LOGREPORT+"/v1/log/report",method:"POST",data:{appid:l,userid:p,country:u&&u.country_code,message:n,timestamp:Math.round((new Date).getTime()/1e3)}})];case 3:return[2,e.sent()]}}))}))}},function(e,t,r){"use strict";e.exports=r(54)},function(e,t){var r,n,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(r===setTimeout)return setTimeout(e,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(e){r=i}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(e){n=s}}();var c,u=[],l=!1,p=-1;function f(){l&&c&&(l=!1,c.length?u=c.concat(u):p=-1,u.length&&d())}function d(){if(!l){var e=a(f);l=!0;for(var t=u.length;t;){for(c=u,u=[];++p<t;)c&&c[p].run();p=-1,t=u.length}c=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function g(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new h(e,t)),1!==u.length||l||a(d)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t){var r=1e3,n=6e4,o=60*n,i=24*o;function s(e,t,r){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}e.exports=function(e,t){t=t||{};var a,c=typeof e;if("string"===c&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var s=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"days":case"day":case"d":return s*i;case"hours":case"hour":case"hrs":case"hr":case"h":return s*o;case"minutes":case"minute":case"mins":case"min":case"m":return s*n;case"seconds":case"second":case"secs":case"sec":case"s":return s*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}(e);if("number"===c&&!1===isNaN(e))return t.long?s(a=e,i,"day")||s(a,o,"hour")||s(a,n,"minute")||s(a,r,"second")||a+" ms":function(e){if(e>=i)return Math.round(e/i)+"d";if(e>=o)return Math.round(e/o)+"h";if(e>=n)return Math.round(e/n)+"m";if(e>=r)return Math.round(e/r)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,r){var n=r(81),o=r(20);e.exports=function(e){var t=e.xdomain,r=e.xscheme,i=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||n))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!r&&i)return new XDomainRequest}catch(e){}if(!t)try{return new(o[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}},function(e,t){e.exports="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")()},function(e,t,r){var n=r(3),o=r(2);function i(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.withCredentials=e.withCredentials,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.forceNode=e.forceNode,this.isReactNative=e.isReactNative,this.extraHeaders=e.extraHeaders,this.localAddress=e.localAddress}e.exports=i,o(i.prototype),i.prototype.onError=function(e,t){var r=new Error(e);return r.type="TransportError",r.description=t,this.emit("error",r),this},i.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},i.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},i.prototype.send=function(e){if("open"!==this.readyState)throw new Error("Transport not open");this.write(e)},i.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},i.prototype.onData=function(e){var t=n.decodePacket(e,this.socket.binaryType);this.onPacket(t)},i.prototype.onPacket=function(e){this.emit("packet",e)},i.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){var r=e.call(this)||this;return r.connection=t,r._name="",r._parent=null,r._nextSibling=null,r._prevSibling=null,r._firstChild=null,r._lastChild=null,r}return o(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},set:function(e){this._name=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextSibling",{get:function(){return this._nextSibling},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"prevSibling",{get:function(){return this._prevSibling},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"firstChild",{get:function(){return this._firstChild},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this._lastChild},enumerable:!1,configurable:!0}),t.prototype.insertChild=function(e,t){if(void 0===t&&(t=null),null!==t&&t.parent!==this)throw new Error("The before to be referenced is not a child of this router.");null!==e.parent&&e.parent.removeChild(this),e._parent=this;var r=null===t?this._lastChild:t._prevSibling,n=null===t?null:t;null!==r&&(e._prevSibling=r,r._nextSibling=e),null!==n&&(e._nextSibling=n,n._prevSibling=e),this._firstChild===n&&(this._firstChild=e),this._lastChild===r&&(this._lastChild=e)},t.prototype.removeChild=function(e){if(e.parent!==this)throw new Error("The child to be removed is not a child of this router.");e._parent=null;var t=e._prevSibling,r=e._nextSibling;null!==t&&(e._prevSibling=null,t._nextSibling=r),null!==r&&(e._nextSibling=null,r._prevSibling=t),this._firstChild===e&&(this._firstChild=r),this._lastChild===e&&(this._lastChild=t)},t.prototype.getChildByName=function(e){for(var t=this.firstChild;null!==t;t=t.nextSibling)if(t.name===e)return t;return null},t}(r(8).EventEmitter);t.default=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.answerDataAsync=function(e,t,r,n){return i(this,void 0,void 0,(function(){return s(this,(function(e){return[2,!1]}))}))},t.prototype.commitDataAsync=function(e,t,r,n){return i(this,void 0,void 0,(function(){return s(this,(function(o){if(null!==this.parent)return[2,this.parent.commitDataAsync(e,t,r,n)];throw new Error("current router is not in used.")}))}))},t}(r(22).default);t.default=a},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},s=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var c=r(23),u=r(4),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.commitMsgAsync=function(e,t,r,n,o){return void 0===n&&(n=!0),s(this,void 0,void 0,(function(){var s,c,l;return a(this,(function(a){switch(a.label){case 0:return s=this.connection.asyncManager.getNextId(n),c=new u.IMMessage(i({type:t,subType:r,cMsgId:s},o)),l=u.IMMessage.encode(c).finish(),[4,this.commitDataAsync(e,t,r,l)];case 1:return[2,a.sent()]}}))}))},t.prototype.waitUtil=function(e){return s(this,void 0,void 0,(function(){var t=this;return a(this,(function(r){return[2,new Promise((function(r){t.once(e,r)}))]}))}))},t}(c.default);t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ENV=t.projectName=t.version=void 0,t.version="2.0.2",t.projectName="liveme",t.ENV="production"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errCode=t.lackErrCode=void 0,t.lackErrCode=function(e){return{code:7e5,msg:"LACK OF "+e.toUpperCase()}},t.errCode=new Map([["wsDisconnect",{code:5e5,msg:"WS_DISCONNECT"}],["kickOut",{code:500001,msg:"WS_KICK_OUT"}],["constrainChangeSuccess",{code:6e5,msg:"CONSTRAIN_CHANGE_SUCCESS"}],["overConstrainedError",{code:600001,msg:"OVERCONSTRAINEDERROR"}],["devicesSupportError",{code:600002,msg:"DEVICES_NOT_SUPPORTED"}],["constrainChangeFailed",{code:600003,msg:"STREAM_NOT_EXIST"}],["nullEdgeList",{code:4e5,msg:"EDGE_LIST_NULL"}]])},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.pcStats=t.standard=t.type=void 0,function(e){e[e.LocalAudio=0]="LocalAudio",e[e.LocalVideo=1]="LocalVideo",e[e.RemoteAudio=2]="RemoteAudio",e[e.RemoteVideo=3]="RemoteVideo",e[e.Crystalball=4]="Crystalball",e[e.Sensor=5]="Sensor"}(t.type||(t.type={})),function(e){e[e.freezeFrameRate=8]="freezeFrameRate",e[e.audioFreezeRate=.04]="audioFreezeRate"}(n=t.standard||(t.standard={}));var o=function(){function e(e){this._direction="send",this._interval=1e3,this._mapCodecId=new Map,this._targetFramerate=0,this._audioCodecId="",this._videoCodecId="",this._sendCountFreezeTimes=0,this._recvCountFreezeTimes=0,this._startTime=0,this._endTime=0,this._totalAudioFreezeTimes=0,this._totalAudioRecvTimes=0,this._currentRoundTripTime=0,this._totalRenderFrame=0,this._totalDecodeFrame=0,this._audioJitterDelay=0,this._videoJitterDelay=0,this._totalRecvFrameRate=0,this._totalfreezeFrame=0,this._audioSendCodecType="aac",this._audioSendBitrate=0,this._audioSendBytes=0,this._audioSendPackets=0,this._andioSendPacketsLost=0,this._sendVolumeLevel=0,this._captureFrameRate=0,this._captureResolutionHeight=0,this._captureResolutionWidth=0,this._videoSendCodecType="H264",this._encodeDelay=0,this._videoSendBitrate=0,this._videoSendBytes=0,this._videoSendPackets=0,this._videoSendPacketsLost=0,this._sendResolutionHeight=0,this._sendResolutionWidth=0,this._targetSendBitrate=0,this._sendTotalDuration=0,this._sendTotalFreezeTime=0,this._audioRecvCodecType="aac",this._audioEnd2EndDelay=0,this._audioFreezeRate=0,this._audioPacketLossRate=0,this._audioPublishDuration=0,this._audioReceiveBitrate=0,this._audioReceiveBytes=0,this._audioReceiveDelay=0,this._receiveLevel=0,this._audioReceivePackets=0,this._audioReceivePacketsLost=0,this._recvAudioTotalDuration=0,this._recvAudioTotalFreezeTime=0,this._audioTransportDelay=0,this._videoRecvCodecType="H264",this._decodeFrameRate=0,this._videoEnd2EndDelay=0,this._videoFreezeRate=0,this._videoPacketLossRate=0,this._videoPublishDuration=0,this._videoReceiveBitrate=0,this._videoReceiveBytes=0,this._videoReceiveDelay=0,this._receiveFrameRate=0,this._videoReceivePackets=0,this._videoReceivePacketsLost=0,this._receiveResolutionHeight=0,this._receiveResolutionWidth=0,this._recvVideoTotalDuration=0,this._recvVideoTotalFreezeTime=0,this._videoTransportDelay=0,this._sendFramesEncoded=0,this._sendFramesSent=0,this._sendNackCount=0,this._sendPliCount=0,this._totalDecodeTime=0,this._firCount=0,this._recvNackCount=0,this._recvPliCount=0,this._sendBandwidth=0,this._direction=e.direction,void 0!==e&&(void 0!==e.framerate&&(this._targetFramerate=e.framerate),void 0!==e.bitrate&&(this._targetSendBitrate=e.bitrate))}return e.prototype.getLocalAudioStats=function(){return this._calculateTotalIndex(),{codecType:this._audioSendCodecType,sendBitrate:this._audioSendBitrate,sendBytes:this._audioSendBytes,sendPackets:this._audioSendPackets,sendPacketsLost:this._andioSendPacketsLost,sendVolumeLevel:this._sendVolumeLevel}},e.prototype.getLocalVideoStats=function(){return this._calculateTotalIndex(),{captureFrameRate:this._captureFrameRate,captureResolutionHeight:this._captureResolutionHeight,captureResolutionWidth:this._captureResolutionWidth,codecType:this._videoSendCodecType,encodeDelay:this._encodeDelay,sendBitrate:this._videoSendBitrate,sendBytes:this._videoSendBytes,sendFrameRate:this._sendFrameRate,sendPackets:this._videoSendPackets,sendPacketsLost:this._videoSendPacketsLost,sendResolutionHeight:this._sendResolutionHeight,sendResolutionWidth:this._sendResolutionWidth,targetSendBitrate:this._targetSendBitrate,totalDuration:this._sendTotalDuration,totalFreezeTime:this._sendTotalFreezeTime}},e.prototype.getRemoteAudioStats=function(){return this._calculateTotalIndex(),{codecType:this._audioRecvCodecType,freezeRate:this._audioFreezeRate,packetLossRate:this._audioPacketLossRate,publishDuration:this._audioPublishDuration,receiveBitrate:this._audioReceiveBitrate,receiveBytes:this._audioReceiveBytes,receiveDelay:this._audioReceiveDelay,receiveLevel:this._receiveLevel,receivePackets:this._audioReceivePackets,receivePacketsLost:this._audioReceivePacketsLost,totalDuration:this._recvAudioTotalDuration,totalFreezeTime:this._recvAudioTotalFreezeTime,transportDelay:this._audioTransportDelay}},e.prototype.getRemoteVideoStats=function(){return this._calculateTotalIndex(),{codecType:this._videoRecvCodecType,decodeFrameRate:this._decodeFrameRate,freezeRate:this._videoFreezeRate,packetLossRate:this._videoPacketLossRate,receiveBitrate:this._videoReceiveBitrate,receiveBytes:this._videoReceiveBytes,receiveDelay:this._videoReceiveDelay,receiveFrameRate:this._receiveFrameRate,receivePackets:this._videoReceivePackets,receivePacketsLost:this._videoReceivePacketsLost,receiveResolutionHeight:this._receiveResolutionHeight,receiveResolutionWidth:this._receiveResolutionWidth,renderFrameRate:this._renderFrameRate,totalDuration:this._recvVideoTotalDuration,totalFreezeTime:this._recvVideoTotalFreezeTime,transportDelay:this._videoTransportDelay}},e.prototype.getSensorStats=function(){this._calculateTotalIndex();var e={a_send_bitrate:this._audioSendBitrate,is_send:1,v_actual_bitrate:this._videoSendBitrate,v_encode_cost:this._encodeDelay,v_frame_encode:this._sendFramesEncoded,v_frame_sent:this._sendFramesSent,v_input_frame_rate:this._targetFramerate,v_nack_pli:this._sendNackCount,v_send_frame_rate:this._sendFrameRate,v_send_packets:this._videoSendPackets,v_send_pli:this._sendPliCount,v_target_bitrate:this._targetSendBitrate},t={is_send:0,a_recv_bitrate:this._audioReceiveBitrate,a_recv_packets:this._audioReceivePackets,a_lost_packets:this._audioReceivePacketsLost,v_recv_bitrate:this._videoReceiveBitrate,v_decode_cost:this._totalDecodeTime,v_lost_packets:this._videoReceivePacketsLost,v_recv_firs:this._firCount,v_recv_frame_rate:this._receiveFrameRate,v_recv_nack:this._recvNackCount,v_recv_plis:this._recvPliCount};return"send"===this._direction?e:t},e.prototype.getCrystalballStats=function(){this._calculateTotalIndex();var e={};if("send"===this._direction){var t=this._encodeDelay?1e3*this._encodeDelay:0,r={VSendBitrate1:this._videoSendBitrate,ASendBitrate:this._audioSendBitrate,SendBandwidth:this._sendBandwidth,SendRTT:1e3*this._currentRoundTripTime,EncodeCost:t,VFrameRate1:this._sendFrameRate,VFrameRate2:this._targetFramerate,VSendFrameRate1:this._sendFrameRate,VSendLostPercent:this._videoPacketLossRate,ASendLostPercent:this._audioPacketLossRate,nack_receive_times:this._sendNackCount,pli_receive_times:this._sendPliCount};for(var n in r)r.hasOwnProperty(n)&&r[n]&&(e[n]=Math.round(r[n]))}else if("recv"===this._direction){var o={VRecvBitrate:this._videoReceiveBitrate,ARecvBitrate:this._audioReceiveBitrate,RecvRTT:1e3*this._currentRoundTripTime,DecodeCost:1e3*this._totalDecodeTime,VFrameRate:this._receiveFrameRate,VRecvLostPercent:this._videoReceivePacketsLost,ARecvLostPercent:this._audioReceivePacketsLost};for(var n in o)o.hasOwnProperty(n)&&o[n]&&(e[n]=Math.round(o[n]))}return e},e.prototype.collectRTCStatsReport=function(e){this._analysisRTCStatsReport(e)},e.prototype._analysisRTCStatsReport=function(e){var t=this;e.forEach((function(e){t._startTime||(t._startTime=e.timestamp),t._endTime=e.timestamp,t._interval=t._endTime-t._startTime+1e3;var r=e.id,o=e.type,i=e.kind||e.mediaType;"codec"===o?t._mapCodecId.set(r,e.mimeType):"candidate-pair"===o?(t._currentRoundTripTime=e.currentRoundTripTime,t._sendBandwidth=e.availableOutgoingBitrate):"track"===o?"audio"===i?t._audioJitterDelay=e.jitterBufferDelay/e.jitterBufferEmittedCount:"video"===i&&(t._videoJitterDelay=e.jitterBufferDelay/e.jitterBufferEmittedCount):"media-source"===o?"audio"===i?t._sendVolumeLevel=e.audioLevel:"video"===i&&(t._captureFrameRate=e.framesPerSecond,t._captureResolutionWidth=e.width,t._captureResolutionHeight=e.height):"remote-inbound-rtp"===o?"audio"===i?t._andioSendPacketsLost=e.packetsLost:"video"===i&&(t._videoSendPacketsLost=e.packetsLost):"outbound-rtp"===o?"audio"===i?(t._audioCodecId=e.codecId,t._audioSendBitrate=t._calculateKBitsPerSecond(e.bytesSent),t._audioSendBytes=e.bytesSent,t._audioSendPackets=e.packetsSent):"video"===i&&(t._videoCodecId=e.codecId,t._encodeDelay=e.totalEncodeTime,t._videoSendBitrate=t._calculateKBitsPerSecond(e.bytesSent),t._videoSendBytes=e.bytesSent,t._sendFrameRate=e.framesPerSecond,t._videoSendPackets=e.packetsSent,t._sendResolutionHeight=e.frameHeight,t._sendResolutionWidth=e.frameWidth,t._sendFramesEncoded=e.framesEncoded,t._sendFramesSent=e.framesSent,t._sendNackCount=e.nackCount,t._sendPliCount=e.pliCount,e.framesPerSecond<=n.freezeFrameRate&&(t._sendCountFreezeTimes+=1)):"inbound-rtp"===o&&("audio"===i?(t._audioCodecId=e.codecId,t._audioPublishDuration=e.totalSamplesDuration,t._audioReceiveBitrate=t._calculateKBitsPerSecond(e.bytesReceived),t._audioReceiveBytes=e.bytesReceived,t._receiveLevel=e.audioLevel,t._audioReceivePackets=e.packetsReceived,t._audioReceivePacketsLost=e.packetsLost,t._audioPacketLossRate=t._calcuatePacketsLostRatio(e.packetsLost,e.packetsReceived),t._audioReceivePacketsLost/(t._audioReceivePackets+t._audioReceivePacketsLost)>=n.audioFreezeRate&&(t._totalAudioFreezeTimes+=1),t._totalAudioRecvTimes+=1):"video"===i&&(t._videoCodecId=e.codecId,t._videoReceiveBitrate=t._calculateKBitsPerSecond(e.bytesReceived),t._videoReceiveBytes=e.bytesReceived,t._receiveFrameRate=e.framesPerSecond||0,t._videoReceivePackets=e.packetsReceived,t._videoReceivePacketsLost=e.packetsLost,t._receiveResolutionHeight=e.frameHeight,t._receiveResolutionWidth=e.frameWidth,t._videoPacketLossRate=t._calcuatePacketsLostRatio(e.packetsLost,e.packetsReceived),t._totalRenderFrame=e.framesDecoded-e.framesDropped,t._totalDecodeFrame=e.framesDecoded,t._totalRecvFrameRate+=e.framesPerSecond||0,t._totalDecodeTime=e.totalDecodeTime,t._recvNackCount=e.nackCount,t._recvPliCount=e.pliCount,e.framesPerSecond<=n.freezeFrameRate&&(t._recvCountFreezeTimes+=1,t._totalfreezeFrame+=e.framesPerSecond)))}));var r=this._mapCodecId.get(this._audioCodecId),o=this._mapCodecId.get(this._videoCodecId);"send"===this._direction?(this._audioSendCodecType=null==r?void 0:r.split("/")[1],this._videoSendCodecType=null==o?void 0:o.split("/")[1]):(this._audioRecvCodecType=null==r?void 0:r.split("/")[1],this._videoRecvCodecType=null==o?void 0:o.split("/")[1],this._audioTransportDelay=this._currentRoundTripTime/2,this._videoTransportDelay=this._currentRoundTripTime/2,this._audioReceiveDelay=this._audioTransportDelay+this._audioJitterDelay,this._videoReceiveDelay=this._videoTransportDelay+this._videoJitterDelay)},e.prototype._calculateTotalIndex=function(){"send"===this._direction?(this._sendTotalDuration=.001*(this._endTime-this._startTime),this._sendTotalFreezeTime=this._sendCountFreezeTimes*this._interval/1e3):(this._recvVideoTotalDuration=.001*(this._endTime-this._startTime),this._audioFreezeRate=this._totalAudioFreezeTimes/this._totalAudioRecvTimes,this._renderFrameRate=this._totalRenderFrame/(.001*this._interval),this._decodeFrameRate=this._totalDecodeFrame/(.001*this._interval),this._recvAudioTotalFreezeTime=this._totalAudioFreezeTimes*this._interval*.001,this._recvVideoTotalFreezeTime=this._recvCountFreezeTimes*this._interval*.001,this._videoFreezeRate=this._totalfreezeFrame/this._totalRecvFrameRate)},e.prototype._calculateKBitsPerSecond=function(e){return Math.round(.008*e/(.001*this._interval))},e.prototype._calcuatePacketsLostRatio=function(e,t){return 0===e&&0===t?0:e/(e+t)},e.prototype._calculatePacketsPerSecond=function(e,t){return e/(.001*t)},e.prototype._calcuateFramesPerSecond=function(e,t){return Math.round(e/(.001*t))},e}();t.pcStats=o},function(e,t,r){"use strict";e.exports=p;var n,o=r(1),i=o.LongBits,s=o.base64,a=o.utf8;function c(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function u(){}function l(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function p(){this.len=0,this.head=new c(u,0,0),this.tail=this.head,this.states=null}var f=function(){return o.Buffer?function(){return(p.create=function(){return new n})()}:function(){return new p}};function d(e,t,r){t[r]=255&e}function h(e,t){this.len=e,this.next=void 0,this.val=t}function g(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function y(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}p.create=f(),p.alloc=function(e){return new o.Array(e)},o.Array!==Array&&(p.alloc=o.pool(p.alloc,o.Array.prototype.subarray)),p.prototype._push=function(e,t,r){return this.tail=this.tail.next=new c(e,t,r),this.len+=t,this},h.prototype=Object.create(c.prototype),h.prototype.fn=function(e,t,r){for(;e>127;)t[r++]=127&e|128,e>>>=7;t[r]=e},p.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new h((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},p.prototype.int32=function(e){return e<0?this._push(g,10,i.fromNumber(e)):this.uint32(e)},p.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},p.prototype.uint64=function(e){var t=i.from(e);return this._push(g,t.length(),t)},p.prototype.int64=p.prototype.uint64,p.prototype.sint64=function(e){var t=i.from(e).zzEncode();return this._push(g,t.length(),t)},p.prototype.bool=function(e){return this._push(d,1,e?1:0)},p.prototype.fixed32=function(e){return this._push(y,4,e>>>0)},p.prototype.sfixed32=p.prototype.fixed32,p.prototype.fixed64=function(e){var t=i.from(e);return this._push(y,4,t.lo)._push(y,4,t.hi)},p.prototype.sfixed64=p.prototype.fixed64,p.prototype.float=function(e){return this._push(o.float.writeFloatLE,4,e)},p.prototype.double=function(e){return this._push(o.float.writeDoubleLE,8,e)};var m=o.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var n=0;n<e.length;++n)t[r+n]=e[n]};p.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(d,1,0);if(o.isString(e)){var r=p.alloc(t=s.length(e));s.decode(e,r,0),e=r}return this.uint32(t)._push(m,t,e)},p.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(d,1,0)},p.prototype.fork=function(){return this.states=new l(this),this.head=this.tail=new c(u,0,0),this.len=0,this},p.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(u,0,0),this.len=0),this},p.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},p.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},p._configure=function(e){n=e,p.create=f(),n._configure()}},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";e.exports=c;var n,o=r(1),i=o.LongBits,s=o.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function c(e){this.buf=e,this.pos=0,this.len=e.length}var u,l="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new c(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new c(e);throw Error("illegal buffer")},p=function(){return o.Buffer?function(e){return(c.create=function(e){return o.Buffer.isBuffer(e)?new n(e):l(e)})(e)}:l};function f(){var e=new i(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function d(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function h(){if(this.pos+8>this.len)throw a(this,8);return new i(d(this.buf,this.pos+=4),d(this.buf,this.pos+=4))}c.create=p(),c.prototype._slice=o.Array.prototype.subarray||o.Array.prototype.slice,c.prototype.uint32=(u=4294967295,function(){if(u=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return u;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return u}),c.prototype.int32=function(){return 0|this.uint32()},c.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},c.prototype.bool=function(){return 0!==this.uint32()},c.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return d(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|d(this.buf,this.pos+=4)},c.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=o.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},c.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=o.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},c.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw a(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,r):t===r?new this.buf.constructor(0):this._slice.call(this.buf,t,r)},c.prototype.string=function(){var e=this.bytes();return s.read(e,0,e.length)},c.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},c.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},c._configure=function(e){n=e,c.create=p(),n._configure();var t=o.Long?"toLong":"toNumber";o.merge(c.prototype,{int64:function(){return f.call(this)[t](!1)},uint64:function(){return f.call(this)[t](!0)},sint64:function(){return f.call(this).zzDecode()[t](!1)},fixed64:function(){return h.call(this)[t](!0)},sfixed64:function(){return h.call(this)[t](!1)}})}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,r){(function(t){e.exports=function(e){return r&&t.isBuffer(e)||n&&(e instanceof ArrayBuffer||function(e){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer}(e))};var r="function"==typeof t&&"function"==typeof t.isBuffer,n="function"==typeof ArrayBuffer}).call(this,r(10).Buffer)},function(e,t){var r=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,n=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(e){var t=e,o=e.indexOf("["),i=e.indexOf("]");-1!=o&&-1!=i&&(e=e.substring(0,o)+e.substring(o,i).replace(/:/g,";")+e.substring(i,e.length));for(var s,a,c=r.exec(e||""),u={},l=14;l--;)u[n[l]]=c[l]||"";return-1!=o&&-1!=i&&(u.source=t,u.host=u.host.substring(1,u.host.length-1).replace(/;/g,":"),u.authority=u.authority.replace("[","").replace("]","").replace(/;/g,":"),u.ipv6uri=!0),u.pathNames=function(e,t){var r=t.replace(/\/{2,9}/g,"/").split("/");"/"!=t.substr(0,1)&&0!==t.length||r.splice(0,1);"/"==t.substr(t.length-1,1)&&r.splice(r.length-1,1);return r}(0,u.path),u.queryKey=(s=u.query,a={},s.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,r){t&&(a[t]=r)})),a),u}},function(e,t,r){var n=r(79),o=r(40),i=r(2),s=r(9),a=r(41),c=r(42),u=r(11)("socket.io-client:manager"),l=r(39),p=r(95),f=Object.prototype.hasOwnProperty;function d(e,t){if(!(this instanceof d))return new d(e,t);e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new p({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var r=t.parser||s;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this.autoConnect=!1!==t.autoConnect,this.autoConnect&&this.open()}e.exports=d,d.prototype.emitAll=function(){for(var e in this.emit.apply(this,arguments),this.nsps)f.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},d.prototype.updateSocketIds=function(){for(var e in this.nsps)f.call(this.nsps,e)&&(this.nsps[e].id=this.generateId(e))},d.prototype.generateId=function(e){return("/"===e?"":e+"#")+this.engine.id},i(d.prototype),d.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},d.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},d.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},d.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},d.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},d.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},d.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},d.prototype.open=d.prototype.connect=function(e,t){if(u("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;u("opening %s",this.uri),this.engine=n(this.uri,this.opts);var r=this.engine,o=this;this.readyState="opening",this.skipReconnect=!1;var i=a(r,"open",(function(){o.onopen(),e&&e()})),s=a(r,"error",(function(t){if(u("connect_error"),o.cleanup(),o.readyState="closed",o.emitAll("connect_error",t),e){var r=new Error("Connection error");r.data=t,e(r)}else o.maybeReconnectOnOpen()}));if(!1!==this._timeout){var c=this._timeout;u("connect attempt will timeout after %d",c),0===c&&i.destroy();var l=setTimeout((function(){u("connect attempt timed out after %d",c),i.destroy(),r.close(),r.emit("error","timeout"),o.emitAll("connect_timeout",c)}),c);this.subs.push({destroy:function(){clearTimeout(l)}})}return this.subs.push(i),this.subs.push(s),this},d.prototype.onopen=function(){u("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(a(e,"data",c(this,"ondata"))),this.subs.push(a(e,"ping",c(this,"onping"))),this.subs.push(a(e,"pong",c(this,"onpong"))),this.subs.push(a(e,"error",c(this,"onerror"))),this.subs.push(a(e,"close",c(this,"onclose"))),this.subs.push(a(this.decoder,"decoded",c(this,"ondecoded")))},d.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},d.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},d.prototype.ondata=function(e){this.decoder.add(e)},d.prototype.ondecoded=function(e){this.emit("packet",e)},d.prototype.onerror=function(e){u("error",e),this.emitAll("error",e)},d.prototype.socket=function(e,t){var r=this.nsps[e];if(!r){r=new o(this,e,t),this.nsps[e]=r;var n=this;r.on("connecting",i),r.on("connect",(function(){r.id=n.generateId(e)})),this.autoConnect&&i()}function i(){~l(n.connecting,r)||n.connecting.push(r)}return r},d.prototype.destroy=function(e){var t=l(this.connecting,e);~t&&this.connecting.splice(t,1),this.connecting.length||this.close()},d.prototype.packet=function(e){u("writing packet %j",e);var t=this;e.query&&0===e.type&&(e.nsp+="?"+e.query),t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,(function(r){for(var n=0;n<r.length;n++)t.engine.write(r[n],e.options);t.encoding=!1,t.processPacketQueue()})))},d.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},d.prototype.cleanup=function(){u("cleanup");for(var e=this.subs.length,t=0;t<e;t++){this.subs.shift().destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},d.prototype.close=d.prototype.disconnect=function(){u("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},d.prototype.onclose=function(e){u("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},d.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)u("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();u("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var r=setTimeout((function(){e.skipReconnect||(u("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open((function(t){t?(u("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(u("reconnect success"),e.onreconnect())})))}),t);this.subs.push({destroy:function(){clearTimeout(r)}})}},d.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},function(e,t,r){var n=r(19),o=r(82),i=r(91),s=r(92);t.polling=function(e){var t=!1,r=!1,s=!1!==e.jsonp;if("undefined"!=typeof location){var a="https:"===location.protocol,c=location.port;c||(c=a?443:80),t=e.hostname!==location.hostname||c!==e.port,r=e.secure!==a}if(e.xdomain=t,e.xscheme=r,"open"in new n(e)&&!e.forceJSONP)return new o(e);if(!s)throw new Error("JSONP disabled");return new i(e)},t.websocket=s},function(e,t,r){var n=r(21),o=r(12),i=r(3),s=r(13),a=r(38),c=r(14)("engine.io-client:polling");e.exports=l;var u=null!=new(r(19))({xdomain:!1}).responseType;function l(e){var t=e&&e.forceBase64;u&&!t||(this.supportsBinary=!1),n.call(this,e)}s(l,n),l.prototype.name="polling",l.prototype.doOpen=function(){this.poll()},l.prototype.pause=function(e){var t=this;function r(){c("paused"),t.readyState="paused",e()}if(this.readyState="pausing",this.polling||!this.writable){var n=0;this.polling&&(c("we are currently polling - waiting to pause"),n++,this.once("pollComplete",(function(){c("pre-pause polling complete"),--n||r()}))),this.writable||(c("we are currently writing - waiting to pause"),n++,this.once("drain",(function(){c("pre-pause writing complete"),--n||r()})))}else r()},l.prototype.poll=function(){c("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},l.prototype.onData=function(e){var t=this;c("polling got data %s",e);i.decodePayload(e,this.socket.binaryType,(function(e,r,n){if("opening"===t.readyState&&"open"===e.type&&t.onOpen(),"close"===e.type)return t.onClose(),!1;t.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():c('ignoring poll - transport state "%s"',this.readyState))},l.prototype.doClose=function(){var e=this;function t(){c("writing close packet"),e.write([{type:"close"}])}"open"===this.readyState?(c("transport open - closing"),t()):(c("transport not open - deferring close"),this.once("open",t))},l.prototype.write=function(e){var t=this;this.writable=!1;var r=function(){t.writable=!0,t.emit("drain")};i.encodePayload(e,this.supportsBinary,(function(e){t.doWrite(e,r)}))},l.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",r="";return!1!==this.timestampRequests&&(e[this.timestampParam]=a()),this.supportsBinary||e.sid||(e.b64=1),e=o.encode(e),this.port&&("https"===t&&443!==Number(this.port)||"http"===t&&80!==Number(this.port))&&(r=":"+this.port),e.length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+r+this.path+e}},function(e,t,r){(function(t){var n=r(84),o=Object.prototype.toString,i="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===o.call(Blob),s="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===o.call(File);e.exports=function e(r){if(!r||"object"!=typeof r)return!1;if(n(r)){for(var o=0,a=r.length;o<a;o++)if(e(r[o]))return!0;return!1}if("function"==typeof t&&t.isBuffer&&t.isBuffer(r)||"function"==typeof ArrayBuffer&&r instanceof ArrayBuffer||i&&r instanceof Blob||s&&r instanceof File)return!0;if(r.toJSON&&"function"==typeof r.toJSON&&1===arguments.length)return e(r.toJSON(),!0);for(var c in r)if(Object.prototype.hasOwnProperty.call(r,c)&&e(r[c]))return!0;return!1}}).call(this,r(10).Buffer)},function(e,t,r){"use strict";var n,o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),i={},s=0,a=0;function c(e){var t="";do{t=o[e%64]+t,e=Math.floor(e/64)}while(e>0);return t}function u(){var e=c(+new Date);return e!==n?(s=0,n=e):e+"."+c(s++)}for(;a<64;a++)i[o[a]]=a;u.encode=c,u.decode=function(e){var t=0;for(a=0;a<e.length;a++)t=64*t+i[e.charAt(a)];return t},e.exports=u},function(e,t){var r=[].indexOf;e.exports=function(e,t){if(r)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}},function(e,t,r){var n=r(9),o=r(2),i=r(94),s=r(41),a=r(42),c=r(11)("socket.io-client:socket"),u=r(12),l=r(37);e.exports=d;var p={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},f=o.prototype.emit;function d(e,t,r){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},r&&r.query&&(this.query=r.query),this.io.autoConnect&&this.open()}o(d.prototype),d.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[s(e,"open",a(this,"onopen")),s(e,"packet",a(this,"onpacket")),s(e,"close",a(this,"onclose"))]}},d.prototype.open=d.prototype.connect=function(){return this.connected||(this.subEvents(),this.io.reconnecting||this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting")),this},d.prototype.send=function(){var e=i(arguments);return e.unshift("message"),this.emit.apply(this,e),this},d.prototype.emit=function(e){if(p.hasOwnProperty(e))return f.apply(this,arguments),this;var t=i(arguments),r={type:(void 0!==this.flags.binary?this.flags.binary:l(t))?n.BINARY_EVENT:n.EVENT,data:t,options:{}};return r.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(c("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),r.id=this.ids++),this.connected?this.packet(r):this.sendBuffer.push(r),this.flags={},this},d.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},d.prototype.onopen=function(){if(c("transport is open - connecting"),"/"!==this.nsp)if(this.query){var e="object"==typeof this.query?u.encode(this.query):this.query;c("sending connect packet with query %s",e),this.packet({type:n.CONNECT,query:e})}else this.packet({type:n.CONNECT})},d.prototype.onclose=function(e){c("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},d.prototype.onpacket=function(e){var t=e.nsp===this.nsp,r=e.type===n.ERROR&&"/"===e.nsp;if(t||r)switch(e.type){case n.CONNECT:this.onconnect();break;case n.EVENT:case n.BINARY_EVENT:this.onevent(e);break;case n.ACK:case n.BINARY_ACK:this.onack(e);break;case n.DISCONNECT:this.ondisconnect();break;case n.ERROR:this.emit("error",e.data)}},d.prototype.onevent=function(e){var t=e.data||[];c("emitting event %j",t),null!=e.id&&(c("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?f.apply(this,t):this.receiveBuffer.push(t)},d.prototype.ack=function(e){var t=this,r=!1;return function(){if(!r){r=!0;var o=i(arguments);c("sending ack %j",o),t.packet({type:l(o)?n.BINARY_ACK:n.ACK,id:e,data:o})}}},d.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t?(c("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):c("bad ack %s",e.id)},d.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},d.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)f.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},d.prototype.ondisconnect=function(){c("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},d.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},d.prototype.close=d.prototype.disconnect=function(){return this.connected&&(c("performing disconnect (%s)",this.nsp),this.packet({type:n.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},d.prototype.compress=function(e){return this.flags.compress=e,this},d.prototype.binary=function(e){return this.flags.binary=e,this}},function(e,t){e.exports=function(e,t,r){return e.on(t,r),{destroy:function(){e.removeListener(t,r)}}}},function(e,t){var r=[].slice;e.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var n=r.call(arguments,2);return function(){return t.apply(e,n.concat(r.call(arguments)))}}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},s=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){this.kind=e,this.event=t}return e.createEventPacket=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return new(c.bind.apply(c,s([void 0,e],i(t))))},e.createBinaryPacket=function(e,t,r,n){return new u(e,t,r,n)},e.prototype.isBinary=function(){return"binary"===this.kind},e.prototype.isEvent=function(){return"event"===this.kind},e}(),c=function(e){function t(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var o=e.call(this,"event",t)||this;return o.args=r,o}return o(t,e),t}(a),u=function(e){function t(t,r,n,o){var i=e.call(this,"binary",t)||this;return i.cmd=r,i.subtype=n,i.body=o,i}return o(t,e),t}(a);t.default=a},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.answerPacketAsync=function(e){return i(this,void 0,void 0,(function(){return s(this,(function(e){return[2,!1]}))}))},t.prototype.commitPacketAsync=function(e){return i(this,void 0,void 0,(function(){return s(this,(function(t){if(null!==this.parent)return[2,this.parent.commitPacketAsync(e)];throw new Error("current router is not in used.")}))}))},t}(r(22).default);t.default=a},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){var r=e.call(this,t)||this;return r.from=t.from,r.to=t.to,r.content=t.content,r}return o(t,e),t}(r(5).default);t.default=i},function(e,t,r){e.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=90)}({17:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n=r(18),o=function(){function e(){}return e.getFirstMatch=function(e,t){var r=t.match(e);return r&&r.length>0&&r[1]||""},e.getSecondMatch=function(e,t){var r=t.match(e);return r&&r.length>1&&r[2]||""},e.matchAndReturnConst=function(e,t,r){if(e.test(t))return r},e.getWindowsVersionName=function(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},e.getMacOSVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},e.getAndroidVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0},e.getVersionPrecision=function(e){return e.split(".").length},e.compareVersions=function(t,r,n){void 0===n&&(n=!1);var o=e.getVersionPrecision(t),i=e.getVersionPrecision(r),s=Math.max(o,i),a=0,c=e.map([t,r],(function(t){var r=s-e.getVersionPrecision(t),n=t+new Array(r+1).join(".0");return e.map(n.split("."),(function(e){return new Array(20-e.length).join("0")+e})).reverse()}));for(n&&(a=s-Math.min(o,i)),s-=1;s>=a;){if(c[0][s]>c[1][s])return 1;if(c[0][s]===c[1][s]){if(s===a)return 0;s-=1}else if(c[0][s]<c[1][s])return-1}},e.map=function(e,t){var r,n=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(r=0;r<e.length;r+=1)n.push(t(e[r]));return n},e.find=function(e,t){var r,n;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(r=0,n=e.length;r<n;r+=1){var o=e[r];if(t(o,r))return o}},e.assign=function(e){for(var t,r,n=e,o=arguments.length,i=new Array(o>1?o-1:0),s=1;s<o;s++)i[s-1]=arguments[s];if(Object.assign)return Object.assign.apply(Object,[e].concat(i));var a=function(){var e=i[t];"object"==typeof e&&null!==e&&Object.keys(e).forEach((function(t){n[t]=e[t]}))};for(t=0,r=i.length;t<r;t+=1)a();return e},e.getBrowserAlias=function(e){return n.BROWSER_ALIASES_MAP[e]},e.getBrowserTypeByAlias=function(e){return n.BROWSER_MAP[e]||""},e}();t.default=o,e.exports=t.default},18:function(e,t,r){"use strict";t.__esModule=!0,t.ENGINE_MAP=t.OS_MAP=t.PLATFORMS_MAP=t.BROWSER_MAP=t.BROWSER_ALIASES_MAP=void 0,t.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},t.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},t.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},t.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},t.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,o=(n=r(91))&&n.__esModule?n:{default:n},i=r(18);function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=function(){function e(){}var t,r;return e.getParser=function(e,t){if(void 0===t&&(t=!1),"string"!=typeof e)throw new Error("UserAgent should be a string");return new o.default(e,t)},e.parse=function(e){return new o.default(e).getResult()},t=e,(r=[{key:"BROWSER_MAP",get:function(){return i.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return i.ENGINE_MAP}},{key:"OS_MAP",get:function(){return i.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return i.PLATFORMS_MAP}}])&&s(t,r),e}();t.default=a,e.exports=t.default},91:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n=c(r(92)),o=c(r(93)),i=c(r(94)),s=c(r(95)),a=c(r(17));function c(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(e,t){if(void 0===t&&(t=!1),null==e||""===e)throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}var t=e.prototype;return t.getUA=function(){return this._ua},t.test=function(e){return e.test(this._ua)},t.parseBrowser=function(){var e=this;this.parsedResult.browser={};var t=a.default.find(n.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser},t.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},t.getBrowserName=function(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},t.getBrowserVersion=function(){return this.getBrowser().version},t.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},t.parseOS=function(){var e=this;this.parsedResult.os={};var t=a.default.find(o.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os},t.getOSName=function(e){var t=this.getOS().name;return e?String(t).toLowerCase()||"":t||""},t.getOSVersion=function(){return this.getOS().version},t.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},t.getPlatformType=function(e){void 0===e&&(e=!1);var t=this.getPlatform().type;return e?String(t).toLowerCase()||"":t||""},t.parsePlatform=function(){var e=this;this.parsedResult.platform={};var t=a.default.find(i.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform},t.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},t.getEngineName=function(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},t.parseEngine=function(){var e=this;this.parsedResult.engine={};var t=a.default.find(s.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine},t.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},t.getResult=function(){return a.default.assign({},this.parsedResult)},t.satisfies=function(e){var t=this,r={},n=0,o={},i=0;if(Object.keys(e).forEach((function(t){var s=e[t];"string"==typeof s?(o[t]=s,i+=1):"object"==typeof s&&(r[t]=s,n+=1)})),n>0){var s=Object.keys(r),c=a.default.find(s,(function(e){return t.isOS(e)}));if(c){var u=this.satisfies(r[c]);if(void 0!==u)return u}var l=a.default.find(s,(function(e){return t.isPlatform(e)}));if(l){var p=this.satisfies(r[l]);if(void 0!==p)return p}}if(i>0){var f=Object.keys(o),d=a.default.find(f,(function(e){return t.isBrowser(e,!0)}));if(void 0!==d)return this.compareVersion(o[d])}},t.isBrowser=function(e,t){void 0===t&&(t=!1);var r=this.getBrowserName().toLowerCase(),n=e.toLowerCase(),o=a.default.getBrowserTypeByAlias(n);return t&&o&&(n=o.toLowerCase()),n===r},t.compareVersion=function(e){var t=[0],r=e,n=!1,o=this.getBrowserVersion();if("string"==typeof o)return">"===e[0]||"<"===e[0]?(r=e.substr(1),"="===e[1]?(n=!0,r=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?r=e.substr(1):"~"===e[0]&&(n=!0,r=e.substr(1)),t.indexOf(a.default.compareVersions(o,r,n))>-1},t.isOS=function(e){return this.getOSName(!0)===String(e).toLowerCase()},t.isPlatform=function(e){return this.getPlatformType(!0)===String(e).toLowerCase()},t.isEngine=function(e){return this.getEngineName(!0)===String(e).toLowerCase()},t.is=function(e){return this.isBrowser(e)||this.isOS(e)||this.isPlatform(e)},t.some=function(e){var t=this;return void 0===e&&(e=[]),e.some((function(e){return t.is(e)}))},e}();t.default=u,e.exports=t.default},92:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,o=(n=r(17))&&n.__esModule?n:{default:n},i=/version\/(\d+(\.?_?\d+)+)/i,s=[{test:[/googlebot/i],describe:function(e){var t={name:"Googlebot"},r=o.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||o.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/opera/i],describe:function(e){var t={name:"Opera"},r=o.default.getFirstMatch(i,e)||o.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opr\/|opios/i],describe:function(e){var t={name:"Opera"},r=o.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||o.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/SamsungBrowser/i],describe:function(e){var t={name:"Samsung Internet for Android"},r=o.default.getFirstMatch(i,e)||o.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Whale/i],describe:function(e){var t={name:"NAVER Whale Browser"},r=o.default.getFirstMatch(i,e)||o.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MZBrowser/i],describe:function(e){var t={name:"MZ Browser"},r=o.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||o.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/focus/i],describe:function(e){var t={name:"Focus"},r=o.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||o.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/swing/i],describe:function(e){var t={name:"Swing"},r=o.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||o.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/coast/i],describe:function(e){var t={name:"Opera Coast"},r=o.default.getFirstMatch(i,e)||o.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/yabrowser/i],describe:function(e){var t={name:"Yandex Browser"},r=o.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||o.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/ucbrowser/i],describe:function(e){var t={name:"UC Browser"},r=o.default.getFirstMatch(i,e)||o.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Maxthon|mxios/i],describe:function(e){var t={name:"Maxthon"},r=o.default.getFirstMatch(i,e)||o.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/epiphany/i],describe:function(e){var t={name:"Epiphany"},r=o.default.getFirstMatch(i,e)||o.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/puffin/i],describe:function(e){var t={name:"Puffin"},r=o.default.getFirstMatch(i,e)||o.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sleipnir/i],describe:function(e){var t={name:"Sleipnir"},r=o.default.getFirstMatch(i,e)||o.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/k-meleon/i],describe:function(e){var t={name:"K-Meleon"},r=o.default.getFirstMatch(i,e)||o.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/micromessenger/i],describe:function(e){var t={name:"WeChat"},r=o.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||o.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/qqbrowser/i],describe:function(e){var t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},r=o.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||o.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/msie|trident/i],describe:function(e){var t={name:"Internet Explorer"},r=o.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/\sedg\//i],describe:function(e){var t={name:"Microsoft Edge"},r=o.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/edg([ea]|ios)/i],describe:function(e){var t={name:"Microsoft Edge"},r=o.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/vivaldi/i],describe:function(e){var t={name:"Vivaldi"},r=o.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/seamonkey/i],describe:function(e){var t={name:"SeaMonkey"},r=o.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sailfish/i],describe:function(e){var t={name:"Sailfish"},r=o.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return r&&(t.version=r),t}},{test:[/silk/i],describe:function(e){var t={name:"Amazon Silk"},r=o.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/phantom/i],describe:function(e){var t={name:"PhantomJS"},r=o.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/slimerjs/i],describe:function(e){var t={name:"SlimerJS"},r=o.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t={name:"BlackBerry"},r=o.default.getFirstMatch(i,e)||o.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t={name:"WebOS Browser"},r=o.default.getFirstMatch(i,e)||o.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/bada/i],describe:function(e){var t={name:"Bada"},r=o.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/tizen/i],describe:function(e){var t={name:"Tizen"},r=o.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||o.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/qupzilla/i],describe:function(e){var t={name:"QupZilla"},r=o.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||o.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var t={name:"Firefox"},r=o.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/electron/i],describe:function(e){var t={name:"Electron"},r=o.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/chromium/i],describe:function(e){var t={name:"Chromium"},r=o.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||o.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/chrome|crios|crmo/i],describe:function(e){var t={name:"Chrome"},r=o.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/GSA/i],describe:function(e){var t={name:"Google Search"},r=o.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){var t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe:function(e){var t={name:"Android Browser"},r=o.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/playstation 4/i],describe:function(e){var t={name:"PlayStation 4"},r=o.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/safari|applewebkit/i],describe:function(e){var t={name:"Safari"},r=o.default.getFirstMatch(i,e);return r&&(t.version=r),t}},{test:[/.*/i],describe:function(e){var t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:o.default.getFirstMatch(t,e),version:o.default.getSecondMatch(t,e)}}}];t.default=s,e.exports=t.default},93:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,o=(n=r(17))&&n.__esModule?n:{default:n},i=r(18),s=[{test:[/Roku\/DVP/],describe:function(e){var t=o.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:i.OS_MAP.Roku,version:t}}},{test:[/windows phone/i],describe:function(e){var t=o.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:i.OS_MAP.WindowsPhone,version:t}}},{test:[/windows /i],describe:function(e){var t=o.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),r=o.default.getWindowsVersionName(t);return{name:i.OS_MAP.Windows,version:t,versionName:r}}},{test:[/Macintosh(.*?) FxiOS(.*?) Version\//],describe:function(e){var t=o.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return{name:i.OS_MAP.iOS,version:t}}},{test:[/macintosh/i],describe:function(e){var t=o.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),r=o.default.getMacOSVersionName(t),n={name:i.OS_MAP.MacOS,version:t};return r&&(n.versionName=r),n}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){var t=o.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:i.OS_MAP.iOS,version:t}}},{test:function(e){var t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe:function(e){var t=o.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),r=o.default.getAndroidVersionName(t),n={name:i.OS_MAP.Android,version:t};return r&&(n.versionName=r),n}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t=o.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),r={name:i.OS_MAP.WebOS};return t&&t.length&&(r.version=t),r}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t=o.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||o.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||o.default.getFirstMatch(/\bbb(\d+)/i,e);return{name:i.OS_MAP.BlackBerry,version:t}}},{test:[/bada/i],describe:function(e){var t=o.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:i.OS_MAP.Bada,version:t}}},{test:[/tizen/i],describe:function(e){var t=o.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:i.OS_MAP.Tizen,version:t}}},{test:[/linux/i],describe:function(){return{name:i.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:i.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(e){var t=o.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:i.OS_MAP.PlayStation4,version:t}}}];t.default=s,e.exports=t.default},94:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,o=(n=r(17))&&n.__esModule?n:{default:n},i=r(18),s=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(e){var t=o.default.getFirstMatch(/(can-l01)/i,e)&&"Nova",r={type:i.PLATFORMS_MAP.mobile,vendor:"Huawei"};return t&&(r.model=t),r}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?) Version\//],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet}}},{test:function(e){var t=e.test(/ipod|iphone/i),r=e.test(/like (ipod|iphone)/i);return t&&!r},describe:function(e){var t=o.default.getFirstMatch(/(ipod|iphone)/i,e);return{type:i.PLATFORMS_MAP.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:i.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:i.PLATFORMS_MAP.mobile}}},{test:function(e){return"blackberry"===e.getBrowserName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(e){return"bada"===e.getBrowserName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.mobile}}},{test:function(e){return"windows phone"===e.getBrowserName()},describe:function(){return{type:i.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(e){var t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:function(){return{type:i.PLATFORMS_MAP.tablet}}},{test:function(e){return"android"===e.getOSName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.mobile}}},{test:function(e){return"macos"===e.getOSName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(e){return"windows"===e.getOSName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.desktop}}},{test:function(e){return"linux"===e.getOSName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.desktop}}},{test:function(e){return"playstation 4"===e.getOSName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.tv}}},{test:function(e){return"roku"===e.getOSName(!0)},describe:function(){return{type:i.PLATFORMS_MAP.tv}}}];t.default=s,e.exports=t.default},95:function(e,t,r){"use strict";t.__esModule=!0,t.default=void 0;var n,o=(n=r(17))&&n.__esModule?n:{default:n},i=r(18),s=[{test:function(e){return"microsoft edge"===e.getBrowserName(!0)},describe:function(e){if(/\sedg\//i.test(e))return{name:i.ENGINE_MAP.Blink};var t=o.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:i.ENGINE_MAP.EdgeHTML,version:t}}},{test:[/trident/i],describe:function(e){var t={name:i.ENGINE_MAP.Trident},r=o.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){return e.test(/presto/i)},describe:function(e){var t={name:i.ENGINE_MAP.Presto},r=o.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){var t=e.test(/gecko/i),r=e.test(/like gecko/i);return t&&!r},describe:function(e){var t={name:i.ENGINE_MAP.Gecko},r=o.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:i.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(e){var t={name:i.ENGINE_MAP.WebKit},r=o.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}}];t.default=s,e.exports=t.default}})},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.Chrome68=void 0;var c=function(e){function t(){return e.call(this)||this}return o(t,e),t.createFactory=function(){return function(){return new t}},Object.defineProperty(t.prototype,"name",{get:function(){return"Chrome68"},enumerable:!1,configurable:!0}),t.prototype.setLocalOfferSdp=function(e){return i(this,void 0,void 0,(function(){var t,r,n,o,i,c;return s(this,(function(s){if("send"===this._direction){if(void 0===e)throw new Error("mediastream must be not exist.");if(t=e.mediastream,e.encodings,void 0===t)throw new Error("mediastream must be not exist.");try{for(r=a(t.getTracks()),n=r.next();!n.done;n=r.next())o=n.value,this._pc.addTrack(o,this._sendStream)}catch(e){i={error:e}}finally{try{n&&!n.done&&(c=r.return)&&c.call(r)}finally{if(i)throw i.error}}this._currentStream=t}return[2]}))}))},t.prototype.getLocalOfferSdp=function(){return i(this,void 0,void 0,(function(){var e,t,r;return s(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),e={offerToReceiveAudio:!1,offerToReceiveVideo:!1},"recv"===this._direction&&(e={offerToReceiveAudio:!0,offerToReceiveVideo:!0}),[4,this._pc.createOffer(e)];case 1:return t=n.sent(),r=void 0,r=0!==this._videoCustomBitrate||0!==this._audioCustomBitrate?this.setSdpCustomBitrate(t.sdp):t.sdp,[4,this._pc.setLocalDescription({type:"offer",sdp:r})];case 2:return n.sent(),[2,{localOfferSdp:t.sdp}];case 3:throw n.sent(),new Error("set local offer sdp error");case 4:return[2]}}))}))},t}(r(0).Handler);t.Chrome68=c},function(e,t){var r=e.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return null!=e.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%d trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return null!=e.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return null!=e.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=null!=e.raddr?" raddr %s rport %d":"%v%v",t+=null!=e.tcptype?" tcptype %s":"%v",null!=e.generation&&(t+=" generation %d"),t+=null!=e["network-id"]?" network-id %d":"%v",t+=null!=e["network-cost"]?" network-cost %d":"%v"}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var t="ssrc:%d";return null!=e.attribute&&(t+=" %s",null!=e.value&&(t+=":%s")),t}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return null!=e.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(null!=e.clksrcExt?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var t="mediaclk:";return t+=null!=e.id?"id=%s %s":"%v%s",t+=null!=e.mediaClockValue?"=%s":"",t+=null!=e.rateNumerator?" rate=%s":"",t+=null!=e.rateDenominator?"/%s":""}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(r).forEach((function(e){r[e].forEach((function(e){e.reg||(e.reg=/(.*)/),e.format||(e.format="%s")}))}))},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},a=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s};Object.defineProperty(t,"__esModule",{value:!0});var c=r(50),u=r(118),l=function(e){function t(t){var r=e.call(this)||this;return r._webIM=null,r._octopusRTC=null,r._rtcAppId="",r._userId="",r._env="prod",r._edgeUrl="",r._appPackageName="",r._imAppId="",r._appKey="",r._autoConnect=!0,r._environment="production",r._socketUrl="",r._personalManager=null,r._liveroomManager=null,r._pullManager=null,r._type="international",r._appId="",r._token="",r._userId=t.userId,void 0!==t.environment&&(r._environment=t.environment),void 0!==t.appId&&(r._appId=t.appId),void 0!==t.imAppId&&(r._imAppId=t.imAppId),void 0!==t.rtcAppId&&(r._rtcAppId=t.rtcAppId),void 0!==t.appKey&&(r._appKey=t.appKey),void 0!==t.socketUrl&&(r._socketUrl=t.socketUrl),void 0!==t.env&&(r._env=t.env),void 0!==t.appPackageName&&(r._appPackageName=t.appPackageName),void 0!==t.type&&(r._type=t.type),void 0!==t.token&&(r._token=t.token),r._webIM=new c.default({appId:r._imAppId,appKey:r._appKey,autoConnect:r._autoConnect,environment:r._environment,socketUrl:r._socketUrl?r._socketUrl:void 0}),r._octopusRTC=new u.default({appId:r._rtcAppId,userId:r._userId,env:r._env,edgeUrl:r._edgeUrl,type:r._type,appPackageName:r._appPackageName}),r._octopusRTC.init(),r._personalManager=r._webIM.personalManager,r._liveroomManager=r._webIM.liveroomManager,r._pullManager=r._webIM.pullManager,r}return o(t,e),t.prototype.login=function(){var e;return null===(e=this._webIM)||void 0===e?void 0:e.login(this._userId,this._token)},t.prototype.joinRoom=function(e,t,r,n){var o;return i(this,void 0,void 0,(function(){var i,c,u,l;return s(this,(function(s){switch(s.label){case 0:return this.loadEvents(),[4,this._liveroomManager.join(e)];case 1:return i=s.sent(),[4,null===(o=this._octopusRTC)||void 0===o?void 0:o.login(e,t,r,n)];case 2:c=s.sent(),s.label=3;case 3:return s.trys.push([3,5,,6]),[4,Promise.all([i,c])];case 4:return u=a.apply(void 0,[s.sent(),2]),u[0],[2,u[1]];case 5:throw l=s.sent(),new Error(l);case 6:return[2]}}))}))},t.prototype.logout=function(){var e,t;null===(e=this._webIM)||void 0===e||e.logout(),null===(t=this._octopusRTC)||void 0===t||t.logout()},t.prototype.createStream=function(e){var t;return i(this,void 0,void 0,(function(){return s(this,(function(r){return[2,null===(t=this._octopusRTC)||void 0===t?void 0:t.createStream(e)]}))}))},t.prototype.destroyStream=function(e){var t;null===(t=this._octopusRTC)||void 0===t||t.destroyStream(e)},t.prototype.startPublishingStream=function(e,t,r,n){var o;null===(o=this._octopusRTC)||void 0===o||o.startPublishingStream(e,t,r,n)},t.prototype.startPlayingStream=function(e,t,r){var n;return null===(n=this._octopusRTC)||void 0===n?void 0:n.startPlayingStream(e,t,r)},t.prototype.stopPublishingStream=function(e){var t;null===(t=this._octopusRTC)||void 0===t||t.stopPublishingStream(e)},t.prototype.stopPlayingStream=function(e){var t;null===(t=this._octopusRTC)||void 0===t||t.stopPlayingStream(e)},t.prototype.muteSwitch=function(e,t){var r;null===(r=this._octopusRTC)||void 0===r||r.muteSwitch(e,t)},t.prototype.cameraSwitch=function(e,t){var r;null===(r=this._octopusRTC)||void 0===r||r.cameraSwitch(e,t)},Object.defineProperty(t.prototype,"personalManager",{get:function(){return this._personalManager},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"liveroomManager",{get:function(){return this._liveroomManager},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pullManager",{get:function(){return this._pullManager},enumerable:!1,configurable:!0}),t.prototype.loadEvents=function(){var e,t,r,n,o,i=this;null===(e=this._octopusRTC)||void 0===e||e.on("kickout",(function(e){i.emit("kick-out",e)})),null===(t=this._octopusRTC)||void 0===t||t.on("disconnect",(function(e){i.emit("disconnect",e)})),null===(r=this._octopusRTC)||void 0===r||r.on("stream-update",(function(e){i.emit("stream-update",e)})),null===(n=this._octopusRTC)||void 0===n||n.on("play-state-update",(function(e){i.emit("play-state-update",e)})),null===(o=this._octopusRTC)||void 0===o||o.on("publish-state-update",(function(e){i.emit("publish-state-update",e)}))},t}(r(147));t.default=l},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=r(51),s=r(108),a=r(113),c=r(114),u=function(e){function t(t){var r=e.call(this,t)||this;return r._personalManager=new a.default(r),r._liveroomManager=new s.default(r),r._pullManager=new c.default(r),r.router.addRouter("/binary/personalManager",r._personalManager),r.router.addRouter("/binary/liveroomManager",r._liveroomManager),r.router.addRouter("/binary/pullManager",r._pullManager),r}return o(t,e),Object.defineProperty(t.prototype,"personalManager",{get:function(){return this._personalManager},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"liveroomManager",{get:function(){return this._liveroomManager},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pullManager",{get:function(){return this._pullManager},enumerable:!1,configurable:!0}),t}(i.default);t.default=u},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),r(52);var a=r(68),c=r(98),u=r(100),l=r(101),p=r(102),f=r(103),d=r(106),h=function(e){function t(t){var r=e.call(this,t)||this;return r._asyncManager=new c.default(15e3),r._router=new u.default(r),r._resolver=new f.default(r),r._authentication=new d.default(r),null!=t&&void 0!==t.timeout&&(r._asyncManager.timeout=t.timeout),r.on("packet",r.router.answerPacketAsync.bind(r.router)),r.router.addRouter("/event/",new l.default(r)),r.router.addRouter("/binary/",new p.default(r)),r.router.addRouter("/binary/resolver",r._resolver),r.router.addRouter("/binary/authentication",r._authentication),r}return o(t,e),Object.defineProperty(t.prototype,"asyncManager",{get:function(){return this._asyncManager},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"router",{get:function(){return this._router},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resolver",{get:function(){return this._resolver},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"authentication",{get:function(){return this._authentication},enumerable:!1,configurable:!0}),t.prototype.login=function(e,t){return i(this,void 0,void 0,(function(){return s(this,(function(r){return[2,this._authentication.login(e,t)]}))}))},t.prototype.logout=function(){this.disconnect()},t.prototype.waitUtil=function(e){return i(this,void 0,void 0,(function(){var t=this;return s(this,(function(r){return[2,new Promise((function(r){t.once(e,r)}))]}))}))},t}(a.default);t.default=h},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(53),o=r(16);o.util.Long=n,o.configure()},function(e,t){e.exports=n;var r=null;try{r=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function n(e,t,r){this.low=0|e,this.high=0|t,this.unsigned=!!r}function o(e){return!0===(e&&e.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=o;var i={},s={};function a(e,t){var r,n,o;return t?(o=0<=(e>>>=0)&&e<256)&&(n=s[e])?n:(r=u(e,(0|e)<0?-1:0,!0),o&&(s[e]=r),r):(o=-128<=(e|=0)&&e<128)&&(n=i[e])?n:(r=u(e,e<0?-1:0,!1),o&&(i[e]=r),r)}function c(e,t){if(isNaN(e))return t?v:m;if(t){if(e<0)return v;if(e>=h)return S}else{if(e<=-g)return O;if(e+1>=g)return I}return e<0?c(-e,t).neg():u(e%d|0,e/d|0,t)}function u(e,t,r){return new n(e,t,r)}n.fromInt=a,n.fromNumber=c,n.fromBits=u;var l=Math.pow;function p(e,t,r){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return m;if("number"==typeof t?(r=t,t=!1):t=!!t,(r=r||10)<2||36<r)throw RangeError("radix");var n;if((n=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===n)return p(e.substring(1),t,r).neg();for(var o=c(l(r,8)),i=m,s=0;s<e.length;s+=8){var a=Math.min(8,e.length-s),u=parseInt(e.substring(s,s+a),r);if(a<8){var f=c(l(r,a));i=i.mul(f).add(c(u))}else i=(i=i.mul(o)).add(c(u))}return i.unsigned=t,i}function f(e,t){return"number"==typeof e?c(e,t):"string"==typeof e?p(e,t):u(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}n.fromString=p,n.fromValue=f;var d=4294967296,h=d*d,g=h/2,y=a(1<<24),m=a(0);n.ZERO=m;var v=a(0,!0);n.UZERO=v;var _=a(1);n.ONE=_;var b=a(1,!0);n.UONE=b;var w=a(-1);n.NEG_ONE=w;var I=u(-1,2147483647,!1);n.MAX_VALUE=I;var S=u(-1,-1,!0);n.MAX_UNSIGNED_VALUE=S;var O=u(0,-2147483648,!1);n.MIN_VALUE=O;var k=n.prototype;k.toInt=function(){return this.unsigned?this.low>>>0:this.low},k.toNumber=function(){return this.unsigned?(this.high>>>0)*d+(this.low>>>0):this.high*d+(this.low>>>0)},k.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(O)){var t=c(e),r=this.div(t),n=r.mul(t).sub(this);return r.toString(e)+n.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var o=c(l(e,6),this.unsigned),i=this,s="";;){var a=i.div(o),u=(i.sub(a.mul(o)).toInt()>>>0).toString(e);if((i=a).isZero())return u+s;for(;u.length<6;)u="0"+u;s=""+u+s}},k.getHighBits=function(){return this.high},k.getHighBitsUnsigned=function(){return this.high>>>0},k.getLowBits=function(){return this.low},k.getLowBitsUnsigned=function(){return this.low>>>0},k.getNumBitsAbs=function(){if(this.isNegative())return this.eq(O)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},k.isZero=function(){return 0===this.high&&0===this.low},k.eqz=k.isZero,k.isNegative=function(){return!this.unsigned&&this.high<0},k.isPositive=function(){return this.unsigned||this.high>=0},k.isOdd=function(){return 1==(1&this.low)},k.isEven=function(){return 0==(1&this.low)},k.equals=function(e){return o(e)||(e=f(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&(this.high===e.high&&this.low===e.low)},k.eq=k.equals,k.notEquals=function(e){return!this.eq(e)},k.neq=k.notEquals,k.ne=k.notEquals,k.lessThan=function(e){return this.comp(e)<0},k.lt=k.lessThan,k.lessThanOrEqual=function(e){return this.comp(e)<=0},k.lte=k.lessThanOrEqual,k.le=k.lessThanOrEqual,k.greaterThan=function(e){return this.comp(e)>0},k.gt=k.greaterThan,k.greaterThanOrEqual=function(e){return this.comp(e)>=0},k.gte=k.greaterThanOrEqual,k.ge=k.greaterThanOrEqual,k.compare=function(e){if(o(e)||(e=f(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},k.comp=k.compare,k.negate=function(){return!this.unsigned&&this.eq(O)?O:this.not().add(_)},k.neg=k.negate,k.add=function(e){o(e)||(e=f(e));var t=this.high>>>16,r=65535&this.high,n=this.low>>>16,i=65535&this.low,s=e.high>>>16,a=65535&e.high,c=e.low>>>16,l=0,p=0,d=0,h=0;return d+=(h+=i+(65535&e.low))>>>16,p+=(d+=n+c)>>>16,l+=(p+=r+a)>>>16,l+=t+s,u((d&=65535)<<16|(h&=65535),(l&=65535)<<16|(p&=65535),this.unsigned)},k.subtract=function(e){return o(e)||(e=f(e)),this.add(e.neg())},k.sub=k.subtract,k.multiply=function(e){if(this.isZero())return m;if(o(e)||(e=f(e)),r)return u(r.mul(this.low,this.high,e.low,e.high),r.get_high(),this.unsigned);if(e.isZero())return m;if(this.eq(O))return e.isOdd()?O:m;if(e.eq(O))return this.isOdd()?O:m;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(y)&&e.lt(y))return c(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,n=65535&this.high,i=this.low>>>16,s=65535&this.low,a=e.high>>>16,l=65535&e.high,p=e.low>>>16,d=65535&e.low,h=0,g=0,v=0,_=0;return v+=(_+=s*d)>>>16,g+=(v+=i*d)>>>16,v&=65535,g+=(v+=s*p)>>>16,h+=(g+=n*d)>>>16,g&=65535,h+=(g+=i*p)>>>16,g&=65535,h+=(g+=s*l)>>>16,h+=t*d+n*p+i*l+s*a,u((v&=65535)<<16|(_&=65535),(h&=65535)<<16|(g&=65535),this.unsigned)},k.mul=k.multiply,k.divide=function(e){if(o(e)||(e=f(e)),e.isZero())throw Error("division by zero");var t,n,i;if(r)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?u((this.unsigned?r.div_u:r.div_s)(this.low,this.high,e.low,e.high),r.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?v:m;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return v;if(e.gt(this.shru(1)))return b;i=v}else{if(this.eq(O))return e.eq(_)||e.eq(w)?O:e.eq(O)?_:(t=this.shr(1).div(e).shl(1)).eq(m)?e.isNegative()?_:w:(n=this.sub(e.mul(t)),i=t.add(n.div(e)));if(e.eq(O))return this.unsigned?v:m;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=m}for(n=this;n.gte(e);){t=Math.max(1,Math.floor(n.toNumber()/e.toNumber()));for(var s=Math.ceil(Math.log(t)/Math.LN2),a=s<=48?1:l(2,s-48),p=c(t),d=p.mul(e);d.isNegative()||d.gt(n);)d=(p=c(t-=a,this.unsigned)).mul(e);p.isZero()&&(p=_),i=i.add(p),n=n.sub(d)}return i},k.div=k.divide,k.modulo=function(e){return o(e)||(e=f(e)),r?u((this.unsigned?r.rem_u:r.rem_s)(this.low,this.high,e.low,e.high),r.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},k.mod=k.modulo,k.rem=k.modulo,k.not=function(){return u(~this.low,~this.high,this.unsigned)},k.and=function(e){return o(e)||(e=f(e)),u(this.low&e.low,this.high&e.high,this.unsigned)},k.or=function(e){return o(e)||(e=f(e)),u(this.low|e.low,this.high|e.high,this.unsigned)},k.xor=function(e){return o(e)||(e=f(e)),u(this.low^e.low,this.high^e.high,this.unsigned)},k.shiftLeft=function(e){return o(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?u(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):u(0,this.low<<e-32,this.unsigned)},k.shl=k.shiftLeft,k.shiftRight=function(e){return o(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?u(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):u(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},k.shr=k.shiftRight,k.shiftRightUnsigned=function(e){if(o(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?u(this.low>>>e|t<<32-e,t>>>e,this.unsigned):u(32===e?t:t>>>e-32,0,this.unsigned)},k.shru=k.shiftRightUnsigned,k.shr_u=k.shiftRightUnsigned,k.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},k.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},k.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},k.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},k.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,r){return r?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},function(e,t,r){"use strict";var n=t;function o(){n.util._configure(),n.Writer._configure(n.BufferWriter),n.Reader._configure(n.BufferReader)}n.build="minimal",n.Writer=r(28),n.BufferWriter=r(63),n.Reader=r(30),n.BufferReader=r(64),n.util=r(1),n.rpc=r(65),n.roots=r(67),n.configure=o,o()},function(e,t,r){"use strict";e.exports=function(e,t){var r=new Array(arguments.length-1),n=0,o=2,i=!0;for(;o<arguments.length;)r[n++]=arguments[o++];return new Promise((function(o,s){r[n]=function(e){if(i)if(i=!1,e)s(e);else{for(var t=new Array(arguments.length-1),r=0;r<t.length;)t[r++]=arguments[r];o.apply(null,t)}};try{e.apply(t||null,r)}catch(e){i&&(i=!1,s(e))}}))}},function(e,t,r){"use strict";var n=t;n.length=function(e){var t=e.length;if(!t)return 0;for(var r=0;--t%4>1&&"="===e.charAt(t);)++r;return Math.ceil(3*e.length)/4-r};for(var o=new Array(64),i=new Array(123),s=0;s<64;)i[o[s]=s<26?s+65:s<52?s+71:s<62?s-4:s-59|43]=s++;n.encode=function(e,t,r){for(var n,i=null,s=[],a=0,c=0;t<r;){var u=e[t++];switch(c){case 0:s[a++]=o[u>>2],n=(3&u)<<4,c=1;break;case 1:s[a++]=o[n|u>>4],n=(15&u)<<2,c=2;break;case 2:s[a++]=o[n|u>>6],s[a++]=o[63&u],c=0}a>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,s)),a=0)}return c&&(s[a++]=o[n],s[a++]=61,1===c&&(s[a++]=61)),i?(a&&i.push(String.fromCharCode.apply(String,s.slice(0,a))),i.join("")):String.fromCharCode.apply(String,s.slice(0,a))};n.decode=function(e,t,r){for(var n,o=r,s=0,a=0;a<e.length;){var c=e.charCodeAt(a++);if(61===c&&s>1)break;if(void 0===(c=i[c]))throw Error("invalid encoding");switch(s){case 0:n=c,s=1;break;case 1:t[r++]=n<<2|(48&c)>>4,n=c,s=2;break;case 2:t[r++]=(15&n)<<4|(60&c)>>2,n=c,s=3;break;case 3:t[r++]=(3&n)<<6|c,s=0}}if(1===s)throw Error("invalid encoding");return r-o},n.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},function(e,t,r){"use strict";function n(){this._listeners={}}e.exports=n,n.prototype.on=function(e,t,r){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this}),this},n.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var r=this._listeners[e],n=0;n<r.length;)r[n].fn===t?r.splice(n,1):++n;return this},n.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var r=[],n=1;n<arguments.length;)r.push(arguments[n++]);for(n=0;n<t.length;)t[n].fn.apply(t[n++].ctx,r)}return this}},function(e,t,r){"use strict";function n(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),n=128===r[3];function o(e,n,o){t[0]=e,n[o]=r[0],n[o+1]=r[1],n[o+2]=r[2],n[o+3]=r[3]}function i(e,n,o){t[0]=e,n[o]=r[3],n[o+1]=r[2],n[o+2]=r[1],n[o+3]=r[0]}function s(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],t[0]}function a(e,n){return r[3]=e[n],r[2]=e[n+1],r[1]=e[n+2],r[0]=e[n+3],t[0]}e.writeFloatLE=n?o:i,e.writeFloatBE=n?i:o,e.readFloatLE=n?s:a,e.readFloatBE=n?a:s}():function(){function t(e,t,r,n){var o=t<0?1:0;if(o&&(t=-t),0===t)e(1/t>0?0:2147483648,r,n);else if(isNaN(t))e(2143289344,r,n);else if(t>34028234663852886e22)e((o<<31|2139095040)>>>0,r,n);else if(t<11754943508222875e-54)e((o<<31|Math.round(t/1401298464324817e-60))>>>0,r,n);else{var i=Math.floor(Math.log(t)/Math.LN2);e((o<<31|i+127<<23|8388607&Math.round(t*Math.pow(2,-i)*8388608))>>>0,r,n)}}function r(e,t,r){var n=e(t,r),o=2*(n>>31)+1,i=n>>>23&255,s=8388607&n;return 255===i?s?NaN:o*(1/0):0===i?1401298464324817e-60*o*s:o*Math.pow(2,i-150)*(s+8388608)}e.writeFloatLE=t.bind(null,o),e.writeFloatBE=t.bind(null,i),e.readFloatLE=r.bind(null,s),e.readFloatBE=r.bind(null,a)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),n=128===r[7];function o(e,n,o){t[0]=e,n[o]=r[0],n[o+1]=r[1],n[o+2]=r[2],n[o+3]=r[3],n[o+4]=r[4],n[o+5]=r[5],n[o+6]=r[6],n[o+7]=r[7]}function i(e,n,o){t[0]=e,n[o]=r[7],n[o+1]=r[6],n[o+2]=r[5],n[o+3]=r[4],n[o+4]=r[3],n[o+5]=r[2],n[o+6]=r[1],n[o+7]=r[0]}function s(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],r[4]=e[n+4],r[5]=e[n+5],r[6]=e[n+6],r[7]=e[n+7],t[0]}function a(e,n){return r[7]=e[n],r[6]=e[n+1],r[5]=e[n+2],r[4]=e[n+3],r[3]=e[n+4],r[2]=e[n+5],r[1]=e[n+6],r[0]=e[n+7],t[0]}e.writeDoubleLE=n?o:i,e.writeDoubleBE=n?i:o,e.readDoubleLE=n?s:a,e.readDoubleBE=n?a:s}():function(){function t(e,t,r,n,o,i){var s=n<0?1:0;if(s&&(n=-n),0===n)e(0,o,i+t),e(1/n>0?0:2147483648,o,i+r);else if(isNaN(n))e(0,o,i+t),e(2146959360,o,i+r);else if(n>17976931348623157e292)e(0,o,i+t),e((s<<31|2146435072)>>>0,o,i+r);else{var a;if(n<22250738585072014e-324)e((a=n/5e-324)>>>0,o,i+t),e((s<<31|a/4294967296)>>>0,o,i+r);else{var c=Math.floor(Math.log(n)/Math.LN2);1024===c&&(c=1023),e(4503599627370496*(a=n*Math.pow(2,-c))>>>0,o,i+t),e((s<<31|c+1023<<20|1048576*a&1048575)>>>0,o,i+r)}}}function r(e,t,r,n,o){var i=e(n,o+t),s=e(n,o+r),a=2*(s>>31)+1,c=s>>>20&2047,u=4294967296*(1048575&s)+i;return 2047===c?u?NaN:a*(1/0):0===c?5e-324*a*u:a*Math.pow(2,c-1075)*(u+4503599627370496)}e.writeDoubleLE=t.bind(null,o,0,4),e.writeDoubleBE=t.bind(null,i,4,0),e.readDoubleLE=r.bind(null,s,0,4),e.readDoubleBE=r.bind(null,a,4,0)}(),e}function o(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function i(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=255&e}function s(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function a(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=n(n)},function(module,exports,__webpack_require__){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},function(e,t,r){"use strict";var n=t;n.length=function(e){for(var t=0,r=0,n=0;n<e.length;++n)(r=e.charCodeAt(n))<128?t+=1:r<2048?t+=2:55296==(64512&r)&&56320==(64512&e.charCodeAt(n+1))?(++n,t+=4):t+=3;return t},n.read=function(e,t,r){if(r-t<1)return"";for(var n,o=null,i=[],s=0;t<r;)(n=e[t++])<128?i[s++]=n:n>191&&n<224?i[s++]=(31&n)<<6|63&e[t++]:n>239&&n<365?(n=((7&n)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,i[s++]=55296+(n>>10),i[s++]=56320+(1023&n)):i[s++]=(15&n)<<12|(63&e[t++])<<6|63&e[t++],s>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,i)),s=0);return o?(s&&o.push(String.fromCharCode.apply(String,i.slice(0,s))),o.join("")):String.fromCharCode.apply(String,i.slice(0,s))},n.write=function(e,t,r){for(var n,o,i=r,s=0;s<e.length;++s)(n=e.charCodeAt(s))<128?t[r++]=n:n<2048?(t[r++]=n>>6|192,t[r++]=63&n|128):55296==(64512&n)&&56320==(64512&(o=e.charCodeAt(s+1)))?(n=65536+((1023&n)<<10)+(1023&o),++s,t[r++]=n>>18|240,t[r++]=n>>12&63|128,t[r++]=n>>6&63|128,t[r++]=63&n|128):(t[r++]=n>>12|224,t[r++]=n>>6&63|128,t[r++]=63&n|128);return r-i}},function(e,t,r){"use strict";e.exports=function(e,t,r){var n=r||8192,o=n>>>1,i=null,s=n;return function(r){if(r<1||r>o)return e(r);s+r>n&&(i=e(n),s=0);var a=t.call(i,s,s+=r);return 7&s&&(s=1+(7|s)),a}}},function(e,t,r){"use strict";e.exports=o;var n=r(1);function o(e,t){this.lo=e>>>0,this.hi=t>>>0}var i=o.zero=new o(0,0);i.toNumber=function(){return 0},i.zzEncode=i.zzDecode=function(){return this},i.length=function(){return 1};var s=o.zeroHash="\0\0\0\0\0\0\0\0";o.fromNumber=function(e){if(0===e)return i;var t=e<0;t&&(e=-e);var r=e>>>0,n=(e-r)/4294967296>>>0;return t&&(n=~n>>>0,r=~r>>>0,++r>4294967295&&(r=0,++n>4294967295&&(n=0))),new o(r,n)},o.from=function(e){if("number"==typeof e)return o.fromNumber(e);if(n.isString(e)){if(!n.Long)return o.fromNumber(parseInt(e,10));e=n.Long.fromString(e)}return e.low||e.high?new o(e.low>>>0,e.high>>>0):i},o.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+4294967296*r)}return this.lo+4294967296*this.hi},o.prototype.toLong=function(e){return n.Long?new n.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var a=String.prototype.charCodeAt;o.fromHash=function(e){return e===s?i:new o((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},o.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},o.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},o.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},o.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10}},function(e,t,r){"use strict";e.exports=i;var n=r(28);(i.prototype=Object.create(n.prototype)).constructor=i;var o=r(1);function i(){n.call(this)}function s(e,t,r){e.length<40?o.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}i._configure=function(){i.alloc=o._Buffer_allocUnsafe,i.writeBytesBuffer=o.Buffer&&o.Buffer.prototype instanceof Uint8Array&&"set"===o.Buffer.prototype.set.name?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var n=0;n<e.length;)t[r++]=e[n++]}},i.prototype.bytes=function(e){o.isString(e)&&(e=o._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(i.writeBytesBuffer,t,e),this},i.prototype.string=function(e){var t=o.Buffer.byteLength(e);return this.uint32(t),t&&this._push(s,t,e),this},i._configure()},function(e,t,r){"use strict";e.exports=i;var n=r(30);(i.prototype=Object.create(n.prototype)).constructor=i;var o=r(1);function i(e){n.call(this,e)}i._configure=function(){o.Buffer&&(i.prototype._slice=o.Buffer.prototype.slice)},i.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},i._configure()},function(e,t,r){"use strict";t.Service=r(66)},function(e,t,r){"use strict";e.exports=o;var n=r(1);function o(e,t,r){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");n.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(r)}(o.prototype=Object.create(n.EventEmitter.prototype)).constructor=o,o.prototype.rpcCall=function e(t,r,o,i,s){if(!i)throw TypeError("request must be specified");var a=this;if(!s)return n.asPromise(e,a,t,r,o,i);if(a.rpcImpl)try{return a.rpcImpl(t,r[a.requestDelimited?"encodeDelimited":"encode"](i).finish(),(function(e,r){if(e)return a.emit("error",e,t),s(e);if(null!==r){if(!(r instanceof o))try{r=o[a.responseDelimited?"decodeDelimited":"decode"](r)}catch(e){return a.emit("error",e,t),s(e)}return a.emit("data",r,t),s(null,r)}a.end(!0)}))}catch(e){return a.emit("error",e,t),void setTimeout((function(){s(e)}),0)}else setTimeout((function(){s(Error("already ended"))}),0)},o.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},function(e,t,r){"use strict";e.exports={}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},a=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0});var c=r(69),u=r(8),l=r(76),p=r(96),f=r(43),d=r(97),h=function(e){function t(t){var r=e.call(this)||this;return r._appId="",r._appKey="",r._environment="production",r._socketUrl="/",r._socketOptions={transports:["websocket"],parser:c,path:"/im/"},r._bufferedInBoundPackets=[],r._bufferedOutBoundPackets=[],r._onSocketConnect=r._onSocketConnect.bind(r),r._onSocketConnectError=r._onSocketConnectError.bind(r),r._onSocketDisconnect=r._onSocketDisconnect.bind(r),r._onSocketPacket=r._onSocketPacket.bind(r),r._onSocketOnEvent=r._onSocketOnEvent.bind(r),r._setOptions(t),r._createConnection(),r}return o(t,e),Object.defineProperty(t.prototype,"environment",{get:function(){return this._environment},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"connected",{get:function(){return this._socket.connected},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"appId",{get:function(){return this._appId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"appKey",{get:function(){return this._appKey},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sessionId",{get:function(){return this._socket.id},enumerable:!1,configurable:!0}),t.prototype.connect=function(){this._socket.connect()},t.prototype.disconnect=function(){this._socket.disconnect()},t.prototype.sendPacket=function(e){this.connected?this._writeToSocket(e):this._bufferedOutBoundPackets.push(e)},t.prototype._setOptions=function(e){null!=e&&(void 0!==e.environment&&(this._environment=e.environment,"development"===e.environment&&this._setOptions(p.development),"production"===e.environment&&this._setOptions(p.production)),void 0!==e.appId&&(this._appId=e.appId),void 0!==e.appKey&&(this._appKey=e.appKey),void 0!==e.autoConnect&&(this._socketOptions.autoConnect=e.autoConnect),void 0!==e.socketUrl&&(this._socketUrl=e.socketUrl))},t.prototype._createConnection=function(){this._socket=l(this._socketUrl,this._socketOptions),this._socket.on("connect",this._onSocketConnect),this._socket.on("connect_error",this._onSocketConnectError),this._socket.on("disconnect",this._onSocketDisconnect),this._socket.onevent=this._onSocketOnEvent},t.prototype._emitBufferedInBoundPackets=function(){var e,t;try{for(var r=i(this._bufferedInBoundPackets),n=r.next();!n.done;n=r.next()){var o=n.value;this._onSocketPacket(o)}}catch(t){e={error:t}}finally{try{n&&!n.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}this._bufferedInBoundPackets=[]},t.prototype._writeBufferedOutBoundPackets=function(){var e,t;try{for(var r=i(this._bufferedOutBoundPackets),n=r.next();!n.done;n=r.next()){var o=n.value;this._writeToSocket(o)}}catch(t){e={error:t}}finally{try{n&&!n.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}this._bufferedOutBoundPackets=[]},t.prototype._writeToSocket=function(e){var t;e.isBinary()?this._socket.binary(!0).emit(e.event,d.default.encode(e.body)):e.isEvent()&&(t=this._socket).emit.apply(t,a([e.event],s(e.args)))},t.prototype._onSocketConnect=function(){this.emit("connect"),this._emitBufferedInBoundPackets(),this._writeBufferedOutBoundPackets()},t.prototype._onSocketConnectError=function(e){this.emit("connect_error",e)},t.prototype._onSocketDisconnect=function(e){this.emit("disconnect",e)},t.prototype._onSocketPacket=function(e){this.emit("packet",e)},t.prototype._onSocketOnEvent=function(e){if(e&&e.data&&e.data.length>=1){var t,r=e.data[0],n=e.data.slice(1);t=void 0!==n[0]&&null!==n[0]&&"number"==typeof n[0].cmd&&void 0!==n[0].body?f.default.createBinaryPacket(r,n[0].cmd,n[0].subType,d.default.decode(n[0].body)):f.default.createEventPacket.apply(f.default,a([r],s(n))),this.connected?this._onSocketPacket(t):this._bufferedInBoundPackets.push(t)}},t}(u.EventEmitter);t.default=h},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Encoder=t.Decoder=t.BINARY_ACK=t.BINARY_EVENT=t.ERROR=t.ACK=t.EVENT=t.DISCONNECT=t.CONNECT=t.types=t.protocol=void 0;var a=r(8),c=r(9);t.protocol=4,t.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],t.CONNECT=0,t.DISCONNECT=1,t.EVENT=2,t.ACK=3,t.ERROR=4,t.BINARY_EVENT=5,t.BINARY_ACK=6,t.Decoder=c.Decoder;var u=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return o(r,e),r.prototype.encode=function(e,r){return i(this,void 0,void 0,(function(){var n;return s(this,(function(o){switch(o.label){case 0:return e.type!==t.BINARY_EVENT&&e.type!==t.BINARY_ACK?[3,2]:[4,this.encodeAsBinary(e)];case 1:return n=o.sent(),[3,4];case 2:return[4,this.encodeAsString(e)];case 3:n=o.sent(),o.label=4;case 4:return r(n),[2,n]}}))}))},r.prototype.encodeAsString=function(e){return i(this,void 0,void 0,(function(){var n;return s(this,(function(o){if(n=""+e.type,e.type!==t.BINARY_EVENT&&e.type!==t.BINARY_ACK||(n+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(n+=e.nsp+","),void 0!==e.id&&null!==e.id&&(n+=e.id),void 0!==e.data&&null!==e.data)try{n+=JSON.stringify(e.data)}catch(e){return[2,[r.ERROR_PACKET]]}return[2,[n]]}))}))},r.prototype.encodeAsBinary=function(e){return i(this,void 0,void 0,(function(){var t;return s(this,(function(r){switch(r.label){case 0:return t=[e.data[1]],e.attachments=1,e.data=[e.data[0],{_placeholder:!0,num:0}],[4,this.encodeAsString(e)];case 1:return[2,r.sent().concat(t)]}}))}))},r.ERROR_PACKET=t.ERROR+'"encode error"',r}(a.EventEmitter);t.Encoder=u},function(e,t,r){(function(n){function o(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==n&&"env"in n&&(e=n.env.DEBUG),e}(t=e.exports=r(71)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var r=this.useColors;if(e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+t.humanize(this.diff),!r)return;var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var o=0,i=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(o++,"%c"===e&&(i=o))})),e.splice(i,0,n)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=o,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(o())}).call(this,r(17))},function(e,t,r){function n(e){var r;function n(){if(n.enabled){var e=n,o=+new Date,i=o-(r||o);e.diff=i,e.prev=r,e.curr=o,r=o;for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=t.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var c=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,(function(r,n){if("%%"===r)return r;c++;var o=t.formatters[n];if("function"==typeof o){var i=s[c];r=o.call(e,i),s.splice(c,1),c--}return r})),t.formatArgs.call(e,s);var u=n.log||t.log||void 0;u.apply(e,s)}}return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=function(e){var r,n=0;for(r in e)n=(n<<5)-n+e.charCodeAt(r),n|=0;return t.colors[Math.abs(n)%t.colors.length]}(e),n.destroy=o,"function"==typeof t.init&&t.init(n),t.instances.push(n),n}function o(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=n.debug=n.default=n).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var r;t.save(e),t.names=[],t.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),o=n.length;for(r=0;r<o;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(r=0;r<t.instances.length;r++){var i=t.instances[r];i.enabled=t.enabled(i.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(18),t.instances=[],t.names=[],t.skips=[],t.formatters={}},function(e,t,r){var n=r(31),o=r(32),i=Object.prototype.toString,s="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===i.call(Blob),a="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===i.call(File);t.deconstructPacket=function(e){var t=[],r=e.data,i=e;return i.data=function e(t,r){if(!t)return t;if(o(t)){var i={_placeholder:!0,num:r.length};return r.push(t),i}if(n(t)){for(var s=new Array(t.length),a=0;a<t.length;a++)s[a]=e(t[a],r);return s}if("object"==typeof t&&!(t instanceof Date)){s={};for(var c in t)s[c]=e(t[c],r);return s}return t}(r,t),i.attachments=t.length,{packet:i,buffers:t}},t.reconstructPacket=function(e,t){return e.data=function e(t,r){if(!t)return t;if(t&&t._placeholder)return r[t.num];if(n(t))for(var o=0;o<t.length;o++)t[o]=e(t[o],r);else if("object"==typeof t)for(var i in t)t[i]=e(t[i],r);return t}(e.data,t),e.attachments=void 0,e},t.removeBlobs=function(e,t){var r=0,i=e;!function e(c,u,l){if(!c)return c;if(s&&c instanceof Blob||a&&c instanceof File){r++;var p=new FileReader;p.onload=function(){l?l[u]=this.result:i=this.result,--r||t(i)},p.readAsArrayBuffer(c)}else if(n(c))for(var f=0;f<c.length;f++)e(c[f],f,c);else if("object"==typeof c&&!o(c))for(var d in c)e(c[d],d,c)}(i),r||t(i)}},function(e,t,r){"use strict";t.byteLength=function(e){var t=u(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,n=u(e),s=n[0],a=n[1],c=new i(function(e,t,r){return 3*(t+r)/4-r}(0,s,a)),l=0,p=a>0?s-4:s;for(r=0;r<p;r+=4)t=o[e.charCodeAt(r)]<<18|o[e.charCodeAt(r+1)]<<12|o[e.charCodeAt(r+2)]<<6|o[e.charCodeAt(r+3)],c[l++]=t>>16&255,c[l++]=t>>8&255,c[l++]=255&t;2===a&&(t=o[e.charCodeAt(r)]<<2|o[e.charCodeAt(r+1)]>>4,c[l++]=255&t);1===a&&(t=o[e.charCodeAt(r)]<<10|o[e.charCodeAt(r+1)]<<4|o[e.charCodeAt(r+2)]>>2,c[l++]=t>>8&255,c[l++]=255&t);return c},t.fromByteArray=function(e){for(var t,r=e.length,o=r%3,i=[],s=0,a=r-o;s<a;s+=16383)i.push(l(e,s,s+16383>a?a:s+16383));1===o?(t=e[r-1],i.push(n[t>>2]+n[t<<4&63]+"==")):2===o&&(t=(e[r-2]<<8)+e[r-1],i.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return i.join("")};for(var n=[],o=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,c=s.length;a<c;++a)n[a]=s[a],o[s.charCodeAt(a)]=a;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function l(e,t,r){for(var o,i,s=[],a=t;a<r;a+=3)o=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(n[(i=o)>>18&63]+n[i>>12&63]+n[i>>6&63]+n[63&i]);return s.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,r,n,o){var i,s,a=8*o-n-1,c=(1<<a)-1,u=c>>1,l=-7,p=r?o-1:0,f=r?-1:1,d=e[t+p];for(p+=f,i=d&(1<<-l)-1,d>>=-l,l+=a;l>0;i=256*i+e[t+p],p+=f,l-=8);for(s=i&(1<<-l)-1,i>>=-l,l+=n;l>0;s=256*s+e[t+p],p+=f,l-=8);if(0===i)i=1-u;else{if(i===c)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,n),i-=u}return(d?-1:1)*s*Math.pow(2,i-n)},t.write=function(e,t,r,n,o,i){var s,a,c,u=8*i-o-1,l=(1<<u)-1,p=l>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:i-1,h=n?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),(t+=s+p>=1?f/c:f*Math.pow(2,1-p))*c>=2&&(s++,c/=2),s+p>=l?(a=0,s=l):s+p>=1?(a=(t*c-1)*Math.pow(2,o),s+=p):(a=t*Math.pow(2,p-1)*Math.pow(2,o),s=0));o>=8;e[r+d]=255&a,d+=h,a/=256,o-=8);for(s=s<<o|a,u+=o;u>0;e[r+d]=255&s,d+=h,s/=256,u-=8);e[r+d-h]|=128*g}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,r){var n=r(77),o=r(9),i=r(34),s=r(11)("socket.io-client");e.exports=t=c;var a=t.managers={};function c(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,o=n(e),c=o.source,u=o.id,l=o.path,p=a[u]&&l in a[u].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||p?(s("ignoring socket cache for %s",c),r=i(c,t)):(a[u]||(s("new io instance for %s",c),a[u]=i(c,t)),r=a[u]),o.query&&!t.query&&(t.query=o.query),r.socket(o.path,t)}t.protocol=o.protocol,t.connect=c,t.Manager=r(34),t.Socket=r(40)},function(e,t,r){var n=r(33),o=r(11)("socket.io-client:url");e.exports=function(e,t){var r=e;t=t||"undefined"!=typeof location&&location,null==e&&(e=t.protocol+"//"+t.host);"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?t.protocol+e:t.host+e),/^(https?|wss?):\/\//.test(e)||(o("protocol-less url %s",e),e=void 0!==t?t.protocol+"//"+e:"https://"+e),o("parse %s",e),r=n(e));r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443"));r.path=r.path||"/";var i=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port,r.href=r.protocol+"://"+i+(t&&t.port===r.port?"":":"+r.port),r}},function(e,t,r){function n(e){var r;function n(){if(n.enabled){var e=n,o=+new Date,i=o-(r||o);e.diff=i,e.prev=r,e.curr=o,r=o;for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=t.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var c=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,(function(r,n){if("%%"===r)return r;c++;var o=t.formatters[n];if("function"==typeof o){var i=s[c];r=o.call(e,i),s.splice(c,1),c--}return r})),t.formatArgs.call(e,s);var u=n.log||t.log||void 0;u.apply(e,s)}}return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=function(e){var r,n=0;for(r in e)n=(n<<5)-n+e.charCodeAt(r),n|=0;return t.colors[Math.abs(n)%t.colors.length]}(e),n.destroy=o,"function"==typeof t.init&&t.init(n),t.instances.push(n),n}function o(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=n.debug=n.default=n).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var r;t.save(e),t.names=[],t.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),o=n.length;for(r=0;r<o;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(r=0;r<t.instances.length;r++){var i=t.instances[r];i.enabled=t.enabled(i.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(18),t.instances=[],t.names=[],t.skips=[],t.formatters={}},function(e,t,r){e.exports=r(80),e.exports.parser=r(3)},function(e,t,r){var n=r(35),o=r(2),i=r(14)("engine.io-client:socket"),s=r(39),a=r(3),c=r(33),u=r(12);function l(e,t){if(!(this instanceof l))return new l(e,t);t=t||{},e&&"object"==typeof e&&(t=e,e=null),e?(e=c(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=c(t.host).host),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.agent=t.agent||!1,this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=u.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.withCredentials=!1!==t.withCredentials,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.transportOptions=t.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.perMessageDeflate=!1!==t.perMessageDeflate&&(t.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=t.pfx||void 0,this.key=t.key||void 0,this.passphrase=t.passphrase||void 0,this.cert=t.cert||void 0,this.ca=t.ca||void 0,this.ciphers=t.ciphers||void 0,this.rejectUnauthorized=void 0===t.rejectUnauthorized||t.rejectUnauthorized,this.forceNode=!!t.forceNode,this.isReactNative="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),("undefined"==typeof self||this.isReactNative)&&(t.extraHeaders&&Object.keys(t.extraHeaders).length>0&&(this.extraHeaders=t.extraHeaders),t.localAddress&&(this.localAddress=t.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}e.exports=l,l.priorWebsocketSuccess=!1,o(l.prototype),l.protocol=a.protocol,l.Socket=l,l.Transport=r(21),l.transports=r(35),l.parser=r(3),l.prototype.createTransport=function(e){i('creating transport "%s"',e);var t=function(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}(this.query);t.EIO=a.protocol,t.transport=e;var r=this.transportOptions[e]||{};return this.id&&(t.sid=this.id),new n[e]({query:t,socket:this,agent:r.agent||this.agent,hostname:r.hostname||this.hostname,port:r.port||this.port,secure:r.secure||this.secure,path:r.path||this.path,forceJSONP:r.forceJSONP||this.forceJSONP,jsonp:r.jsonp||this.jsonp,forceBase64:r.forceBase64||this.forceBase64,enablesXDR:r.enablesXDR||this.enablesXDR,withCredentials:r.withCredentials||this.withCredentials,timestampRequests:r.timestampRequests||this.timestampRequests,timestampParam:r.timestampParam||this.timestampParam,policyPort:r.policyPort||this.policyPort,pfx:r.pfx||this.pfx,key:r.key||this.key,passphrase:r.passphrase||this.passphrase,cert:r.cert||this.cert,ca:r.ca||this.ca,ciphers:r.ciphers||this.ciphers,rejectUnauthorized:r.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:r.perMessageDeflate||this.perMessageDeflate,extraHeaders:r.extraHeaders||this.extraHeaders,forceNode:r.forceNode||this.forceNode,localAddress:r.localAddress||this.localAddress,requestTimeout:r.requestTimeout||this.requestTimeout,protocols:r.protocols||void 0,isReactNative:this.isReactNative})},l.prototype.open=function(){var e;if(this.rememberUpgrade&&l.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout((function(){t.emit("error","No transports available")}),0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},l.prototype.setTransport=function(e){i("setting transport %s",e.name);var t=this;this.transport&&(i("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",(function(){t.onDrain()})).on("packet",(function(e){t.onPacket(e)})).on("error",(function(e){t.onError(e)})).on("close",(function(){t.onClose("transport close")}))},l.prototype.probe=function(e){i('probing transport "%s"',e);var t=this.createTransport(e,{probe:1}),r=!1,n=this;function o(){if(n.onlyBinaryUpgrades){var o=!this.supportsBinary&&n.transport.supportsBinary;r=r||o}r||(i('probe transport "%s" opened',e),t.send([{type:"ping",data:"probe"}]),t.once("packet",(function(o){if(!r)if("pong"===o.type&&"probe"===o.data){if(i('probe transport "%s" pong',e),n.upgrading=!0,n.emit("upgrading",t),!t)return;l.priorWebsocketSuccess="websocket"===t.name,i('pausing current transport "%s"',n.transport.name),n.transport.pause((function(){r||"closed"!==n.readyState&&(i("changing transport and sending upgrade packet"),f(),n.setTransport(t),t.send([{type:"upgrade"}]),n.emit("upgrade",t),t=null,n.upgrading=!1,n.flush())}))}else{i('probe transport "%s" failed',e);var s=new Error("probe error");s.transport=t.name,n.emit("upgradeError",s)}})))}function s(){r||(r=!0,f(),t.close(),t=null)}function a(r){var o=new Error("probe error: "+r);o.transport=t.name,s(),i('probe transport "%s" failed because of error: %s',e,r),n.emit("upgradeError",o)}function c(){a("transport closed")}function u(){a("socket closed")}function p(e){t&&e.name!==t.name&&(i('"%s" works - aborting "%s"',e.name,t.name),s())}function f(){t.removeListener("open",o),t.removeListener("error",a),t.removeListener("close",c),n.removeListener("close",u),n.removeListener("upgrading",p)}l.priorWebsocketSuccess=!1,t.once("open",o),t.once("error",a),t.once("close",c),this.once("close",u),this.once("upgrading",p),t.open()},l.prototype.onOpen=function(){if(i("socket open"),this.readyState="open",l.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){i("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},l.prototype.onPacket=function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(i('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else i('packet received with socket readyState "%s"',this.readyState)},l.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},l.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout((function(){"closed"!==t.readyState&&t.onClose("ping timeout")}),e||t.pingInterval+t.pingTimeout)},l.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout((function(){i("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)}),e.pingInterval)},l.prototype.ping=function(){var e=this;this.sendPacket("ping",(function(){e.emit("ping")}))},l.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},l.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(i("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},l.prototype.write=l.prototype.send=function(e,t,r){return this.sendPacket("message",e,t,r),this},l.prototype.sendPacket=function(e,t,r,n){if("function"==typeof t&&(n=t,t=void 0),"function"==typeof r&&(n=r,r=null),"closing"!==this.readyState&&"closed"!==this.readyState){(r=r||{}).compress=!1!==r.compress;var o={type:e,data:t,options:r};this.emit("packetCreate",o),this.writeBuffer.push(o),n&&this.once("flush",n),this.flush()}},l.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var e=this;this.writeBuffer.length?this.once("drain",(function(){this.upgrading?n():t()})):this.upgrading?n():t()}function t(){e.onClose("forced close"),i("socket closing - telling transport to close"),e.transport.close()}function r(){e.removeListener("upgrade",r),e.removeListener("upgradeError",r),t()}function n(){e.once("upgrade",r),e.once("upgradeError",r)}return this},l.prototype.onError=function(e){i("socket error %j",e),l.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},l.prototype.onClose=function(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){i('socket close with reason: "%s"',e);clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),this.writeBuffer=[],this.prevBufferLen=0}},l.prototype.filterUpgrades=function(e){for(var t=[],r=0,n=e.length;r<n;r++)~s(this.transports,e[r])&&t.push(e[r]);return t}},function(e,t){try{e.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){e.exports=!1}},function(e,t,r){var n=r(19),o=r(36),i=r(2),s=r(13),a=r(14)("engine.io-client:polling-xhr"),c=r(20);function u(){}function l(e){if(o.call(this,e),this.requestTimeout=e.requestTimeout,this.extraHeaders=e.extraHeaders,"undefined"!=typeof location){var t="https:"===location.protocol,r=location.port;r||(r=t?443:80),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||r!==e.port,this.xs=e.secure!==t}}function p(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.withCredentials=e.withCredentials,this.requestTimeout=e.requestTimeout,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}if(e.exports=l,e.exports.Request=p,s(l,o),l.prototype.supportsBinary=!0,l.prototype.request=function(e){return(e=e||{}).uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.withCredentials=this.withCredentials,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.requestTimeout=this.requestTimeout,e.extraHeaders=this.extraHeaders,new p(e)},l.prototype.doWrite=function(e,t){var r="string"!=typeof e&&void 0!==e,n=this.request({method:"POST",data:e,isBinary:r}),o=this;n.on("success",t),n.on("error",(function(e){o.onError("xhr post error",e)})),this.sendXhr=n},l.prototype.doPoll=function(){a("xhr poll");var e=this.request(),t=this;e.on("data",(function(e){t.onData(e)})),e.on("error",(function(e){t.onError("xhr poll error",e)})),this.pollXhr=e},i(p.prototype),p.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var t=this.xhr=new n(e),r=this;try{a("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var o in t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(o)&&t.setRequestHeader(o,this.extraHeaders[o])}catch(e){}if("POST"===this.method)try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{t.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in t&&(t.withCredentials=this.withCredentials),this.requestTimeout&&(t.timeout=this.requestTimeout),this.hasXDR()?(t.onload=function(){r.onLoad()},t.onerror=function(){r.onError(t.responseText)}):t.onreadystatechange=function(){if(2===t.readyState)try{var e=t.getResponseHeader("Content-Type");(r.supportsBinary&&"application/octet-stream"===e||"application/octet-stream; charset=UTF-8"===e)&&(t.responseType="arraybuffer")}catch(e){}4===t.readyState&&(200===t.status||1223===t.status?r.onLoad():setTimeout((function(){r.onError("number"==typeof t.status?t.status:0)}),0))},a("xhr data %s",this.data),t.send(this.data)}catch(e){return void setTimeout((function(){r.onError(e)}),0)}"undefined"!=typeof document&&(this.index=p.requestsCount++,p.requests[this.index]=this)},p.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},p.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},p.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},p.prototype.cleanup=function(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=u:this.xhr.onreadystatechange=u,e)try{this.xhr.abort()}catch(e){}"undefined"!=typeof document&&delete p.requests[this.index],this.xhr=null}},p.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type")}catch(e){}e=("application/octet-stream"===t||"application/octet-stream; charset=UTF-8"===t)&&this.xhr.response||this.xhr.responseText}catch(e){this.onError(e)}null!=e&&this.onData(e)},p.prototype.hasXDR=function(){return"undefined"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR},p.prototype.abort=function(){this.cleanup()},p.requestsCount=0,p.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",f);else if("function"==typeof addEventListener){addEventListener("onpagehide"in c?"pagehide":"unload",f,!1)}function f(){for(var e in p.requests)p.requests.hasOwnProperty(e)&&p.requests[e].abort()}},function(e,t){e.exports=Object.keys||function(e){var t=[],r=Object.prototype.hasOwnProperty;for(var n in e)r.call(e,n)&&t.push(n);return t}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t){e.exports=function(e,t,r){var n=e.byteLength;if(t=t||0,r=r||n,e.slice)return e.slice(t,r);if(t<0&&(t+=n),r<0&&(r+=n),r>n&&(r=n),t>=n||t>=r||0===n)return new ArrayBuffer(0);for(var o=new Uint8Array(e),i=new Uint8Array(r-t),s=t,a=0;s<r;s++,a++)i[a]=o[s];return i.buffer}},function(e,t){function r(){}e.exports=function(e,t,n){var o=!1;return n=n||r,i.count=e,0===e?t():i;function i(e,r){if(i.count<=0)throw new Error("after called too many times");--i.count,e?(o=!0,t(e),t=n):0!==i.count||o||t(null,r)}}},function(e,t){var r,n,o,i=String.fromCharCode;function s(e){for(var t,r,n=[],o=0,i=e.length;o<i;)(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<i?56320==(64512&(r=e.charCodeAt(o++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),o--):n.push(t);return n}function a(e,t){if(e>=55296&&e<=57343){if(t)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function c(e,t){return i(e>>t&63|128)}function u(e,t){if(0==(4294967168&e))return i(e);var r="";return 0==(4294965248&e)?r=i(e>>6&31|192):0==(4294901760&e)?(a(e,t)||(e=65533),r=i(e>>12&15|224),r+=c(e,6)):0==(4292870144&e)&&(r=i(e>>18&7|240),r+=c(e,12),r+=c(e,6)),r+=i(63&e|128)}function l(){if(o>=n)throw Error("Invalid byte index");var e=255&r[o];if(o++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function p(e){var t,i;if(o>n)throw Error("Invalid byte index");if(o==n)return!1;if(t=255&r[o],o++,0==(128&t))return t;if(192==(224&t)){if((i=(31&t)<<6|l())>=128)return i;throw Error("Invalid continuation byte")}if(224==(240&t)){if((i=(15&t)<<12|l()<<6|l())>=2048)return a(i,e)?i:65533;throw Error("Invalid continuation byte")}if(240==(248&t)&&(i=(7&t)<<18|l()<<12|l()<<6|l())>=65536&&i<=1114111)return i;throw Error("Invalid UTF-8 detected")}e.exports={version:"2.1.2",encode:function(e,t){for(var r=!1!==(t=t||{}).strict,n=s(e),o=n.length,i=-1,a="";++i<o;)a+=u(n[i],r);return a},decode:function(e,t){var a=!1!==(t=t||{}).strict;r=s(e),n=r.length,o=0;for(var c,u=[];!1!==(c=p(a));)u.push(c);return function(e){for(var t,r=e.length,n=-1,o="";++n<r;)(t=e[n])>65535&&(o+=i((t-=65536)>>>10&1023|55296),t=56320|1023&t),o+=i(t);return o}(u)}}},function(e,t){!function(e){"use strict";t.encode=function(t){var r,n=new Uint8Array(t),o=n.length,i="";for(r=0;r<o;r+=3)i+=e[n[r]>>2],i+=e[(3&n[r])<<4|n[r+1]>>4],i+=e[(15&n[r+1])<<2|n[r+2]>>6],i+=e[63&n[r+2]];return o%3==2?i=i.substring(0,i.length-1)+"=":o%3==1&&(i=i.substring(0,i.length-2)+"=="),i},t.decode=function(t){var r,n,o,i,s,a=.75*t.length,c=t.length,u=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var l=new ArrayBuffer(a),p=new Uint8Array(l);for(r=0;r<c;r+=4)n=e.indexOf(t[r]),o=e.indexOf(t[r+1]),i=e.indexOf(t[r+2]),s=e.indexOf(t[r+3]),p[u++]=n<<2|o>>4,p[u++]=(15&o)<<4|i>>2,p[u++]=(3&i)<<6|63&s;return l}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},function(e,t){var r=void 0!==r?r:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder&&MozBlobBuilder,n=function(){try{return 2===new Blob(["hi"]).size}catch(e){return!1}}(),o=n&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(e){return!1}}(),i=r&&r.prototype.append&&r.prototype.getBlob;function s(e){return e.map((function(e){if(e.buffer instanceof ArrayBuffer){var t=e.buffer;if(e.byteLength!==t.byteLength){var r=new Uint8Array(e.byteLength);r.set(new Uint8Array(t,e.byteOffset,e.byteLength)),t=r.buffer}return t}return e}))}function a(e,t){t=t||{};var n=new r;return s(e).forEach((function(e){n.append(e)})),t.type?n.getBlob(t.type):n.getBlob()}function c(e,t){return new Blob(s(e),t||{})}"undefined"!=typeof Blob&&(a.prototype=Blob.prototype,c.prototype=Blob.prototype),e.exports=n?o?Blob:c:i?a:void 0},function(e,t,r){function n(e){var r;function n(){if(n.enabled){var e=n,o=+new Date,i=o-(r||o);e.diff=i,e.prev=r,e.curr=o,r=o;for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=t.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var c=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,(function(r,n){if("%%"===r)return r;c++;var o=t.formatters[n];if("function"==typeof o){var i=s[c];r=o.call(e,i),s.splice(c,1),c--}return r})),t.formatArgs.call(e,s);var u=n.log||t.log||void 0;u.apply(e,s)}}return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=function(e){var r,n=0;for(r in e)n=(n<<5)-n+e.charCodeAt(r),n|=0;return t.colors[Math.abs(n)%t.colors.length]}(e),n.destroy=o,"function"==typeof t.init&&t.init(n),t.instances.push(n),n}function o(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=n.debug=n.default=n).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var r;t.save(e),t.names=[],t.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),o=n.length;for(r=0;r<o;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(r=0;r<t.instances.length;r++){var i=t.instances[r];i.enabled=t.enabled(i.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(18),t.instances=[],t.names=[],t.skips=[],t.formatters={}},function(e,t,r){var n=r(36),o=r(13),i=r(20);e.exports=l;var s,a=/\n/g,c=/\\n/g;function u(){}function l(e){n.call(this,e),this.query=this.query||{},s||(s=i.___eio=i.___eio||[]),this.index=s.length;var t=this;s.push((function(e){t.onData(e)})),this.query.j=this.index,"function"==typeof addEventListener&&addEventListener("beforeunload",(function(){t.script&&(t.script.onerror=u)}),!1)}o(l,n),l.prototype.supportsBinary=!1,l.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),n.prototype.doClose.call(this)},l.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var r=document.getElementsByTagName("script")[0];r?r.parentNode.insertBefore(t,r):(document.head||document.body).appendChild(t),this.script=t,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout((function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)}),100)},l.prototype.doWrite=function(e,t){var r=this;if(!this.form){var n,o=document.createElement("form"),i=document.createElement("textarea"),s=this.iframeId="eio_iframe_"+this.index;o.className="socketio",o.style.position="absolute",o.style.top="-1000px",o.style.left="-1000px",o.target=s,o.method="POST",o.setAttribute("accept-charset","utf-8"),i.name="d",o.appendChild(i),document.body.appendChild(o),this.form=o,this.area=i}function u(){l(),t()}function l(){if(r.iframe)try{r.form.removeChild(r.iframe)}catch(e){r.onError("jsonp polling iframe removal error",e)}try{var e='<iframe src="javascript:0" name="'+r.iframeId+'">';n=document.createElement(e)}catch(e){(n=document.createElement("iframe")).name=r.iframeId,n.src="javascript:0"}n.id=r.iframeId,r.form.appendChild(n),r.iframe=n}this.form.action=this.uri(),l(),e=e.replace(c,"\\\n"),this.area.value=e.replace(a,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===r.iframe.readyState&&u()}:this.iframe.onload=u}},function(e,t,r){(function(t){var n,o,i=r(21),s=r(3),a=r(12),c=r(13),u=r(38),l=r(14)("engine.io-client:websocket");if("undefined"!=typeof WebSocket?n=WebSocket:"undefined"!=typeof self&&(n=self.WebSocket||self.MozWebSocket),"undefined"==typeof window)try{o=r(93)}catch(e){}var p=n||o;function f(e){e&&e.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,this.usingBrowserWebSocket=n&&!e.forceNode,this.protocols=e.protocols,this.usingBrowserWebSocket||(p=o),i.call(this,e)}e.exports=f,c(f,i),f.prototype.name="websocket",f.prototype.supportsBinary=!0,f.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=this.protocols,r={};this.isReactNative||(r.agent=this.agent,r.perMessageDeflate=this.perMessageDeflate,r.pfx=this.pfx,r.key=this.key,r.passphrase=this.passphrase,r.cert=this.cert,r.ca=this.ca,r.ciphers=this.ciphers,r.rejectUnauthorized=this.rejectUnauthorized),this.extraHeaders&&(r.headers=this.extraHeaders),this.localAddress&&(r.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?t?new p(e,t):new p(e):new p(e,t,r)}catch(e){return this.emit("error",e)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},f.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},f.prototype.write=function(e){var r=this;this.writable=!1;for(var n=e.length,o=0,i=n;o<i;o++)!function(e){s.encodePacket(e,r.supportsBinary,(function(o){if(!r.usingBrowserWebSocket){var i={};if(e.options&&(i.compress=e.options.compress),r.perMessageDeflate)("string"==typeof o?t.byteLength(o):o.length)<r.perMessageDeflate.threshold&&(i.compress=!1)}try{r.usingBrowserWebSocket?r.ws.send(o):r.ws.send(o,i)}catch(e){l("websocket closed before onclose event")}--n||a()}))}(e[o]);function a(){r.emit("flush"),setTimeout((function(){r.writable=!0,r.emit("drain")}),0)}},f.prototype.onClose=function(){i.prototype.onClose.call(this)},f.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},f.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",r="";return this.port&&("wss"===t&&443!==Number(this.port)||"ws"===t&&80!==Number(this.port))&&(r=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=u()),this.supportsBinary||(e.b64=1),(e=a.encode(e)).length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+r+this.path+e},f.prototype.check=function(){return!(!p||"__initialize"in p&&this.name===f.prototype.name)}}).call(this,r(10).Buffer)},function(e,t){},function(e,t){e.exports=function(e,t){for(var r=[],n=(t=t||0)||0;n<e.length;n++)r[n-t]=e[n];return r}},function(e,t){function r(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}e.exports=r,r.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-r:e+r}return 0|Math.min(e,this.max)},r.prototype.reset=function(){this.attempts=0},r.prototype.setMin=function(e){this.ms=e},r.prototype.setMax=function(e){this.max=e},r.prototype.setJitter=function(e){this.jitter=e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.production=t.development=void 0;t.development={socketUrl:"wss://webimv2.fusionv.com/"};t.production={socketUrl:"/"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(16),o=function(){function e(){}return e.isBase64Object=function(e){return e.base64},e.urlSafeDecode=function(e){var t=e.replace(/[\_\-]/g,(function(e){return"_"===e?"+":"/"})),r=new n.util.Array(n.util.base64.length(t));return n.util.base64.decode(t,r,0),r},e.urlSafeEncode=function(e){return n.util.base64.encode(e,0,e.length).replace(/[\+\/]/g,(function(e){return"+"===e?"_":"-"}))},e.decode=function(t){return e.isBase64Object(t)?e.urlSafeDecode(t.data):new Uint8Array(t)},e.encode=function(t){return"undefined"!=typeof Uint8Array?"function"==typeof t.buffer.slice?t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength):new Uint8Array(t).buffer:{base64:!0,data:e.urlSafeEncode(t)}},e}();t.default=o},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=r(8),s=r(99),a=function(e){function t(r){void 0===r&&(r=0);var n=e.call(this)||this;return n._acks=Object.create(null),n._nextId=t.__ID__,n._registerId=t.__ID__,n._timeout=r,n}return o(t,e),Object.defineProperty(t.prototype,"timeout",{get:function(){return this._timeout},set:function(e){this._timeout=e},enumerable:!1,configurable:!0}),t.prototype.getNextId=function(e){if(void 0===e&&(e=!0),this._registerId!==this._nextId)throw new Error("Unable getNextId before previous id was registered.");return this._nextId=++t.__ID__,e||(this._registerId=this._nextId),this._nextId},t.prototype.register=function(){var e=this;return this._registerId===this._nextId?Promise.resolve(void 0):new Promise((function(t,r){e._registerId=e._nextId,e._acks[e._registerId]=new s.default(t,r,e._timeout)}))},t.prototype.resolve=function(e,t){if(this._acks[e]){var r=this._acks[e];delete this._acks[e],r.resolve(t)}},t.prototype.reject=function(e,t){if(this._acks[e]){var r=this._acks[e];delete this._acks[e],r.reject(t)}},t.__ID__=0,t}(i.EventEmitter);t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,r){void 0===r&&(r=0),this._state=0,this._handle=0,this._resolve=e,this._reject=t,this._timeout=r,this._startTimeout()}return e.prototype.resolve=function(e){0===this._state&&(this._clearTimeout(),this._state=1,this._resolve(e))},e.prototype.reject=function(e){0===this._state&&(this._clearTimeout(),this._state=2,this._reject(e))},e.prototype.timeout=function(){0===this._state&&(this._clearTimeout(),this._state=3,this._reject(new Error("timeout")))},e.prototype._startTimeout=function(){var e=this;this._timeout<=0||(this._handle=setTimeout((function(){return e.timeout()}),this._timeout))},e.prototype._clearTimeout=function(){this._timeout<=0||clearTimeout(this._handle)},e}();t.default=n},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.getRouter=function(e){for(var t="string"==typeof e?e.split("/").filter(Boolean):e,r=this,n=0;null!==r&&n<t.length;++n)r=r.getChildByName(t[n]);return r},t.prototype.addRouter=function(e,t){var r="string"==typeof e?e.split("/").filter(Boolean):e;r.length>=1&&(t.name=r.pop());var n=this.getRouter(r);if(null!==n)return n.insertChild(t),t;throw new Error('path not exists: "'+e+'"')},t.prototype.answerPacketAsync=function(e){return i(this,void 0,void 0,(function(){var t;return s(this,(function(r){switch(r.label){case 0:t=this.firstChild,r.label=1;case 1:return null===t?[3,4]:[4,t.answerPacketAsync(e)];case 2:if(r.sent())return[2,!0];r.label=3;case 3:return t=t.nextSibling,[3,1];case 4:return[2,!1]}}))}))},t.prototype.commitPacketAsync=function(e){return i(this,void 0,void 0,(function(){return s(this,(function(t){return this.connection.sendPacket(e),[2,this.connection.asyncManager.register()]}))}))},t}(r(22).default);t.default=a},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},a=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},c=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0});var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.answerPacketAsync=function(e){return i(this,void 0,void 0,(function(){var t;return s(this,(function(r){return e.isEvent()?((t=this.connection).emit.apply(t,c([e.event],a(e.args))),[2,!0]):[2,!1]}))}))},t}(r(44).default);t.default=u},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(43),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.answerPacketAsync=function(e){return i(this,void 0,void 0,(function(){var t;return s(this,(function(r){switch(r.label){case 0:if(!e.isBinary())return[3,4];t=this.firstChild,r.label=1;case 1:return null===t?[3,4]:[4,t.answerDataAsync(e.event,e.cmd,e.subtype,e.body)];case 2:if(r.sent())return[2,!0];r.label=3;case 3:return t=t.nextSibling,[3,1];case 4:return[2,!1]}}))}))},t.prototype.commitDataAsync=function(e,t,r,n){return i(this,void 0,void 0,(function(){var o;return s(this,(function(i){return o=a.default.createBinaryPacket(e,t,r,n),[2,this.commitPacketAsync(o)]}))}))},t}(r(44).default);t.default=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var c=r(23),u=r(4),l=r(104),p=r(105),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.answerDataAsync=function(e,t,r,n){var o,a,c,f;return i(this,void 0,void 0,(function(){var e,r,i,d;return s(this,(function(s){return t===u.TypeEnum.ACK?(e=u.Ack.decode(n),r="number"==typeof e.cMsgId?e.cMsgId:e.cMsgId.toNumber(),i="number"==typeof(null===(o=e.messageAck[0])||void 0===o?void 0:o.cMsgId)?null===(a=e.messageAck[0])||void 0===a?void 0:a.cMsgId:null===(f=null===(c=e.messageAck[0])||void 0===c?void 0:c.cMsgId)||void 0===f?void 0:f.toNumber(),0!==(d=r||i)?0===e.stateCode?this.connection.asyncManager.resolve(d,e):this.connection.asyncManager.reject(d,new l.default(e.stateCode)):this.emit("error",new p.default(4097,e,"Invalid cMsgId="+d+".")),[2,!0]):[2,!1]}))}))},t.prototype.commitAckAsync=function(e,r,n){return i(this,void 0,void 0,(function(){var o,i,c,l,p,f,d,h;return s(this,(function(s){switch(s.label){case 0:o=[];try{for(i=a(n),c=i.next();!c.done;c=i.next())l=c.value,o.push(new u.MessageAck({msgId:l,type:e}))}catch(e){d={error:e}}finally{try{c&&!c.done&&(h=i.return)&&h.call(i)}finally{if(d)throw d.error}}return p=new u.Ack({type:r,messageAck:o}),f=u.Ack.encode(p).finish(),[4,this.commitDataAsync(t.EVENT,u.TypeEnum.ACK,0,f)];case 1:return[2,s.sent()]}}))}))},t.EVENT="ACK",t}(c.default);t.default=f},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t,r){void 0===r&&(r="Invalid stateCode="+t+".");var n=e.call(this,r)||this;return n.stateCode=t,n}return o(t,e),t}(Error);t.default=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t,r,n){var o=e.call(this,n)||this;return o.type=t,o.data=r,o}return o(t,e),t}(Error);t.default=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(23),c=r(4),u=r(107),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.login=function(e,r){return i(this,void 0,void 0,(function(){var n,o,i,a,l;return s(this,(function(s){switch(s.label){case 0:return n=this.connection.asyncManager.getNextId(),o=new c.User({cMsgId:n,userId:e,token:r,appId:this.connection.appId,appKey:this.connection.appKey}),i=c.User.encode(o).finish(),[4,this.commitDataAsync(t.EVENT,c.TypeEnum.LOGIN,0,i)];case 1:return a=s.sent(),l=a.userAck,[2,new u.default(l)]}}))}))},t.EVENT="LOGIN",t.EVENT_LOGOUT="LOGOUT",t}(a.default);t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){this.$data=e,this.userId=e.userId,this.unreadMsgCount="number"==typeof e.unReadMsgSize?e.unReadMsgSize:e.unReadMsgSize.toNumber()};t.default=n},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var c=r(24),u=r(4),l=r(109),p=r(110),f=r(111),d=r(112),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.create=function(e){return i(this,void 0,void 0,(function(){return s(this,(function(r){switch(r.label){case 0:return[4,this.commitMsgAsync(t.EVENT,u.TypeEnum.ROOM,u.SubTypeEnum.ROOM_CREATE,!0,{to:e})];case 1:return[2,void r.sent()]}}))}))},t.prototype.join=function(e){return i(this,void 0,void 0,(function(){return s(this,(function(r){switch(r.label){case 0:return[4,this.commitMsgAsync(t.EVENT,u.TypeEnum.ROOM,u.SubTypeEnum.ROOM_LOGIN,!0,{to:e})];case 1:return[2,void r.sent()]}}))}))},t.prototype.leave=function(e){return i(this,void 0,void 0,(function(){return s(this,(function(r){switch(r.label){case 0:return[4,this.commitMsgAsync(t.EVENT,u.TypeEnum.ROOM,u.SubTypeEnum.ROOM_LOGOUT,!0,{to:e})];case 1:return[2,void r.sent()]}}))}))},t.prototype.mute=function(e,r){return i(this,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:return[4,this.commitMsgAsync(t.EVENT,u.TypeEnum.ROOM,u.SubTypeEnum.EVENT_ROOM_GAG_ADD_MSG,!0,{to:e,content:r})];case 1:return n.sent(),[2]}}))}))},t.prototype.unmute=function(e,r){return i(this,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:return[4,this.commitMsgAsync(t.EVENT,u.TypeEnum.ROOM,u.SubTypeEnum.EVENT_ROOM_GAG_DEL_MSG,!0,{to:e,content:r})];case 1:return n.sent(),[2]}}))}))},t.prototype.muteAll=function(e){return i(this,void 0,void 0,(function(){return s(this,(function(r){switch(r.label){case 0:return[4,this.commitMsgAsync(t.EVENT,u.TypeEnum.ROOM,u.SubTypeEnum.EVENT_ROOM_GAG_ADD_MSG,!0,{to:e})];case 1:return r.sent(),[2]}}))}))},t.prototype.unmuteAll=function(e){return i(this,void 0,void 0,(function(){return s(this,(function(r){switch(r.label){case 0:return[4,this.commitMsgAsync(t.EVENT,u.TypeEnum.ROOM,u.SubTypeEnum.EVENT_ROOM_GAG_DEL_MSG,!0,{to:e})];case 1:return r.sent(),[2]}}))}))},t.prototype.isMuted=function(e,t){return i(this,void 0,void 0,(function(){return s(this,(function(e){return[2]}))}))},t.prototype.isMutedAll=function(e){return i(this,void 0,void 0,(function(){return s(this,(function(e){return[2]}))}))},t.prototype.getMutedUserList=function(e){return i(this,void 0,void 0,(function(){return s(this,(function(e){return[2]}))}))},t.prototype.sendMessage=function(e,r){return i(this,void 0,void 0,(function(){return s(this,(function(n){return[2,void this.commitMsgAsync(t.EVENT,u.TypeEnum.ROOM,u.SubTypeEnum.ROOM_DIY,!1,{to:e,content:r})]}))}))},t.prototype.sendDIYMessage=function(e,r,n){return i(this,void 0,void 0,(function(){return s(this,(function(o){switch(o.label){case 0:return[4,this.commitMsgAsync(t.EVENT,u.TypeEnum.ROOM,u.SubTypeEnum.ROOM_DIY,!0,{to:e,content:r,extend1:n})];case 1:return[2,void o.sent()]}}))}))},t.prototype.answerDataAsync=function(e,t,r,n){return i(this,void 0,void 0,(function(){var e,o,i,c,h,g,y;return s(this,(function(s){if(t===u.TypeEnum.ROOM_BATCH&&r===u.SubTypeEnum.ROOM_DIY){e=u.MessageList.decode(n);try{for(o=a(e.msg),i=o.next();!i.done;i=o.next())(c=i.value).type===u.TypeEnum.ROOM&&c.subType===u.SubTypeEnum.ROOM_CREATE?(h=new p.default(c),this.emit("create",h)):c.type===u.TypeEnum.ROOM&&c.subType===u.SubTypeEnum.ROOM_LOGIN?(h=new f.default(c),this.emit("join",h)):c.type===u.TypeEnum.ROOM&&c.subType===u.SubTypeEnum.ROOM_LOGOUT?(h=new d.default(c),this.emit("leave",h)):c.type===u.TypeEnum.ROOM&&c.subType===u.SubTypeEnum.ROOM_DIY&&(h=new l.default(c),this.emit("message",h))}catch(e){g={error:e}}finally{try{i&&!i.done&&(y=o.return)&&y.call(o)}finally{if(g)throw g.error}}return[2,!0]}return t===u.TypeEnum.ROOM&&r===u.SubTypeEnum.ROOM_DIY?(c=u.IMMessage.decode(n),h=new l.default(c),this.emit("message",h),[2,!0]):[2,!1]}))}))},t.EVENT="ROOM",t}(c.default);t.default=h},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){var r=e.call(this,t)||this;return r.from=t.from,r.to=t.to,r.content=t.content,r}return o(t,e),t}(r(5).default);t.default=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){var r=e.call(this,t)||this;return r.roomId=t.to,r.userId=t.from,r}return o(t,e),t}(r(5).default);t.default=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){var r=e.call(this,t)||this;return r.roomId=t.to,r.userId=t.from,r}return o(t,e),t}(r(5).default);t.default=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){var r=e.call(this,t)||this;return r.roomId=t.to,r.userId=t.from,r}return o(t,e),t}(r(5).default);t.default=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var c=r(24),u=r(4),l=r(45),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.sendMessage=function(e,r,n){return i(this,void 0,void 0,(function(){return s(this,(function(o){switch(o.label){case 0:return[4,this.commitMsgAsync(t.EVENT,u.TypeEnum.CHAT,u.SubTypeEnum.TEXT,!0,{to:e,content:r,type:n})];case 1:return[2,void o.sent()]}}))}))},t.prototype.sendEventMessage=function(e,r,n){return i(this,void 0,void 0,(function(){return s(this,(function(o){switch(o.label){case 0:return[4,this.commitMsgAsync(t.EVENT,u.TypeEnum.EVENT,u.SubTypeEnum.EVENTTYPE_CHAT,!0,{to:e,content:r,extend1:n})];case 1:return[2,void o.sent()]}}))}))},t.prototype.sendAck=function(e){return i(this,void 0,void 0,(function(){var t,r,n,o,i,c;return s(this,(function(s){switch(s.label){case 0:t=[];try{for(r=a(e),n=r.next();!n.done;n=r.next())o=n.value,t.push(o.msgId)}catch(e){i={error:e}}finally{try{n&&!n.done&&(c=r.return)&&c.call(r)}finally{if(i)throw i.error}}return[4,this.connection.resolver.commitAckAsync(u.TypeEnum.CHAT,u.AckTypeEnum.INCEPT_MSG_ACK,t)];case 1:return[2,void s.sent()]}}))}))},t.prototype.answerDataAsync=function(e,t,r,n){return i(this,void 0,void 0,(function(){var e,o;return s(this,(function(i){return t===u.TypeEnum.CHAT&&r===u.SubTypeEnum.TEXT||t===u.TypeEnum.EVENT&&r===u.SubTypeEnum.EVENTTYPE_CHAT?(e=u.IMMessage.decode(n),o=new l.default(e),this.emit("message",o),[2,!0]):[2,!1]}))}))},t.EVENT="CHAT",t}(c.default);t.default=p},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var c=r(4),u=r(24),l=r(115),p=r(116),f=r(117),d=r(45),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.getUnreadMessageList=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=-1),i(this,void 0,void 0,(function(){var r,n,o,i,u,h,g,y,m;return s(this,(function(s){switch(s.label){case 0:return[4,this.commitMsgAsync("UNREAD_MESSAGE",0,0,!0,{sequence:e,extend2:""+t})];case 1:r=s.sent(),n=r.data,o=new p.default;try{for(i=a(n),u=i.next();!u.done;u=i.next())h=u.value,(g=c.IMMessage.decode(h.value)).type===c.TypeEnum.GROUPCHAT&&g.subType===c.SubTypeEnum.GROUP_CHAT?o.messageList.push(new l.default(1,new f.default(g))):g.type===c.TypeEnum.CHAT&&g.subType===c.SubTypeEnum.TEXT&&o.messageList.push(new l.default(2,new d.default(g)))}catch(e){y={error:e}}finally{try{u&&!u.done&&(m=i.return)&&m.call(i)}finally{if(y)throw y.error}}return[2,o]}}))}))},t.prototype.sendAck=function(e){return i(this,void 0,void 0,(function(){var t,r,n,o,i,c;return s(this,(function(s){switch(s.label){case 0:t=[];try{for(r=a(e),n=r.next();!n.done;n=r.next())o=n.value,t.push(o.msgId)}catch(e){i={error:e}}finally{try{n&&!n.done&&(c=r.return)&&c.call(r)}finally{if(i)throw i.error}}return[4,this.connection.resolver.commitAckAsync(4,0,t)];case 1:return[2,void s.sent()]}}))}))},t.EVENT="CHAT",t}(u.default);t.default=h},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){this.type=e,this.message=t};t.default=n},function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){this.messageList=[]}return Object.defineProperty(e.prototype,"lastSequence",{get:function(){if(this.messageList.length)return this.messageList[this.messageList.length-1].message.sequence},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"groupMessageList",{get:function(){var e,t,r=[];try{for(var o=n(this.messageList),i=o.next();!i.done;i=o.next()){var s=i.value;1===s.type&&r.push(s.message)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"personalMessageList",{get:function(){var e,t,r=[];try{for(var o=n(this.messageList),i=o.next();!i.done;i=o.next()){var s=i.value;2===s.type&&r.push(s.message)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return r},enumerable:!1,configurable:!0}),e}();t.default=o},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){var r=e.call(this,t)||this;return r.from=t.from,r.to=t.to,r.content=t.content,r}return o(t,e),t}(r(5).default);t.default=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var c=r(7),u=r(6),l=r(25),p=r(121),f=r(27),d=r(145),h=r(146),g=function(e){function t(t){var r=e.call(this)||this;if(r._roomId="",r._userId="",r._userName="",r._octopusConfig=null,r._octopusClient=null,r._appId="",r._env="prod",r._type=null,r._customEdgeUrl="",r._version=l.version,r._logger=null,r._record=null,r._appPackageName="",!t.appId)throw new Error("appId can not be empty.");if(!t.userId)throw new Error("userId can not be empty.");return r._userId=t.userId,r._appId=t.appId,void 0!==t&&(void 0!==t.userName&&(r._userName=t.userName),void 0!==t.env&&(r._env=t.env),void 0!==t.type&&(r._type=t.type),void 0!==t.edgeUrl&&(r._customEdgeUrl=t.edgeUrl),void 0!==t.appPackageName&&(r._appPackageName=t.appPackageName)),u.generateLoggerInstance({appId:r._appId,userId:r._userId}),r._logger=u.logger.collect,r}return o(t,e),Object.defineProperty(t.prototype,"roomId",{get:function(){return this._roomId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userId",{get:function(){return this._userId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userName",{get:function(){return this._userName},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),t.isSupported=function(){var e=window.RTCPeerConnection||window.webkitRTCPeerConnection,t=navigator.getUserMedia||navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,r=window.WebSocket;return!!e&&!!t&&!!r},t.prototype.init=function(){if(!l.projectName&&!this._type)throw new Error("type can not be empty.");var e=l.projectName;this._type&&(e="china"==this._type?"cm":"liveme"),this._octopusConfig={appId:this._appId,env:this._env,projectName:e,userId:this._userId,userName:this._userName,customEdgeUrl:this._customEdgeUrl},this._octopusClient=new p.OctopusClientTest(this._octopusConfig),this._logger.info("init params",this._octopusConfig),this.eventemitFunctions()},t.prototype.login=function(e,t,r,n){return i(this,void 0,void 0,(function(){var o,i,c,u,l,p,f,d;return s(this,(function(s){switch(s.label){case 0:if(this._logger.info("login start",{roomId:e,role:t,auth:r,expire:n}),this._roomId=e,!this._octopusClient)throw new Error("OctopusRTC is not a instance.");o=[],s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this._octopusClient.login(this._appPackageName,this._roomId,t,r,n)];case 2:if(!("code"in(i=s.sent())))try{for(c=a(i),u=c.next();!u.done;u=c.next())l=u.value,o.push({streamId:l.streamId,userId:l.userId,roomId:l.roomId})}catch(e){f={error:e}}finally{try{u&&!u.done&&(d=c.return)&&d.call(c)}finally{if(f)throw f.error}}return this._logger.info("login success",o),[2,o];case 3:return p=s.sent(),this._logger.info("login failed",p),[2,p];case 4:return[2]}}))}))},t.prototype.logout=function(){if(!this._octopusClient)throw new Error("OctopusRTC is not a instance.");this.removeAllListeners(),this._logger.disableLogUpload(),this._octopusClient.logout()},t.prototype.createStream=function(e){return i(this,void 0,void 0,(function(){return s(this,(function(t){return this._logger.info("createStream params",e),[2,this._octopusClient.createStream(e)]}))}))},t.prototype.destroyStream=function(e){if(!this._octopusClient)throw new Error("OctopusRTC is not a instance.");this._octopusClient.destroyStream(e)},t.prototype.startPublishingStream=function(e,t,r,n){return i(this,void 0,void 0,(function(){return s(this,(function(o){switch(o.label){case 0:return this._logger.info("start publish stream",{streamId:e,mediaElement:t}),this._octopusClient?[4,this._octopusClient.startPublishingStream(e,t,r,n)]:[3,2];case 1:o.sent(),o.label=2;case 2:return[2]}}))}))},t.prototype.stopPublishingStream=function(e){this._logger.info("stop publish stream",e),this._octopusClient&&this._octopusClient.stopPublishingStream(e)},t.prototype.startPlayingStream=function(e,t,r){return i(this,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:return this._logger.info("start play stream.",{pullstreamUserId:e}),this._octopusClient?[4,this._octopusClient.startPlayingStream(e,t,r)]:[3,2];case 1:return[2,n.sent()];case 2:return[2]}}))}))},t.prototype.stopPlayingStream=function(e){this._logger.info("stop play stream",e),this._octopusClient&&this._octopusClient.stopPlayingStream(e)},t.prototype.updateMixStream=function(e){var t=this;return new Promise((function(r,n){t._octopusClient&&t._octopusClient.updateMixStream(e,(function(e){r(e)}),(function(e){n(e)}))}))},t.prototype.replaceTrack=function(e,t,r){if(!this._octopusClient)throw new Error("OctopusRTC is not a instance.");this._octopusClient.replaceTrack(e,t,r)},t.prototype.changeConstraints=function(e,t,r,n){return i(this,void 0,void 0,(function(){return s(this,(function(o){switch(o.label){case 0:return this._octopusClient?[4,this._octopusClient.changeConstraints(e,t,r,n)]:[3,2];case 1:return[2,o.sent()];case 2:return[2]}}))}))},t.prototype.muteSwitch=function(e,t){this._octopusClient&&this._octopusClient.muteSwitch(e,t)},t.prototype.cameraSwitch=function(e,t){if(!this._octopusClient)throw new Error("OctopusRTC is not a instance.");this._octopusClient.cameraSwitch(e,t)},t.prototype.getLocalAudioStats=function(e){return i(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:if(!this._octopusClient)throw new Error("OctopusRTC is not a instance.");return[4,this._octopusClient.getMediaStreamTrackStats(e,f.type.LocalAudio)];case 1:return[2,t.sent()]}}))}))},t.prototype.getLocalVideoStats=function(e){return i(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:if(!this._octopusClient)throw new Error("OctopusRTC is not a instance.");return[4,this._octopusClient.getMediaStreamTrackStats(e,f.type.LocalVideo)];case 1:return[2,t.sent()]}}))}))},t.prototype.getRemoteAudioStats=function(e){return i(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:if(!this._octopusClient)throw new Error("OctopusRTC is not a instance.");return[4,this._octopusClient.getMediaStreamTrackStats(e,f.type.RemoteAudio)];case 1:return[2,t.sent()]}}))}))},t.prototype.getRemoteVideoStats=function(e){return i(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:if(!this._octopusClient)throw new Error("OctopusRTC is not a instance.");return[4,this._octopusClient.getMediaStreamTrackStats(e,f.type.RemoteVideo)];case 1:return[2,t.sent()]}}))}))},t.prototype.initRecord=function(e,t){var r=t.mimeType,n=t.codec;return this._record=new h.RecordMediastream(e,{codec:n,mimeType:r}),this._record},t.prototype.eventemitFunctions=function(){var e=this;this._octopusClient&&(this._octopusClient.on("@getpublishstate",(function(t){e.emit("publish-state-update",t)})),this._octopusClient.on("@getplaystate",(function(t){e.emit("play-state-update",t)})),this._octopusClient.on("@getstreamupdate",(function(t){e.emit("stream-update",t)})),this._octopusClient.on("@getdisconnect",(function(t){e.emit("disconnect",t)})),this._octopusClient.on("@getkickout",(function(t){e.emit("kick-out",t),e.logout()})))},t.prototype.setLogLevel=function(e){this._logger.setLogLevel(e)},t.prototype.enableLogUpload=function(){this._logger.enableLogUpload()},t.prototype.disableLogUpload=function(){this._logger.disableLogUpload()},t.prototype.devicesList=function(){return i(this,void 0,void 0,(function(){var e;return s(this,(function(t){switch(t.label){case 0:return e=d.default.bind,[4,navigator.mediaDevices.enumerateDevices()];case 1:return[2,new(e.apply(d.default,[void 0,t.sent()]))]}}))}))},t.prototype.getCamerasList=function(){return i(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.devicesList()];case 1:return[2,e.sent().cameras]}}))}))},t.prototype.getMicrophonesList=function(){return i(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.devicesList()];case 1:return[2,e.sent().microphones]}}))}))},t.prototype.getSpeakersList=function(){return i(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.devicesList()];case 1:return[2,e.sent().speakers]}}))}))},t}(c);t.default=g},function(e,t,r){"use strict";this&&this.__read,this&&this.__spreadArray;Object.defineProperty(t,"__esModule",{value:!0}),t.Log=void 0;var n=r(25),o=r(15),i=function(){function e(e){this._logLevel=0,this._LOGLEVELARR=["debug","info","warn","error","report"],this._appId="",this._userId="",this._uploadMsgArr=[],this._reportTime=5e3,this._reportHandler=0,this.debug=null,this.info=null,this.warn=null,this.error=null,this.report=null,this._appId=e.appId,this._userId=e.userId,this.debug=this.proxyConsole.bind(this,"debug"),this.info=this.proxyConsole.bind(this,"info"),this.warn=this.proxyConsole.bind(this,"warn"),this.error=this.proxyConsole.bind(this,"error"),this.report=this.proxyConsole.bind(this,"report")}return e.prototype.setLogLevel=function(e){this._logLevel=e},e.prototype.enableLogUpload=function(){this.startIntervalUploadLog()},e.prototype.disableLogUpload=function(){this._reportHandler&&clearTimeout(this._reportHandler)},e.prototype.formatArgs=function(e,t){var r={time:e[0]};if("string"!=typeof e[1])throw new Error("lack of keyword.");var n=e[1],o=e[2];return o?("string"==typeof o||"object"==typeof o)&&(r[n]=o):r.msg=n,"report"==t&&this._uploadMsgArr.push(JSON.stringify(r)),r},e.prototype.startIntervalUploadLog=function(){var e=this;0!==this._uploadMsgArr.length&&o.uploadLog({appId:this._appId,userId:this._userId,message:this._uploadMsgArr}).then((function(t){if(0!==t.code)throw new Error("report log error.");e._uploadMsgArr=[]}),(function(e){throw new Error("report log error.")})),this._reportHandler=setTimeout(this.startIntervalUploadLog.bind(this),this._reportTime)},e.prototype.proxyConsole=function(e){var t=Array.prototype.slice.call(arguments);t.shift(),t.unshift(this.dateFormat()),"development"==n.ENV&&this._LOGLEVELARR.push("log");var r=this._LOGLEVELARR.slice(this._logLevel);if(4==this._logLevel&&(r=["report","info"]),-1!=r.indexOf(e))switch(e){case"report":this.formatArgs(t,"report");break;case"log":case"debug":break;case"info":4==this._logLevel&&this.formatArgs(t,"report")}},e.prototype.dateFormat=function(){var e=new Date;return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()+"."+e.getMilliseconds()},e}();t.Log=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.constantConfig=t.envConfig=void 0,t.envConfig={liveme:{prod:{CENTERURL:"https://rtc-stream-global-center.linkv.fun",LOGURL:"wss://rtc-fs.linkv.fun"},test:{CENTERURL:"https://qa-rtc-stream-global-center.linkv.fun",LOGURL:"wss://rtc-fs.linkv.fun"},dev:{CENTERURL:"https://qa-rtc-stream-global-center.linkv.fun",LOGURL:"wss://rtc-fs.linkv.fun"}},cm:{prod:{CENTERURL:"https://rtc-stream-cn-center.linkv.fun",LOGURL:"wss://rtc-fs.linkv.fun"},test:{CENTERURL:"https://qa-rtc-stream-cn-center.linkv.fun",LOGURL:"wss://rtc-fs.linkv.fun"},dev:{CENTERURL:"https://qa-rtc-stream-cn-center.linkv.fun",LOGURL:"wss://rtc-fs.linkv.fun"}}},t.constantConfig={LOGREPORT:"https://joyme-weblog.linkv.fun",STATSURL:"https://linkv-old-collect.linkv.fun"}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},s=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},c=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},u=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s};Object.defineProperty(t,"__esModule",{value:!0}),t.OctopusClientTest=void 0;var l=r(122),p=r(123),f=r(128),d=r(6),h=r(7),g=r(129),y=r(26),m=r(15),v=r(27),_=function(e){function t(t){var r=e.call(this)||this;return r._roomId="",r._role=1,r._appId="",r._userId="",r._signal=null,r._media=null,r._logger=null,r._mapStreamIdInfo=new Map,r._audioCustomBitrate=0,r._videoCustomBitrate=0,r._customFramerate=0,r._env="prod",r._projectName="liveme",r._customEdgeUrl="",r._reportHandle=0,r._mapStreamIdhandler=new Map,r._pullStreamList=new Map,r.reconnectionFun=function(e){var t=r._mapStreamIdInfo.get(e.streamId),n=r._mapStreamIdhandler.get(e.streamId);if(!t||!n)throw new Error("streamId is not exist.");n.destroy(),r._mapStreamIdhandler.delete(e.streamId),clearTimeout(r._reportHandle),e.userId==r._userId?r.startPublishingStream(e.streamId,t.mediastream):r.startPlayingStream(e.streamId)},r._appId=t.appId,r._userId=t.userId,void 0!==t&&(void 0!==t.customEdgeUrl&&(r._customEdgeUrl=t.customEdgeUrl),void 0!==t.env&&(r._env=t.env),void 0!==t.projectName&&(r._projectName=t.projectName)),r._logger=d.logger.collect,r}return o(t,e),t.prototype.login=function(e,t,r,n,o){return s(this,void 0,void 0,(function(){var i=this;return a(this,(function(s){return[2,new Promise((function(s,a){i._signal=new p.default({appPackageName:e,env:i._env,projectName:i._projectName,roomId:t,appId:i._appId,userId:i._userId,customEdgeUrl:i._customEdgeUrl}),i.getSignalState(),i._signal.init({auth:n,expire:o,role:r}),i._roomId=t,i._role=r,i._signal.on("@getjoinsucessresult",(function(e){200==e.code?s(e.msg):a(e)}))}))]}))}))},t.prototype.getSignalState=function(){var e=this;if(!this._signal)throw new Error("signal is not a instance.");this._signal.on("@kickout",(function(t){e.emit("@getkickout",t)})),this._signal.on("@disconnect",(function(t){e.emit("@getdisconnect",t)})),this._signal.on("@streamupdate",(function(t){e._logger.debug("streamupdate::::",t),e.emit("@getstreamupdate",t)}))},t.prototype.logout=function(){this._signal&&(clearTimeout(this._reportHandle),this.removeAllListeners(),this._signal.logout())},t.prototype.createStream=function(e){return s(this,void 0,void 0,(function(){var t,r,n,o,i,s,c;return a(this,(function(a){switch(a.label){case 0:if(t=e||{},r={audio:!0,video:!0},this._media||(this._media=new l.default({userId:this._userId})),!t.camera)return[3,2];if(n=t.camera,-1!=Object.keys(n).indexOf("audio")){if("boolean"!=typeof n.audio)throw new TypeError("audio must be boolean");r.audio=n.audio,n.audio&&(r.audio={},n.audioInput&&(r.audio.deviceId=n.audioInput),n.AGC&&(r.audio.autoGainControl=n.AGC),n.AEC&&(r.audio.echoCancellation=n.AEC),n.ANS&&(r.audio.noiseSuppression=n.ANS),n.sampleRate&&(r.audio.sampleRate=n.sampleRate),n.channelCount&&(r.audio.channelCount=n.channelCount),n.audioBitrate&&(this._audioCustomBitrate=n.audioBitrate),0===Object.keys(r.audio).length&&(r.audio=!0))}else r.audio=!0;if(-1!=Object.keys(n).indexOf("video")){if("boolean"!=typeof n.video)throw new TypeError("video must be boolean");r.video=n.video,n.video&&(r.video={},n.videoInput&&(r.video.deviceId=n.videoInput),n.facingMode&&(r.video.facingMode=n.facingMode),n.videoQuality&&(n.videoQuality<4?(o=f.default.camera.videoQuality[n.videoQuality-1],this._videoCustomBitrate=o.bitRate,r.video.width=o.width,r.video.height=o.height,r.video.frameRate=o.frameRate):(n.width&&(r.video.width=n.width),n.height&&(r.video.height=n.height),n.frameRate&&(r.video.frameRate=n.frameRate),n.bitrate&&(this._videoCustomBitrate=n.bitrate)),"number"==typeof r.video.frameRate&&(this._customFramerate=r.video.frameRate)),0===Object.keys(r.video).length&&(r.video=!0))}else r.video=!0;return[4,this._media.getLocalMediaStream("camera",r)];case 1:return[2,a.sent()];case 2:if(!t.screen)return[3,4];if(i=t.screen,s={audio:!1,video:!0},i.audio){if("boolean"!=typeof i.audio)throw new TypeError("audio must be boolean");s.audio=i.audio}return i.videoQuality&&(s.video={},i.videoQuality<4?(c=f.default.screen.videoQuality[i.videoQuality-1],this._videoCustomBitrate=c.bitRate,s.video.frameRate=c.frameRate):(i.frameRate&&(s.video.frameRate=i.frameRate),i.bitrate&&(this._videoCustomBitrate=i.bitrate)),"number"==typeof s.video.frameRate&&(this._customFramerate=s.video.frameRate)),[4,this._media.getLocalMediaStream("display",s)];case 3:return[2,a.sent()];case 4:return t.custom?[2,t.custom.source]:[3,5];case 5:return[4,this._media.getLocalMediaStream("camera",r)];case 6:return[2,a.sent()]}}))}))},t.prototype.destroyStream=function(e){if(!this._media)throw new Error("media is not a instance.");this._media.destroyLocalMediaStream(e)},t.prototype.getMediaStreamTrackConstrains=function(e){var t,r;try{for(var n=c(e.getTracks()),o=n.next();!o.done;o=n.next()){var i=o.value;if("video"==i.kind)try{var s=i.getSettings();m.uploadSensorsStats({app_id:this._appId,capture_height:s.height,capture_width:s.width,connect_state:-1,edge_url:"",encode_height:s.height,encode_width:s.width,event_type:3,fps:s.frameRate,is_host:1==this._role?1:0,join_room_cost:0,log_type:"liveme_video_rtc_room_event",min_bitrate:this._videoCustomBitrate,push_bitrate:this._videoCustomBitrate,room_id:this._roomId,self_user_id:this._userId})}catch(e){this._logger.debug("brower can not support getSettings")}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}},t.prototype.startPublishingStream=function(e,t,r,n){return s(this,void 0,void 0,(function(){var r=this;return a(this,(function(n){return m.uploadSensorsStats({app_id:this._appId,event_type:4,log_type:"liveme_video_rtc_statistics",room_id:this._roomId,self_user_id:this._userId,user_id:this._userId}),this.getMediaStreamTrackConstrains(t),this._media||(this._media=new l.default({userId:this._userId})),this._mapStreamIdInfo.set(e,{mediastream:t}),this.transport(e,"send"),this.getStreamStateUpdate(e).then((function(t){m.uploadSensorsStats({app_id:r._appId,event_type:5,isConnected:t.code,log_type:"liveme_video_rtc_statistics",room_id:r._roomId,self_user_id:r._userId,user_id:r._userId}),t.streamId==e&&r.emit("@getpublishstate",t)}),(function(e){throw new Error(e)})),[2]}))}))},t.prototype.startPlayingStream=function(e,t,r){return s(this,void 0,void 0,(function(){var t,r,n,o,i,s,u,l,p,f,d,h,g,y,v,_,b=this;return a(this,(function(a){switch(a.label){case 0:return m.uploadSensorsStats({app_id:this._appId,event_type:6,log_type:"liveme_video_rtc_statistics",room_id:this._roomId,self_user_id:this._userId,user_id:e}),this.transport(e,"recv"),r=(t=this._pullStreamList).set,n=[e],[4,this._mapStreamIdhandler.get(e).getPlayStream()];case 1:if(r.apply(t,n.concat([a.sent()])),o=this._mapStreamIdInfo.get(e)){m.uploadSensorsStats({app_id:this._appId,event_type:7,isConnected:3,log_type:"liveme_video_rtc_statistics",room_id:this._roomId,self_user_id:this._userId,user_id:e}),i=o.mediastream;try{for(s=c(i.getTracks()),u=s.next();!u.done;u=s.next())(l=u.value).stop(),i.removeTrack(l)}catch(e){g={error:e}}finally{try{u&&!u.done&&(y=s.return)&&y.call(s)}finally{if(g)throw g.error}}try{for(p=c(this._pullStreamList.get(e).getTracks()),f=p.next();!f.done;f=p.next())d=f.value,i.addTrack(d)}catch(e){v={error:e}}finally{try{f&&!f.done&&(_=p.return)&&_.call(p)}finally{if(v)throw v.error}}this.emit("@getplaystate",{code:11,state:"REPLAYING",streamId:e})}else this._mapStreamIdInfo.set(e,{mediastream:this._pullStreamList.get(e)}),this.getStreamStateUpdate(e).then((function(t){m.uploadSensorsStats({app_id:b._appId,event_type:7,isConnected:t.code,log_type:"liveme_video_rtc_statistics",room_id:b._roomId,self_user_id:b._userId,user_id:e}),b.emit("@getplaystate",t)}),(function(e){throw new Error(e)}));if(!(h=this._mapStreamIdInfo.get(e)))throw new Error("streamId is not exist.");return[2,h.mediastream]}}))}))},t.prototype.transport=function(e,t){return s(this,void 0,void 0,(function(){var r,n,o,i,c,u=this;return a(this,(function(l){switch(l.label){case 0:if(!this._signal)throw new Error("signal is not a instance.");return this._mapStreamIdhandler.set(e,new g.Device),this._mapStreamIdhandler.get(e).load({streamId:e,direction:t}),"send"==t&&(this._videoCustomBitrate||this._audioCustomBitrate)&&this._mapStreamIdhandler.get(e).setUserCustomParams({videoCustomBitrate:this._videoCustomBitrate,audioCustomBitrate:this._audioCustomBitrate,customFramerate:this._customFramerate}),(n=this._mapStreamIdInfo.get(e))&&(o=n.mediastream,r={mediastream:o}),[4,this._mapStreamIdhandler.get(e).getLocalOfferSdp(r)];case 1:return i=l.sent().localOfferSdp,this._signal.sendLocalOfferSdp({sdp:i,pullStreamId:e,pullStreamRoomId:this._roomId}),this._signal.getCandidateArray(e),c=function(t){return s(u,void 0,void 0,(function(){var r,n;return a(this,(function(o){switch(o.label){case 0:if(!this._signal)throw new Error("signal not a instance.");return[4,this._signal.receiveAnswerSdp(e)];case 1:return r=o.sent(),this._logger.report("get answersdp",r),"remoteAnswerSdp"in r&&(n=r.remoteAnswerSdp,r.peerId,this._mapStreamIdhandler.get(e).setRemoteAnswerSdp({remoteAnswerSdp:n})),this._logger.report("get candidateResult",t),this._mapStreamIdhandler.get(e).setIceCandidate(t),[2]}}))}))},this._signal.on("@getcandidate"+e,(function(t){if(c(t),!u._signal)throw new Error("signal not a instance.");u._signal.off("@getcandidate"+e)})),[2]}}))}))},t.prototype.getStreamStateUpdate=function(e){return s(this,void 0,void 0,(function(){var t,r,n,o=this;return a(this,(function(i){switch(i.label){case 0:if(!this._signal)throw new Error("signal not a instance.");if(!(t=this._mapStreamIdhandler.get(e)))throw new Error("Device handler not load.");i.label=1;case 1:return i.trys.push([1,3,,4]),this._signal.off("@reconnection",this.reconnectionFun),[4,t.getConnectionStateUpdate()];case 2:return 1==(r=i.sent()).code&&(0==this._reportHandle&&setTimeout((function(){o.uploadRealtimeStreamData()}),1e3),this.reconnectionListeners()),[2,r];case 3:throw n=i.sent(),new Error(n);case 4:return[2]}}))}))},t.prototype.stopPublishingStream=function(e){var t=this._mapStreamIdhandler.get(e);if(!t)throw new Error("Device handler not load.");if(t.stopTransceiver(),t.destroy(),this._mapStreamIdhandler.delete(e),!this._media)throw new Error("media is not a instance");if(!this._signal)throw new Error("signal not a instance.");this._signal.stopPush(e),this._logger&&this._logger.info("stop publish stream success.")},t.prototype.stopPlayingStream=function(e){var t=this._mapStreamIdhandler.get(e);if(!t)throw new Error("Device handler not load.");if(t.stopTransceiver(),t.destroy(),this._mapStreamIdhandler.delete(e),!this._signal)throw new Error("signal is not a instance.");this._signal.stopPlay(e),this._logger&&this._logger.info("stop play stream success.")},t.prototype.updateMixStream=function(e,t,r){this._signal&&this._signal.updateMixStream(e)},t.prototype.muteSwitch=function(e,t){var r=this._mapStreamIdInfo.get(e);if(!r)throw new Error("streamId is not exist.");var n=r.mediastream;n.getAudioTracks()[0].enabled=!t},t.prototype.cameraSwitch=function(e,t){var r=this._mapStreamIdInfo.get(e);if(!r)throw new Error("streamId is not exist.");var n=r.mediastream;n.getVideoTracks()[0].enabled="open"==t},t.prototype.updateDevice=function(e,t,r,n){return s(this,void 0,void 0,(function(){var o,i,s;return a(this,(function(a){switch(a.label){case 0:"audio"==e?o={audio:{deviceId:{exact:r}}}:"video"==e&&(o={video:{deviceId:{exact:r}}}),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,navigator.mediaDevices.getUserMedia(o)];case 2:return i=a.sent(),s="video"==e?i.getVideoTracks()[0]:i.getAudioTracks()[0],[2,this.replaceTrack(t,s,n)];case 3:return a.sent(),[2,y.errCode.get("devicesSupportError")];case 4:return[2]}}))}))},t.prototype.replaceTrack=function(e,t,r){if(r){var n=this._mapStreamIdhandler.get(r);n&&n.replaceTrack(t)}if(!this._media)throw new Error("media is not a instance");return this._media.replaceTrack(e,t)},t.prototype.changeConstraints=function(e,t,r,n){return s(this,void 0,void 0,(function(){var o,s,c;return a(this,(function(a){switch(a.label){case 0:return r.audioInput?[4,this.updateDevice(t,e,r.audioInput,n)]:[3,2];case 1:a.sent(),a.label=2;case 2:return r.videoInput?[4,this.updateDevice(t,e,r.videoInput,n)]:[3,4];case 3:a.sent(),a.label=4;case 4:if(!e)return[2,i({},y.errCode.get("constrainChangeFailed"))];if("audio"!==t)return[3,9];a.label=5;case 5:return a.trys.push([5,7,,8]),[4,e.getAudioTracks()[0].applyConstraints(r)];case 6:return a.sent(),[3,8];case 7:throw o=a.sent(),new Error(o);case 8:return[3,13];case 9:if("video"!==t)return[3,13];s=r,r.videoQuality&&(s=i(i({},r),f.default.camera.videoQuality[r.videoQuality-1])),a.label=10;case 10:return a.trys.push([10,12,,13]),[4,e.getVideoTracks()[0].applyConstraints(s)];case 11:return a.sent(),[3,13];case 12:throw c=a.sent(),new Error(c);case 13:return[2,i({},y.errCode.get("constrainChangeSuccess"))]}}))}))},t.prototype.uploadRealtimeStreamData=function(){return s(this,void 0,void 0,(function(){var e,t,r,n,o,s,l,p,f,d;return a(this,(function(a){switch(a.label){case 0:e={crystalBall:[],sensorData:[]},a.label=1;case 1:a.trys.push([1,6,7,8]),t=c(this._mapStreamIdhandler),r=t.next(),a.label=2;case 2:if(r.done)return[3,5];if(n=u(r.value,2),o=n[0],!(s=n[1]))throw new Error("streamId is not exist.");return[4,s.getStatsData(v.type.Sensor)];case 3:null!=(l=a.sent()).crystalBall&&(e.crystalBall.push(i({room_id:this._roomId,user_id:o},l.crystalBall)),e.sensorData.push(i({room_id:this._roomId,self_user_id:this._userId,stream_user_id:o},l.sensor))),a.label=4;case 4:return r=t.next(),[3,2];case 5:return[3,8];case 6:return p=a.sent(),f={error:p},[3,8];case 7:try{r&&!r.done&&(d=t.return)&&d.call(t)}finally{if(f)throw f.error}return[7];case 8:if(!this._signal)throw new Error("signal not a instance.");return 0!==e.crystalBall.length&&(this._signal.uploadStatsData(e),e={crystalBall:[],sensorData:[]}),this._reportHandle=setTimeout(this.uploadRealtimeStreamData.bind(this),5e3),[2]}}))}))},t.prototype.reconnectionListeners=function(){if(!this._signal)throw new Error("signal not a instance.");this._signal.on("@reconnection",this.reconnectionFun)},t.prototype.getMediaStreamTrackStats=function(e,t){return s(this,void 0,void 0,(function(){var r;return a(this,(function(n){switch(n.label){case 0:if(!(r=this._mapStreamIdhandler.get(e)))throw new Error("streamId is not exist.");return[4,r.getStatsData(t)];case 1:return[2,n.sent()]}}))}))},t}(h);t.OctopusClientTest=_},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var s,a=r(6);!function(e){e.MICROPHONE="audioinput",e.SPEAKER="audiooutput",e.CAMERA="videoinput"}(s||(s={}));var c=function(){function e(e){this._currentStream={},this._userId="",this._mapStreamIdMediastream=new Map,this._logger=null,this._userId=e.userId,this._logger=a.logger.collect}return e.enumerateDevices=function(e,t){return n(this,void 0,void 0,(function(){var r,n,a,c,u,l,p,f,d,h;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,navigator.mediaDevices.enumerateDevices()];case 1:r=o.sent(),n=[],a=[],c=[];try{for(u=i(r),l=u.next();!l.done;l=u.next())switch((p=l.value).kind){case s.MICROPHONE:n.push(p);break;case s.SPEAKER:a.push(p);break;case s.CAMERA:c.push(p)}}catch(e){d={error:e}}finally{try{l&&!l.done&&(h=u.return)&&h.call(u)}finally{if(d)throw d.error}}return"function"==typeof e&&e({microphones:n,speakers:a,cameras:c}),[2,Promise.resolve({microphones:n,speakers:a,cameras:c})];case 2:return f=o.sent(),"function"==typeof t&&t(f),[2,Promise.reject(f)];case 3:return[2]}}))}))},e.prototype.getLocalMediaStream=function(e,t){return n(this,void 0,void 0,(function(){var r,n,s,a,c,u,l,p,f,d,h,g;return o(this,(function(o){switch(o.label){case 0:this._logger.debug("local mediastream constraints",t),o.label=1;case 1:return o.trys.push([1,7,,11]),"display"!=e?[3,4]:[4,navigator.mediaDevices.getDisplayMedia(t)];case 2:return r=o.sent(),[4,navigator.mediaDevices.getUserMedia({audio:!0})];case 3:n=o.sent(),s=n.getAudioTracks()[0],t&&!t.audio&&(s.enabled=!1);try{for(a=i(r.getTracks()),c=a.next();!c.done;c=a.next())u=c.value,this._logger.report("displayStream has audio track",u),"audio"==u.kind&&(u.stop(),r.removeTrack(u))}catch(e){h={error:e}}finally{try{c&&!c.done&&(g=a.return)&&g.call(a)}finally{if(h)throw h.error}}return r.addTrack(s),[2,Promise.resolve(r)];case 4:return p=(l=Promise).resolve,[4,navigator.mediaDevices.getUserMedia(t)];case 5:return[2,p.apply(l,[o.sent()])];case 6:return[3,11];case 7:return(f=o.sent()).constraint&&"camera"==e?(this._logger.report("getUserMedia error",f),[4,navigator.mediaDevices.getUserMedia({audio:!0,video:!0})]):[3,9];case 8:return d=o.sent(),[2,Promise.resolve(d)];case 9:return[2,Promise.reject(f)];case 10:return[3,11];case 11:return[2]}}))}))},e.prototype.destroyLocalMediaStream=function(e){var t,r;try{for(var n=i(e.getTracks()),o=n.next();!o.done;o=n.next()){var s=o.value;s.stop(),e.removeTrack(s)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}},e.prototype.replaceTrack=function(e,t){var r,n;try{for(var o=i(e.getTracks()),s=o.next();!s.done;s=o.next()){var a=s.value;a.kind==t.kind&&(a.stop(),e.removeTrack(a))}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return e.addTrack(t),e},e.prototype.enumerateDevices=function(t,r){return n(this,void 0,void 0,(function(){return o(this,(function(n){return[2,e.enumerateDevices(t,r)]}))}))},e}();t.default=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){return e.call(this,t)||this}return o(t,e),t}(r(124).default);t.default=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},s=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},c=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},u=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},l=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e};Object.defineProperty(t,"__esModule",{value:!0});var p=r(125),f=r(26),d=r(127),h=r(15),g=function(e){function t(t){var r=e.call(this,t)||this;return r._timer=null,r._timeouter=null,r.signalTimeout=90,r._initJoinRoomParams=null,r._isKick=!1,r._succeed=!1,r._roomOnlineList=[],r._offerPeerId=0,r._connectState=0,r._role=0,r._joinRoomStartTime=0,r._portCandidateObj={},r._MapStreamIdCandidatePort=new Map,r._MapStreamIdAnswerSdp=new Map,r._iceConnectionStreamIdMap=new Map,r._isExecAnswersdp=new Map,r.onJoinSuccess=function(e){var t,n,o,i;if(r._logger.info("receive joinSuccess msg",e),h.uploadSensorsStats({app_id:r._appId,code:e.code,event_type:13,is_host:1==r._role?1:0,log_type:"liveme_video_rtc_statistics",room_id:r._roomId,self_user_id:r._userId}),!e||500==e.code)return r.leaveRoom(),void r.emit("@disconnect",f.errCode.get("wsDisconnect"));if(200!==e.code)r.resetSignalState("joinSuccess");else{var s=d.formatKeyToHump(e);h.uploadSensorsStats({app_id:r._appId,connect_state:s.connectState,edge_url:r._currentEdgeUrl,event_type:1,is_host:1==r._role?1:0,join_room_cost:(new Date).getTime()-r._joinRoomStartTime,log_type:"liveme_video_rtc_room_event",room_id:r._roomId,self_user_id:r._userId}),r._succeed=!0;var a=s.connectState;if(1==a)return;s.participants&&0!==s.participants.length?r._roomOnlineList=s.participants:r.emit("@getjoinsucessresult",{code:200,msg:[]});var l=[],p=[];try{for(var g=c(r._roomOnlineList),y=g.next();!y.done;y=g.next()){var m=y.value;p.push(m.userId),m.userId!=r._userId&&l.push({streamId:m.userId,userId:m.userId,roomId:m.roomId}),m.userId===r._userId||r._iceConnectionStreamIdMap.get(m.userId)||2!=a&&3!=a||r.emit("@streamupdate",{code:1,streamList:[m]})}}catch(e){t={error:e}}finally{try{y&&!y.done&&(n=g.return)&&n.call(g)}finally{if(t)throw t.error}}if(2==a||3==a)try{for(var v=c(r._iceConnectionStreamIdMap),_=v.next();!_.done;_=v.next()){var b=u(_.value,2),w=b[0];b[1];w!==r._userId&&-1==p.indexOf(w)?r.emit("@streamupdate",{code:0,streamList:[{streamId:w,userId:w,roomId:r._roomId}]}):r.reconnection(w)}}catch(e){o={error:e}}finally{try{_&&!_.done&&(i=v.return)&&i.call(v)}finally{if(o)throw o.error}}r.emit("@getjoinsucessresult",{code:200,msg:l}),r._logger.info("login result",l)}},r.onAddParticipants=function(e){var t,n,o=d.formatKeyToHump(e),i=[];o.participants.forEach((function(e,t){e.streamId=e.userId,i.push(e)}));var s=r._roomOnlineList.concat(i),a={};try{for(var u=c(s),l=u.next();!l.done;l=u.next()){var p=l.value;a[p.userId]=p}}catch(e){t={error:e}}finally{try{l&&!l.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}for(var f in r._roomOnlineList=[],a)r._roomOnlineList.push(a[f]);r.emit("@streamupdate",{code:1,streamList:i}),o=null,r._logger.report("addparticipant message:",i)},r.onUpdateParticipant=function(e){var t=d.formatKeyToHump(e);r._logger.report("updateparticipant message:",t),r._isExecAnswersdp.delete(t.userId),r.reconnection(t.userId),t=null},r.onRemoveParticipant=function(e){var t=d.formatKeyToHump(e);r._logger.report("removeparticipant message:",t),r.emit("@streamupdate",{code:0,streamList:[{userId:t.userId,streamId:t.userId,roomId:t.roomId}]}),t=null},r.onKickParticipant=function(e){r._isKick=!0;var t=d.formatKeyToHump(e);r._logger.report("updateparticipant message:",t),r.emit("@kickout",t),t=null},r}return o(t,e),t.prototype.init=function(e){return s(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return this._initJoinRoomParams=e,[4,this.connect({auth:e.auth,expire:e.expire})];case 1:return t.sent(),this.wsEvents(),[2]}}))}))},t.prototype.logout=function(){clearTimeout(this._timer),clearTimeout(this._timeouter),this.leaveRoom()},t.prototype.getNewEdgeList=function(){return s(this,void 0,void 0,(function(){var e;return a(this,(function(t){switch(t.label){case 0:return[4,h.getEdgeList({appId:this._appId,roomId:this._roomId,userId:this._userId,env:this._env,projectName:this._projectName})];case 1:return e=t.sent(),this._edgeUrls=Array.from(new Set(l(l([],u(this._edgeUrls)),u(e)))),[2]}}))}))},t.prototype.errorFun=function(e){switch(e){case"joinSuccess":this.emit("@getjoinsucessresult",{code:400,msg:f.errCode.get("wsDisconnect")})}},t.prototype.signalReconnect=function(e){var t=this;this._timeouter||(this._timeouter=setTimeout((function(){clearTimeout(t._timer),clearTimeout(t._timeouter),e?t.errorFun(e):t.changeVendor()}),1e3*this.signalTimeout)),this.leaveRoom(),this._timer=setTimeout((function(){var e=Math.ceil(t.signalTimeout/8);t._edgeUrls.length<e&&t.getNewEdgeList(),t._retryTimes>=t._maxRetryTimes?(t._retryTimes=0,t._edgeUrls.length>1&&t._edgeListIndex++,t._currentEdgeUrl=t._edgeUrls[t._edgeListIndex],t._initJoinRoomParams&&t.init(t._initJoinRoomParams),t._succeed&&(t._connectState=2),t._edgeUrls.length>1&&t._edgeListIndex+1>=t._edgeUrls.length&&(t._edgeListIndex=-1)):t._retryTimes<t._maxRetryTimes&&(t._initJoinRoomParams&&t.init(t._initJoinRoomParams),t._succeed&&(t._connectState=1),t._retryTimes++)}),2e3)},t.prototype.resetSignalState=function(e){clearTimeout(this._timer),this.signalReconnect(e)},t.prototype.sendMessage=function(e,t){var r=d.formatAppId(t,this._appId);this._ws&&this._ws.emit(e,r),r=null},t.prototype.wsEvents=function(){var e=this;if(!this._ws)throw new Error("websocket connect failed.");this._ws.on("connect",(function(){e._logger.info("signal connect success."),e._retryTimes=0,clearTimeout(e._timer),clearTimeout(e._timeouter),e.onConnect()})),this._ws.on("connect_error",(function(t){e._logger.warn("signal connect_error",t),e.resetSignalState()})),this._ws.on("connect_timeout",(function(t){e._logger.warn("signal connect_timeout",t),e.resetSignalState()})),this._ws.on("error",(function(t){e._logger.warn("signal error",t),e.resetSignalState()})),this._ws.on("disconnect",(function(t){if(e._logger.debug("disconnect reason",t),"io client disconnect"===t)return clearTimeout(e._timer),void clearTimeout(e._timeouter);e._logger.info("signal disconnect",t),e.resetSignalState()})),this._ws.on("close",(function(){e._logger.debug("signal status: close")})),this._ws.on("joinSuccess",this.onJoinSuccess),this._ws.on("addParticipants",this.onAddParticipants),this._ws.on("updateParticipant",this.onUpdateParticipant),this._ws.on("removeParticipant",this.onRemoveParticipant),this._ws.on("kick",this.onKickParticipant)},t.prototype.onConnect=function(){return s(this,void 0,void 0,(function(){var e;return a(this,(function(t){if(!this._initJoinRoomParams)throw new Error("lack of joinroom params.");switch(this._iceConnectionStreamIdMap.size){case 0:this._syncRole=0;break;case 1:this._iceConnectionStreamIdMap.get(this._userId)?this._syncRole=2:this._syncRole=1;break;default:this._iceConnectionStreamIdMap.get(this._userId)?this._syncRole=3:this._syncRole=1}return e={c_stream_id:""+(new Date).getTime(),app_id:this._appId,connect_state:this._connectState,room_id:this._roomId,user_id:this._userId,host:1==this._initJoinRoomParams.role?1:0,role:2==this._initJoinRoomParams.role?"viewer_cdn":"participant",show:"all",user_source:h.getUserSource(),timestamp:(new Date).getTime(),sdk_version:h.numberVersion(),sync_role:this._syncRole,app_package_name:this._appPackageName},this._role=this._initJoinRoomParams.role,h.uploadSensorsStats({app_id:this._appId,room_id:this._roomId,self_user_id:this._userId,connect_state:this._connectState,edge_url:this._currentEdgeUrl,event_type:0,is_host:1==this._initJoinRoomParams.role?1:0,join_room_cost:0,log_type:"liveme_video_rtc_room_event"}),this._joinRoomStartTime=(new Date).getTime(),this.sendMessage("joinRoom",e),this._logger.info("send joinRoom msg",e),[2]}))}))},t.prototype.updateMixStream=function(e){var t,r,n=[],o={auto_mix:0,layout:n,mix_push_urls:[e.outputUrl],room_id:this._roomId,timestamp:(new Date).getTime(),user_id:this._userId};n.push({layout_params:{bitrate:e.outputBitrate,canvas_color:e.outputBgColor,canvas_height:e.outputHeight,canvas_image:e.outputBgImage,canvas_width:e.outputWidth,fps:e.outputFps},session_id:"canvas"});var i=1;try{for(var s=c(e.streamList),a=s.next();!a.done;a=s.next()){var u=a.value;u.roomId=this._appId+"-"+u.roomId,u.streamId=this._appId+"-"+u.streamId,n.push({layout_params:{image_height:u.bottom-u.top,image_layer:i++,image_width:u.right-u.left,location_x:u.left,location_y:u.top},room_id:u.roomId?u.roomId:this._roomId,user_id:u.streamId})}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}this.sendMessage("mixStream",o)},t.prototype.stopMixStream=function(){this.sendMessage("mixStream",{room_id:this._roomId,timestamp:(new Date).getTime(),user_id:this._userId})},t.prototype.leaveRoom=function(){this._ws?(this._isExecAnswersdp.clear(),this._portCandidateObj={},this._isKick||this.sendMessage("leaveRoom",{room_id:this._roomId}),this.removeAllListeners("@disconnect"),this.removeAllListeners("@getjoinsucessresult"),this._ws.close(),this._ws=null):this._logger.debug("websocket taskId is not exist.")},t.prototype.stopPush=function(e){this._isExecAnswersdp.delete(e),this.sendMessage("stopBeam",{room_id:this._roomId,user_id:this._userId,timestamp:(new Date).getTime()})},t.prototype.stopPlay=function(e){this._isExecAnswersdp.delete(e),this.sendMessage("stop_play",{room_id:this._roomId,user_id:this._userId,timestamp:(new Date).getTime(),play_user_id:e})},t.prototype.reconnection=function(e){this._logger.debug("reconnection",e),this.emit("@reconnection",{streamId:e,userId:e})},t.prototype.sendLocalOfferSdp=function(e){var t=e.pullStreamId,r=e.pullStreamRoomId,n=e.sdp;this._offerPeerId+=1,this._iceConnectionStreamIdMap.set(t,{offerPeerId:this._offerPeerId});var o={peer_id:this._offerPeerId,offer_user_id:t,offer_room_id:r,sdp_offer:n,timestamp:(new Date).getTime(),room_id:this._roomId,user_id:this._userId,sdk_version:h.numberVersion()};return h.uploadSensorsStats({app_id:this._appId,event_type:8,log_type:"liveme_video_rtc_statistics",room_id:this._roomId,self_user_id:this._userId,user_id:t}),this.sendMessage("offerSDP",o),this._logger.report("send msg offerSDp",o),this._offerPeerId},t.prototype.getCandidateArray=function(e){var t=this;if(!this._ws)throw new Error("ws is not exist.");this._ws.on("iceCandidate",(function(r){var n=d.formatKeyToHump(r),o=n.candidate.candidate.split(" ").slice(-3,-2)[0];if(t._MapStreamIdCandidatePort.set(n.userId,o),t._portCandidateObj[o]){if(2==t._portCandidateObj[o].length)return;var i=!1;t._portCandidateObj[o].forEach((function(e,t,r){e.sdpMLineIndex==n.candidate.sdpMLineIndex&&(i=!0)})),i||t._portCandidateObj[o].push(n.candidate)}else t._portCandidateObj[o]=[],t._portCandidateObj[o].push(n.candidate);if(n.userId==e){var s=t._portCandidateObj[t._MapStreamIdCandidatePort.get(e)];t.emit("@getcandidate"+e,s)}n=null}))},t.prototype.receiveAnswerSdp=function(e){var t=this;return new Promise((function(r,n){if(!t._ws)throw new Error("ws is not exist.");var o=function(n){if(t._isExecAnswersdp.get(e))return r({code:2,msg:"Repeated execute"}),void t._ws.off("answerSDP",o);t._isExecAnswersdp.set(e,!0);var i=d.formatKeyToHump(n);h.uploadSensorsStats({app_id:t._appId,event_type:9,isSuccess:200==n.code?1:0,log_type:"liveme_video_rtc_statistics",room_id:t._roomId,self_user_id:t._userId,user_id:e});var s=t._iceConnectionStreamIdMap.get(i.userId);if(!s)throw new Error("answersp streamId is not exist.");i.peerId==s.offerPeerId?(200!=i.code?r({code:0,msg:"answsdp error"}):(t._MapStreamIdAnswerSdp.set(i.userId,i.sdpAnswer),e==i.userId&&t._MapStreamIdAnswerSdp.get(i.userId)&&r({peerId:i.peerId,remoteAnswerSdp:t._MapStreamIdAnswerSdp.get(i.userId)}),t._ws.off("answerSDP",o)),i=null):r({code:0,msg:"peerId repeat"})};t._ws.on("answerSDP",o)}))},t.prototype.uploadStatsData=function(e){var t=e.crystalBall;e.sensorData.forEach((function(e){h.uploadSensorsStats(i(i({},e),{log_type:"liveme_video_rtc_stream_heartbeat"}))})),this.sendMessage("clientstatistics",{room_id:this._roomId,sdk_version:101e4,user_id:this._userId,timestamp:(new Date).getTime(),statistics:t})},t}(p.default);t.default=g},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=r(126),c=r(15),u=r(7),l=r(26),p=r(6),f=function(e){function t(t){var r=e.call(this)||this;return r._customEdgeUrl="",r._logger=null,r._retryTimes=0,r._maxRetryTimes=3,r._edgeListIndex=0,r._roomId="",r._userId="",r._appId="",r._currentEdgeUrl="",r._edgeUrls=[],r._ws=null,r._syncRole=0,r._env="prod",r._projectName="liveme",r._appPackageName="",r._logger=p.logger.collect,r._logger.debug("signal constructor params",t),r._userId=t.userId,r._roomId=t.roomId,void 0!==t.appId&&(r._appId=t.appId),void 0!==t.projectName&&(r._projectName=t.projectName),void 0!==t.env&&(r._env=t.env),void 0!==t.customEdgeUrl&&(r._customEdgeUrl=t.customEdgeUrl),void 0!==t.appPackageName&&(r._appPackageName=t.appPackageName),r}return o(t,e),t.prototype.connect=function(e){e.auth,e.expire;return i(this,void 0,void 0,(function(){var e;return s(this,(function(t){switch(t.label){case 0:return this._currentEdgeUrl?[3,3]:this._customEdgeUrl?(this._currentEdgeUrl="wss://"+this._customEdgeUrl+"/octopus",[3,3]):[3,1];case 1:return e=this,[4,c.getEdgeList({appId:this._appId,roomId:this._roomId,userId:this._userId,env:this._env,projectName:this._projectName})];case 2:if(e._edgeUrls=t.sent(),this._logger.debug("current edge list",this._edgeUrls),!this._edgeUrls||0===this._edgeUrls.length)return this._logger.error("edgelist is null"),this.emit("@disconnect",l.errCode.get("nullEdgeList")),[2];this._currentEdgeUrl=this._edgeUrls[this._edgeListIndex],this.getIntervalEdgeUrls(),t.label=3;case 3:return this._ws=a(this._currentEdgeUrl,{transports:["websocket"]}),this._logger.debug("current websocket connect edge",this._currentEdgeUrl),this._ws.connect(),[2]}}))}))},t.prototype.getIntervalEdgeUrls=function(){var e=this;setInterval((function(){return i(e,void 0,void 0,(function(){var e;return s(this,(function(t){switch(t.label){case 0:return e=this,[4,c.getEdgeList({appId:this._appId,roomId:this._roomId,userId:this._userId,env:this._env,projectName:this._projectName})];case 1:return e._edgeUrls=t.sent(),this._logger.debug("edgelist update",this._edgeUrls),[2]}}))}))}),36e5)},t.prototype.changeVendor=function(){this.emit("@disconnect",l.errCode.get("wsDisconnect"))},t}(u);t.default=f},function(e,t,r){(function(t){e.exports=function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function n(e,t){"object"===(void 0===e?"undefined":o(e))&&(t=e,e=void 0),t=t||{};var r,n=i(e),s=n.source,u=n.id,l=n.path,p=c[u]&&l in c[u].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||p?r=a(s,t):(c[u]||(c[u]=a(s,t)),r=c[u]),n.query&&!t.query&&(t.query=n.query),r.socket(n.path,t)}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=r(1),s=r(4),a=r(9);r(3)("socket.io-client"),e.exports=t=n;var c=t.managers={};t.protocol=s.protocol,t.connect=n,t.Manager=r(9),t.Socket=r(33)},function(e,t,r){"use strict";var n=r(2);r(3)("socket.io-client:url"),e.exports=function(e,t){var r=e;t=t||"undefined"!=typeof location&&location,null==e&&(e=t.protocol+"//"+t.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?t.protocol+e:t.host+e),/^(https?|wss?):\/\//.test(e)||(e=void 0!==t?t.protocol+"//"+e:"https://"+e),r=n(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";var o=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+o+":"+r.port,r.href=r.protocol+"://"+o+(t&&t.port===r.port?"":":"+r.port),r}},function(e,t){var r=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,n=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(e){var t=e,o=e.indexOf("["),i=e.indexOf("]");-1!=o&&-1!=i&&(e=e.substring(0,o)+e.substring(o,i).replace(/:/g,";")+e.substring(i,e.length));for(var s=r.exec(e||""),a={},c=14;c--;)a[n[c]]=s[c]||"";return-1!=o&&-1!=i&&(a.source=t,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a}},function(e,t){"use strict";e.exports=function(){return function(){}}},function(e,t,r){function n(){}function o(e){var r=""+e.type;if(t.BINARY_EVENT!==e.type&&t.BINARY_ACK!==e.type||(r+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(r+=e.nsp+","),null!=e.id&&(r+=e.id),null!=e.data){var n=function(e){try{return JSON.stringify(e)}catch(e){return!1}}(e.data);if(!1===n)return d;r+=n}return r}function i(){this.reconstructor=null}function s(e){var r=0,n={type:Number(e.charAt(0))};if(null==t.types[n.type])return c("unknown packet type "+n.type);if(t.BINARY_EVENT===n.type||t.BINARY_ACK===n.type){for(var o="";"-"!==e.charAt(++r)&&(o+=e.charAt(r),r!=e.length););if(o!=Number(o)||"-"!==e.charAt(r))throw new Error("Illegal attachments");n.attachments=Number(o)}if("/"===e.charAt(r+1))for(n.nsp="";++r&&","!==(s=e.charAt(r))&&(n.nsp+=s,r!==e.length););else n.nsp="/";var i=e.charAt(r+1);if(""!==i&&Number(i)==i){for(n.id="";++r;){var s;if(null==(s=e.charAt(r))||Number(s)!=s){--r;break}if(n.id+=e.charAt(r),r===e.length)break}n.id=Number(n.id)}if(e.charAt(++r)){var a=function(e){try{return JSON.parse(e)}catch(e){return!1}}(e.substr(r));if(!1===a||n.type!==t.ERROR&&!p(a))return c("invalid payload");n.data=a}return n}function a(e){this.reconPack=e,this.buffers=[]}function c(e){return{type:t.ERROR,data:"parser error: "+e}}var u=(r(3)("socket.io-parser"),r(5)),l=r(6),p=r(7),f=r(8);t.protocol=4,t.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],t.CONNECT=0,t.DISCONNECT=1,t.EVENT=2,t.ACK=3,t.ERROR=4,t.BINARY_EVENT=5,t.BINARY_ACK=6,t.Encoder=n,t.Decoder=i;var d=t.ERROR+'"encode error"';n.prototype.encode=function(e,r){t.BINARY_EVENT===e.type||t.BINARY_ACK===e.type?function(e,t){l.removeBlobs(e,(function(e){var r=l.deconstructPacket(e),n=o(r.packet),i=r.buffers;i.unshift(n),t(i)}))}(e,r):r([o(e)])},u(i.prototype),i.prototype.add=function(e){var r;if("string"==typeof e)r=s(e),t.BINARY_EVENT===r.type||t.BINARY_ACK===r.type?(this.reconstructor=new a(r),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",r)):this.emit("decoded",r);else{if(!f(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(r=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,this.emit("decoded",r))}},i.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},a.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=l.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},a.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(e,t,r){function n(e){if(e)return function(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}(e)}e.exports=n,n.prototype.on=n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},n.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var n,o=0;o<r.length;o++)if((n=r[o])===t||n.fn===t){r.splice(o,1);break}return this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),r=this._callbacks["$"+e];if(r)for(var n=0,o=(r=r.slice(0)).length;n<o;++n)r[n].apply(this,t);return this},n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,r){var n=r(7),o=r(8),i=Object.prototype.toString,s="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===i.call(Blob),a="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===i.call(File);t.deconstructPacket=function(e){var t=[],r=e.data,i=e;return i.data=function e(t,r){if(!t)return t;if(o(t)){var i={_placeholder:!0,num:r.length};return r.push(t),i}if(n(t)){for(var s=new Array(t.length),a=0;a<t.length;a++)s[a]=e(t[a],r);return s}if("object"==typeof t&&!(t instanceof Date)){for(var c in s={},t)s[c]=e(t[c],r);return s}return t}(r,t),i.attachments=t.length,{packet:i,buffers:t}},t.reconstructPacket=function(e,t){return e.data=function e(t,r){if(!t)return t;if(t&&t._placeholder)return r[t.num];if(n(t))for(var o=0;o<t.length;o++)t[o]=e(t[o],r);else if("object"==typeof t)for(var i in t)t[i]=e(t[i],r);return t}(e.data,t),e.attachments=void 0,e},t.removeBlobs=function(e,t){var r=0,i=e;(function e(c,u,l){if(!c)return c;if(s&&c instanceof Blob||a&&c instanceof File){r++;var p=new FileReader;p.onload=function(){l?l[u]=this.result:i=this.result,--r||t(i)},p.readAsArrayBuffer(c)}else if(n(c))for(var f=0;f<c.length;f++)e(c[f],f,c);else if("object"==typeof c&&!o(c))for(var d in c)e(c[d],d,c)})(i),r||t(i)}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,r){e.exports=function(e){return n&&t.isBuffer(e)||o&&(e instanceof ArrayBuffer||i(e))};var n="function"==typeof t&&"function"==typeof t.isBuffer,o="function"==typeof ArrayBuffer,i=function(e){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer}},function(e,t,r){"use strict";function n(e,t){if(!(this instanceof n))return new n(e,t);e&&"object"===(void 0===e?"undefined":o(e))&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new f({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var r=t.parser||c;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this.autoConnect=!1!==t.autoConnect,this.autoConnect&&this.open()}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=r(10),s=r(33),a=r(5),c=r(4),u=r(35),l=r(36),p=(r(3)("socket.io-client:manager"),r(32)),f=r(37),d=Object.prototype.hasOwnProperty;e.exports=n,n.prototype.emitAll=function(){for(var e in this.emit.apply(this,arguments),this.nsps)d.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},n.prototype.updateSocketIds=function(){for(var e in this.nsps)d.call(this.nsps,e)&&(this.nsps[e].id=this.generateId(e))},n.prototype.generateId=function(e){return("/"===e?"":e+"#")+this.engine.id},a(n.prototype),n.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},n.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},n.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},n.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},n.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},n.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},n.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},n.prototype.open=n.prototype.connect=function(e,t){if(~this.readyState.indexOf("open"))return this;this.engine=i(this.uri,this.opts);var r=this.engine,n=this;this.readyState="opening",this.skipReconnect=!1;var o=u(r,"open",(function(){n.onopen(),e&&e()})),s=u(r,"error",(function(t){if(n.cleanup(),n.readyState="closed",n.emitAll("connect_error",t),e){var r=new Error("Connection error");r.data=t,e(r)}else n.maybeReconnectOnOpen()}));if(!1!==this._timeout){var a=this._timeout,c=setTimeout((function(){o.destroy(),r.close(),r.emit("error","timeout"),n.emitAll("connect_timeout",a)}),a);this.subs.push({destroy:function(){clearTimeout(c)}})}return this.subs.push(o),this.subs.push(s),this},n.prototype.onopen=function(){this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(u(e,"data",l(this,"ondata"))),this.subs.push(u(e,"ping",l(this,"onping"))),this.subs.push(u(e,"pong",l(this,"onpong"))),this.subs.push(u(e,"error",l(this,"onerror"))),this.subs.push(u(e,"close",l(this,"onclose"))),this.subs.push(u(this.decoder,"decoded",l(this,"ondecoded")))},n.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},n.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},n.prototype.ondata=function(e){this.decoder.add(e)},n.prototype.ondecoded=function(e){this.emit("packet",e)},n.prototype.onerror=function(e){this.emitAll("error",e)},n.prototype.socket=function(e,t){function r(){~p(o.connecting,n)||o.connecting.push(n)}var n=this.nsps[e];if(!n){n=new s(this,e,t),this.nsps[e]=n;var o=this;n.on("connecting",r),n.on("connect",(function(){n.id=o.generateId(e)})),this.autoConnect&&r()}return n},n.prototype.destroy=function(e){var t=p(this.connecting,e);~t&&this.connecting.splice(t,1),this.connecting.length||this.close()},n.prototype.packet=function(e){var t=this;e.query&&0===e.type&&(e.nsp+="?"+e.query),t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,(function(r){for(var n=0;n<r.length;n++)t.engine.write(r[n],e.options);t.encoding=!1,t.processPacketQueue()})))},n.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},n.prototype.cleanup=function(){for(var e=this.subs.length,t=0;t<e;t++)this.subs.shift().destroy();this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},n.prototype.close=n.prototype.disconnect=function(){this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},n.prototype.onclose=function(e){this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},n.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();this.reconnecting=!0;var r=setTimeout((function(){e.skipReconnect||(e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open((function(t){t?(e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):e.onreconnect()})))}),t);this.subs.push({destroy:function(){clearTimeout(r)}})}},n.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},function(e,t,r){e.exports=r(11),e.exports.parser=r(18)},function(e,t,r){function n(e,t){return this instanceof n?(t=t||{},e&&"object"==typeof e&&(t=e,e=null),e?(e=c(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=c(t.host).host),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.agent=t.agent||!1,this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=u.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.withCredentials=!1!==t.withCredentials,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.transportOptions=t.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.perMessageDeflate=!1!==t.perMessageDeflate&&(t.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=t.pfx||null,this.key=t.key||null,this.passphrase=t.passphrase||null,this.cert=t.cert||null,this.ca=t.ca||null,this.ciphers=t.ciphers||null,this.rejectUnauthorized=void 0===t.rejectUnauthorized||t.rejectUnauthorized,this.forceNode=!!t.forceNode,this.isReactNative="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),("undefined"==typeof self||this.isReactNative)&&(t.extraHeaders&&Object.keys(t.extraHeaders).length>0&&(this.extraHeaders=t.extraHeaders),t.localAddress&&(this.localAddress=t.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,void this.open()):new n(e,t)}var o=r(12),i=r(5),s=(r(3)("engine.io-client:socket"),r(32)),a=r(18),c=r(2),u=r(26);e.exports=n,n.priorWebsocketSuccess=!1,i(n.prototype),n.protocol=a.protocol,n.Socket=n,n.Transport=r(17),n.transports=r(12),n.parser=r(18),n.prototype.createTransport=function(e){var t=function(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}(this.query);t.EIO=a.protocol,t.transport=e;var r=this.transportOptions[e]||{};return this.id&&(t.sid=this.id),new o[e]({query:t,socket:this,agent:r.agent||this.agent,hostname:r.hostname||this.hostname,port:r.port||this.port,secure:r.secure||this.secure,path:r.path||this.path,forceJSONP:r.forceJSONP||this.forceJSONP,jsonp:r.jsonp||this.jsonp,forceBase64:r.forceBase64||this.forceBase64,enablesXDR:r.enablesXDR||this.enablesXDR,withCredentials:r.withCredentials||this.withCredentials,timestampRequests:r.timestampRequests||this.timestampRequests,timestampParam:r.timestampParam||this.timestampParam,policyPort:r.policyPort||this.policyPort,pfx:r.pfx||this.pfx,key:r.key||this.key,passphrase:r.passphrase||this.passphrase,cert:r.cert||this.cert,ca:r.ca||this.ca,ciphers:r.ciphers||this.ciphers,rejectUnauthorized:r.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:r.perMessageDeflate||this.perMessageDeflate,extraHeaders:r.extraHeaders||this.extraHeaders,forceNode:r.forceNode||this.forceNode,localAddress:r.localAddress||this.localAddress,requestTimeout:r.requestTimeout||this.requestTimeout,protocols:r.protocols||void 0,isReactNative:this.isReactNative})},n.prototype.open=function(){var e;if(this.rememberUpgrade&&n.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout((function(){t.emit("error","No transports available")}),0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},n.prototype.setTransport=function(e){var t=this;this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",(function(){t.onDrain()})).on("packet",(function(e){t.onPacket(e)})).on("error",(function(e){t.onError(e)})).on("close",(function(){t.onClose("transport close")}))},n.prototype.probe=function(e){function t(){if(p.onlyBinaryUpgrades){var e=!this.supportsBinary&&p.transport.supportsBinary;l=l||e}l||(u.send([{type:"ping",data:"probe"}]),u.once("packet",(function(e){if(!l)if("pong"===e.type&&"probe"===e.data){if(p.upgrading=!0,p.emit("upgrading",u),!u)return;n.priorWebsocketSuccess="websocket"===u.name,p.transport.pause((function(){l||"closed"!==p.readyState&&(c(),p.setTransport(u),u.send([{type:"upgrade"}]),p.emit("upgrade",u),u=null,p.upgrading=!1,p.flush())}))}else{var t=new Error("probe error");t.transport=u.name,p.emit("upgradeError",t)}})))}function r(){l||(l=!0,c(),u.close(),u=null)}function o(e){var t=new Error("probe error: "+e);t.transport=u.name,r(),p.emit("upgradeError",t)}function i(){o("transport closed")}function s(){o("socket closed")}function a(e){u&&e.name!==u.name&&r()}function c(){u.removeListener("open",t),u.removeListener("error",o),u.removeListener("close",i),p.removeListener("close",s),p.removeListener("upgrading",a)}var u=this.createTransport(e,{probe:1}),l=!1,p=this;n.priorWebsocketSuccess=!1,u.once("open",t),u.once("error",o),u.once("close",i),this.once("close",s),this.once("upgrading",a),u.open()},n.prototype.onOpen=function(){if(this.readyState="open",n.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause)for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])},n.prototype.onPacket=function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}},n.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},n.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout((function(){"closed"!==t.readyState&&t.onClose("ping timeout")}),e||t.pingInterval+t.pingTimeout)},n.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout((function(){e.ping(),e.onHeartbeat(e.pingTimeout)}),e.pingInterval)},n.prototype.ping=function(){var e=this;this.sendPacket("ping",(function(){e.emit("ping")}))},n.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},n.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},n.prototype.write=n.prototype.send=function(e,t,r){return this.sendPacket("message",e,t,r),this},n.prototype.sendPacket=function(e,t,r,n){if("function"==typeof t&&(n=t,t=void 0),"function"==typeof r&&(n=r,r=null),"closing"!==this.readyState&&"closed"!==this.readyState){(r=r||{}).compress=!1!==r.compress;var o={type:e,data:t,options:r};this.emit("packetCreate",o),this.writeBuffer.push(o),n&&this.once("flush",n),this.flush()}},n.prototype.close=function(){function e(){n.onClose("forced close"),n.transport.close()}function t(){n.removeListener("upgrade",t),n.removeListener("upgradeError",t),e()}function r(){n.once("upgrade",t),n.once("upgradeError",t)}if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var n=this;this.writeBuffer.length?this.once("drain",(function(){this.upgrading?r():e()})):this.upgrading?r():e()}return this},n.prototype.onError=function(e){n.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},n.prototype.onClose=function(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)},n.prototype.filterUpgrades=function(e){for(var t=[],r=0,n=e.length;r<n;r++)~s(this.transports,e[r])&&t.push(e[r]);return t}},function(e,t,r){var n=r(13),o=r(15),i=r(29),s=r(30);t.polling=function(e){var t=!1,r=!1,s=!1!==e.jsonp;if("undefined"!=typeof location){var a="https:"===location.protocol,c=location.port;c||(c=a?443:80),t=e.hostname!==location.hostname||c!==e.port,r=e.secure!==a}if(e.xdomain=t,e.xscheme=r,"open"in new n(e)&&!e.forceJSONP)return new o(e);if(!s)throw new Error("JSONP disabled");return new i(e)},t.websocket=s},function(e,t,r){var n=r(14);e.exports=function(e){var t=e.xdomain,r=e.xscheme,o=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||n))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!r&&o)return new XDomainRequest}catch(e){}if(!t)try{return new(self[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}},function(e,t){try{e.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){e.exports=!1}},function(e,t,r){function n(){}function o(e){if(c.call(this,e),this.requestTimeout=e.requestTimeout,this.extraHeaders=e.extraHeaders,"undefined"!=typeof location){var t="https:"===location.protocol,r=location.port;r||(r=t?443:80),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||r!==e.port,this.xs=e.secure!==t}}function i(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.withCredentials=e.withCredentials,this.requestTimeout=e.requestTimeout,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}function s(){for(var e in i.requests)i.requests.hasOwnProperty(e)&&i.requests[e].abort()}var a=r(13),c=r(16),u=r(5),l=r(27);if(r(3)("engine.io-client:polling-xhr"),e.exports=o,e.exports.Request=i,l(o,c),o.prototype.supportsBinary=!0,o.prototype.request=function(e){return(e=e||{}).uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.withCredentials=this.withCredentials,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.requestTimeout=this.requestTimeout,e.extraHeaders=this.extraHeaders,new i(e)},o.prototype.doWrite=function(e,t){var r="string"!=typeof e&&void 0!==e,n=this.request({method:"POST",data:e,isBinary:r}),o=this;n.on("success",t),n.on("error",(function(e){o.onError("xhr post error",e)})),this.sendXhr=n},o.prototype.doPoll=function(){var e=this.request(),t=this;e.on("data",(function(e){t.onData(e)})),e.on("error",(function(e){t.onError("xhr poll error",e)})),this.pollXhr=e},u(i.prototype),i.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var t=this.xhr=new a(e),r=this;try{t.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var n in t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(n)&&t.setRequestHeader(n,this.extraHeaders[n])}catch(e){}if("POST"===this.method)try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{t.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in t&&(t.withCredentials=this.withCredentials),this.requestTimeout&&(t.timeout=this.requestTimeout),this.hasXDR()?(t.onload=function(){r.onLoad()},t.onerror=function(){r.onError(t.responseText)}):t.onreadystatechange=function(){if(2===t.readyState)try{var e=t.getResponseHeader("Content-Type");(r.supportsBinary&&"application/octet-stream"===e||"application/octet-stream; charset=UTF-8"===e)&&(t.responseType="arraybuffer")}catch(e){}4===t.readyState&&(200===t.status||1223===t.status?r.onLoad():setTimeout((function(){r.onError("number"==typeof t.status?t.status:0)}),0))},t.send(this.data)}catch(e){return void setTimeout((function(){r.onError(e)}),0)}"undefined"!=typeof document&&(this.index=i.requestsCount++,i.requests[this.index]=this)},i.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},i.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},i.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},i.prototype.cleanup=function(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=n:this.xhr.onreadystatechange=n,e)try{this.xhr.abort()}catch(e){}"undefined"!=typeof document&&delete i.requests[this.index],this.xhr=null}},i.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type")}catch(e){}e=("application/octet-stream"===t||"application/octet-stream; charset=UTF-8"===t)&&this.xhr.response||this.xhr.responseText}catch(e){this.onError(e)}null!=e&&this.onData(e)},i.prototype.hasXDR=function(){return"undefined"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR},i.prototype.abort=function(){this.cleanup()},i.requestsCount=0,i.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",s);else if("function"==typeof addEventListener){var p="onpagehide"in self?"pagehide":"unload";addEventListener(p,s,!1)}},function(e,t,r){function n(e){var t=e&&e.forceBase64;u&&!t||(this.supportsBinary=!1),o.call(this,e)}var o=r(17),i=r(26),s=r(18),a=r(27),c=r(28);r(3)("engine.io-client:polling"),e.exports=n;var u=null!=new(r(13))({xdomain:!1}).responseType;a(n,o),n.prototype.name="polling",n.prototype.doOpen=function(){this.poll()},n.prototype.pause=function(e){function t(){r.readyState="paused",e()}var r=this;if(this.readyState="pausing",this.polling||!this.writable){var n=0;this.polling&&(n++,this.once("pollComplete",(function(){--n||t()}))),this.writable||(n++,this.once("drain",(function(){--n||t()})))}else t()},n.prototype.poll=function(){this.polling=!0,this.doPoll(),this.emit("poll")},n.prototype.onData=function(e){var t=this;s.decodePayload(e,this.socket.binaryType,(function(e,r,n){return"opening"===t.readyState&&t.onOpen(),"close"===e.type?(t.onClose(),!1):void t.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState&&this.poll())},n.prototype.doClose=function(){function e(){t.write([{type:"close"}])}var t=this;"open"===this.readyState?e():this.once("open",e)},n.prototype.write=function(e){var t=this;this.writable=!1;var r=function(){t.writable=!0,t.emit("drain")};s.encodePayload(e,this.supportsBinary,(function(e){t.doWrite(e,r)}))},n.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",r="";return!1!==this.timestampRequests&&(e[this.timestampParam]=c()),this.supportsBinary||e.sid||(e.b64=1),e=i.encode(e),this.port&&("https"===t&&443!==Number(this.port)||"http"===t&&80!==Number(this.port))&&(r=":"+this.port),e.length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+r+this.path+e}},function(e,t,r){function n(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.withCredentials=e.withCredentials,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.forceNode=e.forceNode,this.isReactNative=e.isReactNative,this.extraHeaders=e.extraHeaders,this.localAddress=e.localAddress}var o=r(18),i=r(5);e.exports=n,i(n.prototype),n.prototype.onError=function(e,t){var r=new Error(e);return r.type="TransportError",r.description=t,this.emit("error",r),this},n.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},n.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},n.prototype.send=function(e){if("open"!==this.readyState)throw new Error("Transport not open");this.write(e)},n.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},n.prototype.onData=function(e){var t=o.decodePacket(e,this.socket.binaryType);this.onPacket(t)},n.prototype.onPacket=function(e){this.emit("packet",e)},n.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(e,t,r){function n(e,r){return r("b"+t.packets[e.type]+e.data.data)}function o(e,r,n){if(!r)return t.encodeBase64Packet(e,n);var o=e.data,i=new Uint8Array(o),s=new Uint8Array(1+o.byteLength);s[0]=y[e.type];for(var a=0;a<i.length;a++)s[a+1]=i[a];return n(s.buffer)}function i(e,r,n){if(!r)return t.encodeBase64Packet(e,n);if(g)return function(e,r,n){if(!r)return t.encodeBase64Packet(e,n);var o=new FileReader;return o.onload=function(){t.encodePacket({type:e.type,data:o.result},r,!0,n)},o.readAsArrayBuffer(e.data)}(e,r,n);var o=new Uint8Array(1);return o[0]=y[e.type],n(new _([o.buffer,e.data]))}function s(e,t,r){for(var n=new Array(e.length),o=p(e.length,r),i=function(e,r,o){t(r,(function(t,r){n[e]=r,o(t,n)}))},s=0;s<e.length;s++)i(s,e[s],o)}var a,c=r(19),u=r(20),l=r(21),p=r(22),f=r(23);"undefined"!=typeof ArrayBuffer&&(a=r(24));var d="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),h="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),g=d||h;t.protocol=3;var y=t.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},m=c(y),v={type:"error",data:"parser error"},_=r(25);t.encodePacket=function(e,t,r,s){"function"==typeof t&&(s=t,t=!1),"function"==typeof r&&(s=r,r=null);var a=void 0===e.data?void 0:e.data.buffer||e.data;if("undefined"!=typeof ArrayBuffer&&a instanceof ArrayBuffer)return o(e,t,s);if(void 0!==_&&a instanceof _)return i(e,t,s);if(a&&a.base64)return n(e,s);var c=y[e.type];return void 0!==e.data&&(c+=r?f.encode(String(e.data),{strict:!1}):String(e.data)),s(""+c)},t.encodeBase64Packet=function(e,r){var n,o="b"+t.packets[e.type];if(void 0!==_&&e.data instanceof _){var i=new FileReader;return i.onload=function(){var e=i.result.split(",")[1];r(o+e)},i.readAsDataURL(e.data)}try{n=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(t){for(var s=new Uint8Array(e.data),a=new Array(s.length),c=0;c<s.length;c++)a[c]=s[c];n=String.fromCharCode.apply(null,a)}return o+=btoa(n),r(o)},t.decodePacket=function(e,r,n){if(void 0===e)return v;if("string"==typeof e){if("b"===e.charAt(0))return t.decodeBase64Packet(e.substr(1),r);if(n&&!1===(e=function(e){try{e=f.decode(e,{strict:!1})}catch(e){return!1}return e}(e)))return v;var o=e.charAt(0);return Number(o)==o&&m[o]?e.length>1?{type:m[o],data:e.substring(1)}:{type:m[o]}:v}o=new Uint8Array(e)[0];var i=l(e,1);return _&&"blob"===r&&(i=new _([i])),{type:m[o],data:i}},t.decodeBase64Packet=function(e,t){var r=m[e.charAt(0)];if(!a)return{type:r,data:{base64:!0,data:e.substr(1)}};var n=a.decode(e.substr(1));return"blob"===t&&_&&(n=new _([n])),{type:r,data:n}},t.encodePayload=function(e,r,n){"function"==typeof r&&(n=r,r=null);var o=u(e);return r&&o?_&&!g?t.encodePayloadAsBlob(e,n):t.encodePayloadAsArrayBuffer(e,n):e.length?void s(e,(function(e,n){t.encodePacket(e,!!o&&r,!1,(function(e){n(null,function(e){return e.length+":"+e}(e))}))}),(function(e,t){return n(t.join(""))})):n("0:")},t.decodePayload=function(e,r,n){if("string"!=typeof e)return t.decodePayloadAsBinary(e,r,n);var o;if("function"==typeof r&&(n=r,r=null),""===e)return n(v,0,1);for(var i,s,a="",c=0,u=e.length;c<u;c++){var l=e.charAt(c);if(":"===l){if(""===a||a!=(i=Number(a)))return n(v,0,1);if(a!=(s=e.substr(c+1,i)).length)return n(v,0,1);if(s.length){if(o=t.decodePacket(s,r,!1),v.type===o.type&&v.data===o.data)return n(v,0,1);if(!1===n(o,c+i,u))return}c+=i,a=""}else a+=l}return""!==a?n(v,0,1):void 0},t.encodePayloadAsArrayBuffer=function(e,r){return e.length?void s(e,(function(e,r){t.encodePacket(e,!0,!0,(function(e){return r(null,e)}))}),(function(e,t){var n=t.reduce((function(e,t){var r;return e+(r="string"==typeof t?t.length:t.byteLength).toString().length+r+2}),0),o=new Uint8Array(n),i=0;return t.forEach((function(e){var t="string"==typeof e,r=e;if(t){for(var n=new Uint8Array(e.length),s=0;s<e.length;s++)n[s]=e.charCodeAt(s);r=n.buffer}o[i++]=t?0:1;var a=r.byteLength.toString();for(s=0;s<a.length;s++)o[i++]=parseInt(a[s]);for(o[i++]=255,n=new Uint8Array(r),s=0;s<n.length;s++)o[i++]=n[s]})),r(o.buffer)})):r(new ArrayBuffer(0))},t.encodePayloadAsBlob=function(e,r){s(e,(function(e,r){t.encodePacket(e,!0,!0,(function(e){var t=new Uint8Array(1);if(t[0]=1,"string"==typeof e){for(var n=new Uint8Array(e.length),o=0;o<e.length;o++)n[o]=e.charCodeAt(o);e=n.buffer,t[0]=0}var i=(e instanceof ArrayBuffer?e.byteLength:e.size).toString(),s=new Uint8Array(i.length+1);for(o=0;o<i.length;o++)s[o]=parseInt(i[o]);if(s[i.length]=255,_){var a=new _([t.buffer,s.buffer,e]);r(null,a)}}))}),(function(e,t){return r(new _(t))}))},t.decodePayloadAsBinary=function(e,r,n){"function"==typeof r&&(n=r,r=null);for(var o=e,i=[];o.byteLength>0;){for(var s=new Uint8Array(o),a=0===s[0],c="",u=1;255!==s[u];u++){if(c.length>310)return n(v,0,1);c+=s[u]}o=l(o,2+c.length),c=parseInt(c);var p=l(o,0,c);if(a)try{p=String.fromCharCode.apply(null,new Uint8Array(p))}catch(e){var f=new Uint8Array(p);for(p="",u=0;u<f.length;u++)p+=String.fromCharCode(f[u])}i.push(p),o=l(o,c)}var d=i.length;i.forEach((function(e,o){n(t.decodePacket(e,r,!0),o,d)}))}},function(e,t){e.exports=Object.keys||function(e){var t=[],r=Object.prototype.hasOwnProperty;for(var n in e)r.call(e,n)&&t.push(n);return t}},function(e,r,n){var o=n(7),i=Object.prototype.toString,s="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===i.call(Blob),a="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===i.call(File);e.exports=function e(r){if(!r||"object"!=typeof r)return!1;if(o(r)){for(var n=0,i=r.length;n<i;n++)if(e(r[n]))return!0;return!1}if("function"==typeof t&&t.isBuffer&&t.isBuffer(r)||"function"==typeof ArrayBuffer&&r instanceof ArrayBuffer||s&&r instanceof Blob||a&&r instanceof File)return!0;if(r.toJSON&&"function"==typeof r.toJSON&&1===arguments.length)return e(r.toJSON(),!0);for(var c in r)if(Object.prototype.hasOwnProperty.call(r,c)&&e(r[c]))return!0;return!1}},function(e,t){e.exports=function(e,t,r){var n=e.byteLength;if(t=t||0,r=r||n,e.slice)return e.slice(t,r);if(t<0&&(t+=n),r<0&&(r+=n),r>n&&(r=n),t>=n||t>=r||0===n)return new ArrayBuffer(0);for(var o=new Uint8Array(e),i=new Uint8Array(r-t),s=t,a=0;s<r;s++,a++)i[a]=o[s];return i.buffer}},function(e,t){function r(){}e.exports=function(e,t,n){function o(e,r){if(o.count<=0)throw new Error("after called too many times");--o.count,e?(i=!0,t(e),t=n):0!==o.count||i||t(null,r)}var i=!1;return n=n||r,o.count=e,0===e?t():o}},function(e,t){function r(e){for(var t,r,n=[],o=0,i=e.length;o<i;)(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<i?56320==(64512&(r=e.charCodeAt(o++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),o--):n.push(t);return n}function n(e,t){if(e>=55296&&e<=57343){if(t)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function o(e,t){return p(e>>t&63|128)}function i(e,t){if(0==(4294967168&e))return p(e);var r="";return 0==(4294965248&e)?r=p(e>>6&31|192):0==(4294901760&e)?(n(e,t)||(e=65533),r=p(e>>12&15|224),r+=o(e,6)):0==(4292870144&e)&&(r=p(e>>18&7|240),r+=o(e,12),r+=o(e,6)),r+p(63&e|128)}function s(){if(l>=u)throw Error("Invalid byte index");var e=255&c[l];if(l++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function a(e){var t,r;if(l>u)throw Error("Invalid byte index");if(l==u)return!1;if(t=255&c[l],l++,0==(128&t))return t;if(192==(224&t)){if((r=(31&t)<<6|s())>=128)return r;throw Error("Invalid continuation byte")}if(224==(240&t)){if((r=(15&t)<<12|s()<<6|s())>=2048)return n(r,e)?r:65533;throw Error("Invalid continuation byte")}if(240==(248&t)&&(r=(7&t)<<18|s()<<12|s()<<6|s())>=65536&&r<=1114111)return r;throw Error("Invalid UTF-8 detected")}var c,u,l,p=String.fromCharCode;e.exports={version:"2.1.2",encode:function(e,t){for(var n=!1!==(t=t||{}).strict,o=r(e),s=o.length,a=-1,c="";++a<s;)c+=i(o[a],n);return c},decode:function(e,t){var n=!1!==(t=t||{}).strict;c=r(e),u=c.length,l=0;for(var o,i=[];!1!==(o=a(n));)i.push(o);return function(e){for(var t,r=e.length,n=-1,o="";++n<r;)(t=e[n])>65535&&(o+=p((t-=65536)>>>10&1023|55296),t=56320|1023&t),o+=p(t);return o}(i)}}},function(e,t){!function(){"use strict";for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=new Uint8Array(256),n=0;n<e.length;n++)r[e.charCodeAt(n)]=n;t.encode=function(t){var r,n=new Uint8Array(t),o=n.length,i="";for(r=0;r<o;r+=3)i+=e[n[r]>>2],i+=e[(3&n[r])<<4|n[r+1]>>4],i+=e[(15&n[r+1])<<2|n[r+2]>>6],i+=e[63&n[r+2]];return o%3==2?i=i.substring(0,i.length-1)+"=":o%3==1&&(i=i.substring(0,i.length-2)+"=="),i},t.decode=function(e){var t,n,o,i,s,a=.75*e.length,c=e.length,u=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var l=new ArrayBuffer(a),p=new Uint8Array(l);for(t=0;t<c;t+=4)n=r[e.charCodeAt(t)],o=r[e.charCodeAt(t+1)],i=r[e.charCodeAt(t+2)],s=r[e.charCodeAt(t+3)],p[u++]=n<<2|o>>4,p[u++]=(15&o)<<4|i>>2,p[u++]=(3&i)<<6|63&s;return l}}()},function(e,t){function r(e){return e.map((function(e){if(e.buffer instanceof ArrayBuffer){var t=e.buffer;if(e.byteLength!==t.byteLength){var r=new Uint8Array(e.byteLength);r.set(new Uint8Array(t,e.byteOffset,e.byteLength)),t=r.buffer}return t}return e}))}function n(e,t){t=t||{};var n=new i;return r(e).forEach((function(e){n.append(e)})),t.type?n.getBlob(t.type):n.getBlob()}function o(e,t){return new Blob(r(e),t||{})}var i=void 0!==i?i:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder&&MozBlobBuilder,s=function(){try{return 2===new Blob(["hi"]).size}catch(e){return!1}}(),a=s&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(e){return!1}}(),c=i&&i.prototype.append&&i.prototype.getBlob;"undefined"!=typeof Blob&&(n.prototype=Blob.prototype,o.prototype=Blob.prototype),e.exports=s?a?Blob:o:c?n:void 0},function(e,t){t.encode=function(e){var t="";for(var r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t},t.decode=function(e){for(var t={},r=e.split("&"),n=0,o=r.length;n<o;n++){var i=r[n].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}},function(e,t){e.exports=function(e,t){var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},function(e,t){"use strict";function r(e){var t="";do{t=i[e%s]+t,e=Math.floor(e/s)}while(e>0);return t}function n(){var e=r(+new Date);return e!==o?(c=0,o=e):e+"."+r(c++)}for(var o,i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),s=64,a={},c=0,u=0;u<s;u++)a[i[u]]=u;n.encode=r,n.decode=function(e){var t=0;for(u=0;u<e.length;u++)t=t*s+a[e.charAt(u)];return t},e.exports=n},function(e,t,r){(function(t){function n(){}function o(){return"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:{}}function i(e){if(s.call(this,e),this.query=this.query||{},!c){var t=o();c=t.___eio=t.___eio||[]}this.index=c.length;var r=this;c.push((function(e){r.onData(e)})),this.query.j=this.index,"function"==typeof addEventListener&&addEventListener("beforeunload",(function(){r.script&&(r.script.onerror=n)}),!1)}var s=r(16),a=r(27);e.exports=i;var c,u=/\n/g,l=/\\n/g;a(i,s),i.prototype.supportsBinary=!1,i.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),s.prototype.doClose.call(this)},i.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var r=document.getElementsByTagName("script")[0];r?r.parentNode.insertBefore(t,r):(document.head||document.body).appendChild(t),this.script=t,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout((function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)}),100)},i.prototype.doWrite=function(e,t){function r(){n(),t()}function n(){if(o.iframe)try{o.form.removeChild(o.iframe)}catch(e){o.onError("jsonp polling iframe removal error",e)}try{var e='<iframe src="javascript:0" name="'+o.iframeId+'">';i=document.createElement(e)}catch(e){(i=document.createElement("iframe")).name=o.iframeId,i.src="javascript:0"}i.id=o.iframeId,o.form.appendChild(i),o.iframe=i}var o=this;if(!this.form){var i,s=document.createElement("form"),a=document.createElement("textarea"),c=this.iframeId="eio_iframe_"+this.index;s.className="socketio",s.style.position="absolute",s.style.top="-1000px",s.style.left="-1000px",s.target=c,s.method="POST",s.setAttribute("accept-charset","utf-8"),a.name="d",s.appendChild(a),document.body.appendChild(s),this.form=s,this.area=a}this.form.action=this.uri(),n(),e=e.replace(l,"\\\n"),this.area.value=e.replace(u,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===o.iframe.readyState&&r()}:this.iframe.onload=r}}).call(t,function(){return this}())},function(e,r,n){function o(e){e&&e.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,this.usingBrowserWebSocket=i&&!e.forceNode,this.protocols=e.protocols,this.usingBrowserWebSocket||(f=s),a.call(this,e)}var i,s,a=n(17),c=n(18),u=n(26),l=n(27),p=n(28);if(n(3)("engine.io-client:websocket"),"undefined"!=typeof WebSocket?i=WebSocket:"undefined"!=typeof self&&(i=self.WebSocket||self.MozWebSocket),"undefined"==typeof window)try{s=n(31)}catch(e){}var f=i||s;e.exports=o,l(o,a),o.prototype.name="websocket",o.prototype.supportsBinary=!0,o.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=this.protocols,r={agent:this.agent,perMessageDeflate:this.perMessageDeflate};r.pfx=this.pfx,r.key=this.key,r.passphrase=this.passphrase,r.cert=this.cert,r.ca=this.ca,r.ciphers=this.ciphers,r.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(r.headers=this.extraHeaders),this.localAddress&&(r.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?t?new f(e,t):new f(e):new f(e,t,r)}catch(e){return this.emit("error",e)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},o.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},o.prototype.write=function(e){var r=this;this.writable=!1;for(var n=e.length,o=0,i=n;o<i;o++)!function(e){c.encodePacket(e,r.supportsBinary,(function(o){if(!r.usingBrowserWebSocket){var i={};e.options&&(i.compress=e.options.compress),r.perMessageDeflate&&("string"==typeof o?t.byteLength(o):o.length)<r.perMessageDeflate.threshold&&(i.compress=!1)}try{r.usingBrowserWebSocket?r.ws.send(o):r.ws.send(o,i)}catch(e){}--n||(r.emit("flush"),setTimeout((function(){r.writable=!0,r.emit("drain")}),0))}))}(e[o])},o.prototype.onClose=function(){a.prototype.onClose.call(this)},o.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},o.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",r="";return this.port&&("wss"===t&&443!==Number(this.port)||"ws"===t&&80!==Number(this.port))&&(r=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=p()),this.supportsBinary||(e.b64=1),(e=u.encode(e)).length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+r+this.path+e},o.prototype.check=function(){return!(!f||"__initialize"in f&&this.name===o.prototype.name)}},function(e,t){},function(e,t){var r=[].indexOf;e.exports=function(e,t){if(r)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}},function(e,t,r){"use strict";function n(e,t,r){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},r&&r.query&&(this.query=r.query),this.io.autoConnect&&this.open()}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=r(4),s=r(5),a=r(34),c=r(35),u=r(36),l=(r(3)("socket.io-client:socket"),r(26)),p=r(20);e.exports=n;var f={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},d=s.prototype.emit;s(n.prototype),n.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[c(e,"open",u(this,"onopen")),c(e,"packet",u(this,"onpacket")),c(e,"close",u(this,"onclose"))]}},n.prototype.open=n.prototype.connect=function(){return this.connected||(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting")),this},n.prototype.send=function(){var e=a(arguments);return e.unshift("message"),this.emit.apply(this,e),this},n.prototype.emit=function(e){if(f.hasOwnProperty(e))return d.apply(this,arguments),this;var t=a(arguments),r={type:(void 0!==this.flags.binary?this.flags.binary:p(t))?i.BINARY_EVENT:i.EVENT,data:t,options:{}};return r.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(this.acks[this.ids]=t.pop(),r.id=this.ids++),this.connected?this.packet(r):this.sendBuffer.push(r),this.flags={},this},n.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},n.prototype.onopen=function(){if("/"!==this.nsp)if(this.query){var e="object"===o(this.query)?l.encode(this.query):this.query;this.packet({type:i.CONNECT,query:e})}else this.packet({type:i.CONNECT})},n.prototype.onclose=function(e){this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},n.prototype.onpacket=function(e){var t=e.nsp===this.nsp,r=e.type===i.ERROR&&"/"===e.nsp;if(t||r)switch(e.type){case i.CONNECT:this.onconnect();break;case i.EVENT:case i.BINARY_EVENT:this.onevent(e);break;case i.ACK:case i.BINARY_ACK:this.onack(e);break;case i.DISCONNECT:this.ondisconnect();break;case i.ERROR:this.emit("error",e.data)}},n.prototype.onevent=function(e){var t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?d.apply(this,t):this.receiveBuffer.push(t)},n.prototype.ack=function(e){var t=this,r=!1;return function(){if(!r){r=!0;var n=a(arguments);t.packet({type:p(n)?i.BINARY_ACK:i.ACK,id:e,data:n})}}},n.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t&&(t.apply(this,e.data),delete this.acks[e.id])},n.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},n.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)d.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},n.prototype.ondisconnect=function(){this.destroy(),this.onclose("io server disconnect")},n.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},n.prototype.close=n.prototype.disconnect=function(){return this.connected&&this.packet({type:i.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},n.prototype.compress=function(e){return this.flags.compress=e,this},n.prototype.binary=function(e){return this.flags.binary=e,this}},function(e,t){e.exports=function(e,t){for(var r=[],n=(t=t||0)||0;n<e.length;n++)r[n-t]=e[n];return r}},function(e,t){"use strict";e.exports=function(e,t,r){return e.on(t,r),{destroy:function(){e.removeListener(t,r)}}}},function(e,t){var r=[].slice;e.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var n=r.call(arguments,2);return function(){return t.apply(e,n.concat(r.call(arguments)))}}},function(e,t){function r(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}e.exports=r,r.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-r:e+r}return 0|Math.min(e,this.max)},r.prototype.reset=function(){this.attempts=0},r.prototype.setMin=function(e){this.ms=e},r.prototype.setMax=function(e){this.max=e},r.prototype.setJitter=function(e){this.jitter=e}}])}).call(this,r(10).Buffer)},function(e,t,r){"use strict";function n(e){return"[object Object]"===Object.prototype.toString.call(e)}function o(e,t){return 1==t?e.replace(/(^|_)(\w)/g,(function(e,t,r){return r.toUpperCase()})):e.replace(/\_(\w)/g,(function(e,t){return t.toUpperCase()}))}Object.defineProperty(t,"__esModule",{value:!0}),t.formatAppId=t.formatKeyToHump=t.isArray=t.isMap=t.isObject=void 0,t.isObject=n,t.isMap=function(e){return"[object Map]"===Object.prototype.toString.call(e)},t.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},t.formatKeyToHump=function e(t,r,i,s){var a=i||{},c=function(i){if(-1==i.indexOf("room_id")&&-1==i.indexOf("user_id")||(r?t[i]=r+"-"+t[i]:t[i].match(/-(.{1,})/)&&(t[i]=t[i].match(/-(.{1,})/)[1])),Array.isArray(t[i])){var c=o(i,s);a[c]=[],t[i].forEach((function(t){n(t)?a[c].push(e(t)):a[c].push(t)}))}else if(n(t[i])){var u=o(i,s);a[u]=e(t[i])}else{u=o(i,s);a[u]=t[i]}};for(var u in t)c(u);return a},t.formatAppId=function e(t,r){for(var n in t)-1==n.indexOf("room_id")&&-1==n.indexOf("user_id")||(r?t[n]=r+"-"+t[n]:t[n].match(/-(.{1,})/)&&(t[n]=t[n].match(/-(.{1,})/)[1])),Array.isArray(t[n])&&t[n].forEach((function(t,n){e(t,r)}));return t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={camera:{videoQuality:[{width:320,height:240,frameRate:15,bitRate:300},{width:640,height:480,frameRate:15,bitRate:800},{width:1280,height:720,frameRate:20,bitRate:1500}]},screen:{videoQuality:[{frameRate:20,bitRate:800},{frameRate:15,bitRate:1500},{frameRate:5,bitRate:2e3}]},custom:{}}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Device=t.detectDevice=void 0;var a=r(46),c=r(6),u=r(7),l=r(130),p=r(47),f=r(135),d=r(136),h=r(137),g=r(138),y=r(139),m=r(140),v=r(141),_=r(142),b=r(143),w=r(144);function I(){if("object"!=typeof navigator||"string"!=typeof navigator.userAgent);else{var e=navigator.userAgent,t=a.getParser(e),r=t.getEngine();if(t.satisfies({chrome:">=70",chromium:">=70"}))return"Chrome70";if(t.satisfies({chrome:">=68",chromium:">=68"}))return"Chrome68";if(t.satisfies({chrome:">=58",chromium:">=58"}))return"Chrome58";if(t.satisfies({firefox:">=60"}))return"Firefox60";if(t.satisfies({safari:">=12.0"})&&"undefined"!=typeof RTCRtpTransceiver)return"Safari12";if(t.satisfies({safari:">=11"}))return"Safari11";if(t.satisfies({"microsoft edge":">=11"}))return"Edge80";if(t.satisfies({WeChat:">=7.0"}))return"WeChat70";if(t.satisfies({Opera:">=59"}))return"Chrome70";if(t.satisfies({Opera:">=56"}))return"Opera56";if(t.satisfies({Opera:">=52"}))return"Opera52";if(t.satisfies({Opera:">=45"}))return"Opera45";if(t.satisfies({"QQ Browser":">=10.5"}))return"QQ";if(r.name&&"blink"===r.name.toLowerCase()){var n=e.match(/(?:(?:Chrome|Chromium))[ /](\w+)/i);if(n){var o=Number(n[1]);return o>=70?"Chrome70":o>=68?"Chrome68":"Chrome58"}return"Chrome70"}}}t.detectDevice=I;var S=function(e){function t(t){var r=void 0===t?{}:t,n=r.handlerName,o=r.handlerFactory,i=r.Handler,s=e.call(this)||this;if(s._direction="send",s._streamId="",s._logger=null,s._logger=c.logger.collect,i){if(s._logger.warn("constructor() | Handler option is DEPRECATED, use handlerName or handlerFactory instead"),"string"!=typeof i)throw new TypeError("non string Handler option no longer supported, use handlerFactory instead");n=i}if(n&&o)throw new TypeError("just one of handlerName or handlerInterface can be given");if(o)s._handlerFactory=o;else{if(n)s._logger.debug("constructor() | handler given: %s",n);else{if(!(n=I()))throw new Error("device not supported");s._logger.debug("constructor() | detected handler: %s",n)}switch(n){case"Chrome70":s._handlerFactory=f.Chrome70.createFactory();break;case"Chrome68":s._handlerFactory=p.Chrome68.createFactory();break;case"Chrome58":s._handlerFactory=l.Chrome58.createFactory();break;case"Firefox60":s._handlerFactory=g.Firefox60.createFactory();break;case"Safari12":s._handlerFactory=h.Safari12.createFactory();break;case"Safari11":s._handlerFactory=d.Safari11.createFactory();break;case"Edge80":s._handlerFactory=y.Edge80.createFactory();break;case"Opera56":s._handlerFactory=m.Opera56.createFactory();break;case"Opera52":s._handlerFactory=v.Opera52.createFactory();break;case"Opera45":s._handlerFactory=_.Opera45.createFactory();break;case"QQ":s._handlerFactory=b.QQ.createFactory();break;case"WeChat70":s._handlerFactory=w.WeChat70.createFactory();break;default:throw new TypeError('unknown handlerName "'+n+'"')}}return s._handler=s._handlerFactory(),s._handlerName=s._handler.name,s._handler.close(),s}return o(t,e),Object.defineProperty(t.prototype,"handlerName",{get:function(){return this._handlerName},enumerable:!1,configurable:!0}),t.prototype.load=function(e){var t=e.streamId,r=e.direction;e.iceServers,e.iceTransportPolicy;return i(this,void 0,void 0,(function(){return s(this,(function(e){try{this._logger.report("device init",{streamId:t,direction:r}),this._streamId=t,this._direction=r,this._handler.run({streamId:t,direction:r})}catch(e){throw this._handler&&this._handler.close(),e}return[2]}))}))},t.prototype.destroy=function(){this._handler.close()},t.prototype.getLocalOfferSdp=function(e){return i(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return this._logger.report("getLocalOfferSdp params",e),this._handler.setLocalOfferSdp(e),[4,this._handler.getLocalOfferSdp()];case 1:return[2,t.sent()]}}))}))},t.prototype.setRemoteAnswerSdp=function(e){var t=e.remoteAnswerSdp;return this._handler.setRemoteAnswerSdp({remoteAnswerSdp:t})},t.prototype.setIceCandidate=function(e){this._handler.setIceCandidate(e)},t.prototype.stopTransceiver=function(){this._handler.stopTransceiver()},t.prototype.getConnectionStateUpdate=function(){return i(this,void 0,void 0,(function(){var e,t,r;return s(this,(function(n){switch(n.label){case 0:return[4,this._handler.getICEConnectionState()];case 1:return e=n.sent(),t=e.state,r=e.code,[2,{state:t,code:r,streamId:this._streamId}]}}))}))},t.prototype.getPlayStream=function(){return i(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this._handler.getTrack()];case 1:return[2,e.sent()]}}))}))},t.prototype.setUserCustomParams=function(e){this._logger.info("setCustom params",e),this._handler.setCustomerValue(e)},t.prototype.replaceTrack=function(e){this._handler.replaceTrack(e)},t.prototype.getStatsData=function(e){return i(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this._handler.transportStats(e)];case 1:return[2,t.sent()]}}))}))},t}(u);t.Device=S},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Chrome58=void 0;var a=function(e){function t(){return e.call(this)||this}return o(t,e),t.createFactory=function(){return function(){return new t}},Object.defineProperty(t.prototype,"name",{get:function(){return"Chrome58"},enumerable:!1,configurable:!0}),t.prototype.run=function(e){var t=this,r=e.direction,n=e.iceServers,o=e.iceTransportPolicy;this._direction=r,this._pc=new RTCPeerConnection({iceServers:n||[],iceTransportPolicy:o||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"}),this._pc.onicecandidate=function(e){t._logger.debug("onicecandidate event:::",e)},this._pc.onicegatheringstatechange=function(e){t._logger.debug("onicegatheringstatechange:::",e)},this._pc.onsignalingstatechange=function(e){t._logger.debug("onsignalingstatechange:::",e)},this._pc.onconnectionstatechange=function(e){t._logger.debug("onconnectionstatechange:::",e)}},t.prototype.setLocalOfferSdp=function(e){return i(this,void 0,void 0,(function(){var t;return s(this,(function(r){if("recv"===this._direction)this._pc.addStream(this._sendStream);else if("send"===this._direction){if(void 0===e)throw new Error("mediastream must be not exist.");if(t=e.mediastream,e.encodings,void 0===t)throw new Error("mediastream must be not exist.");this._pc.addStream(t),this._currentStream=t}return[2]}))}))},t.prototype.getTrack=function(){var e=this;return new Promise((function(t,r){e._pc.onaddstream=function(r){e._hasTrack||(e._hasTrack=!0,e._logger.debug("ontrack",r),r.stream&&("recv"==e._direction&&(e._currentStream=r.stream),t(r.stream)))}}))},t}(r(47).Chrome68);t.Chrome58=a},function(e,t,r){var n=r(132),o=r(133);t.write=o,t.parse=n.parse,t.parseParams=n.parseParams,t.parseFmtpConfig=n.parseFmtpConfig,t.parsePayloads=n.parsePayloads,t.parseRemoteCandidates=n.parseRemoteCandidates,t.parseImageAttributes=n.parseImageAttributes,t.parseSimulcastStreamList=n.parseSimulcastStreamList},function(e,t,r){var n=function(e){return String(Number(e))===e?Number(e):e},o=function(e,t,r){var o=e.name&&e.names;e.push&&!t[e.push]?t[e.push]=[]:o&&!t[e.name]&&(t[e.name]={});var i=e.push?{}:o?t[e.name]:t;!function(e,t,r,o){if(o&&!r)t[o]=n(e[1]);else for(var i=0;i<r.length;i+=1)null!=e[i+1]&&(t[r[i]]=n(e[i+1]))}(r.match(e.reg),i,e.names,e.name),e.push&&t[e.push].push(i)},i=r(48),s=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(e){var t={},r=[],n=t;return e.split(/(\r\n|\r|\n)/).filter(s).forEach((function(e){var t=e[0],s=e.slice(2);"m"===t&&(r.push({rtp:[],fmtp:[]}),n=r[r.length-1]);for(var a=0;a<(i[t]||[]).length;a+=1){var c=i[t][a];if(c.reg.test(s))return o(c,n,s)}})),t.media=r,t};var a=function(e,t){var r=t.split(/=(.+)/,2);return 2===r.length?e[r[0]]=n(r[1]):1===r.length&&t.length>1&&(e[r[0]]=void 0),e};t.parseParams=function(e){return e.split(/;\s?/).reduce(a,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(e){return e.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(e){for(var t=[],r=e.split(" ").map(n),o=0;o<r.length;o+=3)t.push({component:r[o],ip:r[o+1],port:r[o+2]});return t},t.parseImageAttributes=function(e){return e.split(" ").map((function(e){return e.substring(1,e.length-1).split(",").reduce(a,{})}))},t.parseSimulcastStreamList=function(e){return e.split(";").map((function(e){return e.split(",").map((function(e){var t,r=!1;return"~"!==e[0]?t=n(e):(t=n(e.substring(1,e.length)),r=!0),{scid:t,paused:r}}))}))}},function(e,t,r){var n=r(48),o=/%[sdv%]/g,i=function(e){var t=1,r=arguments,n=r.length;return e.replace(o,(function(e){if(t>=n)return e;var o=r[t];switch(t+=1,e){case"%%":return"%";case"%s":return String(o);case"%d":return Number(o);case"%v":return""}}))},s=function(e,t,r){var n=[e+"="+(t.format instanceof Function?t.format(t.push?r:r[t.name]):t.format)];if(t.names)for(var o=0;o<t.names.length;o+=1){var s=t.names[o];t.name?n.push(r[t.name][s]):n.push(r[t.names[o]])}else n.push(r[t.name]);return i.apply(null,n)},a=["v","o","s","i","u","e","p","c","b","t","r","z","a"],c=["i","c","b","a"];e.exports=function(e,t){t=t||{},null==e.version&&(e.version=0),null==e.name&&(e.name=" "),e.media.forEach((function(e){null==e.payloads&&(e.payloads="")}));var r=t.outerOrder||a,o=t.innerOrder||c,i=[];return r.forEach((function(t){n[t].forEach((function(r){r.name in e&&null!=e[r.name]?i.push(s(t,r,e)):r.push in e&&null!=e[r.push]&&e[r.push].forEach((function(e){i.push(s(t,r,e))}))}))})),e.media.forEach((function(e){i.push(s("m",n.m[0],e)),o.forEach((function(t){n[t].forEach((function(r){r.name in e&&null!=e[r.name]?i.push(s(t,r,e)):r.push in e&&null!=e[r.push]&&e[r.push].forEach((function(e){i.push(s(t,r,e))}))}))}))})),i.join("\r\n")+"\r\n"}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.HandlerInterface=void 0;var i=function(e){function t(){return e.call(this)||this}return o(t,e),t}(r(7));t.HandlerInterface=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.Chrome70=void 0;var i=function(e){function t(){return e.call(this)||this}return o(t,e),t.createFactory=function(){return function(){return new t}},Object.defineProperty(t.prototype,"name",{get:function(){return"Chrome70"},enumerable:!1,configurable:!0}),t}(r(0).Handler);t.Chrome70=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.Safari11=void 0;var c=function(e){function t(){return e.call(this)||this}return o(t,e),t.createFactory=function(){return function(){return new t}},Object.defineProperty(t.prototype,"name",{get:function(){return"Safari11"},enumerable:!1,configurable:!0}),t.prototype.setLocalOfferSdp=function(e){return i(this,void 0,void 0,(function(){var t,r,n,o,i,c,u,l,p,f;return s(this,(function(s){if("send"===this._direction){if(void 0===e)throw new Error("mediastream must be not exist.");if(t=e.mediastream,e.encodings,void 0===t)throw new Error("mediastream must be not exist.");try{for(r=a(t.getTracks()),n=r.next();!n.done;n=r.next())c=n.value,this._pc.addTrack(c,this._sendStream)}catch(e){u={error:e}}finally{try{n&&!n.done&&(l=r.return)&&l.call(r)}finally{if(u)throw u.error}}this._currentStream=t}else if("recv"===this._direction)try{for(o=a(this._sendStream.getTracks()),i=o.next();!i.done;i=o.next())c=i.value,this._pc.addTrack(c,this._sendStream)}catch(e){p={error:e}}finally{try{i&&!i.done&&(f=o.return)&&f.call(o)}finally{if(p)throw p.error}}return[2]}))}))},t}(r(0).Handler);t.Safari11=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.Safari12=void 0;var i=function(e){function t(){return e.call(this)||this}return o(t,e),t.createFactory=function(){return function(){return new t}},Object.defineProperty(t.prototype,"name",{get:function(){return"Safari12"},enumerable:!1,configurable:!0}),t}(r(0).Handler);t.Safari12=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.Firefox60=void 0;var i=function(e){function t(){return e.call(this)||this}return o(t,e),t.createFactory=function(){return function(){return new t}},Object.defineProperty(t.prototype,"name",{get:function(){return"Firefox60"},enumerable:!1,configurable:!0}),t}(r(0).Handler);t.Firefox60=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.Edge80=void 0;var i=function(e){function t(){return e.call(this)||this}return o(t,e),t.createFactory=function(){return function(){return new t}},Object.defineProperty(t.prototype,"name",{get:function(){return"Edge80"},enumerable:!1,configurable:!0}),t}(r(0).Handler);t.Edge80=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Opera56=void 0;var a=function(e){function t(){return e.call(this)||this}return o(t,e),t.createFactory=function(){return function(){return new t}},Object.defineProperty(t.prototype,"name",{get:function(){return"Opera56"},enumerable:!1,configurable:!0}),t.prototype.run=function(e){var t=this,r=e.direction,n=e.iceServers,o=e.iceTransportPolicy;this._direction=r,this._pc=new RTCPeerConnection({iceServers:n||[],iceTransportPolicy:o||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"}),this._pc.onicecandidate=function(e){t._logger.debug("onicecandidate event:::",e)},this._pc.onicegatheringstatechange=function(e){t._logger.debug("onicegatheringstatechange:::",e)},this._pc.onsignalingstatechange=function(e){t._logger.debug("onsignalingstatechange:::",e)},this._pc.onconnectionstatechange=function(e){t._logger.debug("onconnectionstatechange:::",e)}},t.prototype.setLocalOfferSdp=function(e){return i(this,void 0,void 0,(function(){var t;return s(this,(function(r){if("recv"===this._direction)this._transceiverArr.push(this._pc.addTransceiver("audio",{direction:"recvonly"})),this._transceiverArr.push(this._pc.addTransceiver("video",{direction:"recvonly"}));else if("send"===this._direction){if(void 0===e)throw new Error("mediastream must be not exist.");if(t=e.mediastream,e.encodings,void 0===t)throw new Error("mediastream must be not exist.");this._pc.addStream(t),this._currentStream=t}return[2]}))}))},t.prototype.getLocalOfferSdp=function(){return i(this,void 0,void 0,(function(){var e=this;return s(this,(function(t){return[2,new Promise((function(t,r){e._pc.onnegotiationneeded=function(r){return i(e,void 0,void 0,(function(){var e,r,n;return s(this,(function(o){switch(o.label){case 0:if(this._isNegotiating)return[2];this._isNegotiating=!0,o.label=1;case 1:return o.trys.push([1,4,,5]),e={offerToReceiveAudio:!1,offerToReceiveVideo:!1},"recv"===this._direction&&(e={offerToReceiveAudio:!0,offerToReceiveVideo:!0}),[4,this._pc.createOffer(e)];case 2:return r=o.sent(),n=void 0,n=0!==this._videoCustomBitrate||0!==this._audioCustomBitrate?this.setSdpCustomBitrate(r.sdp):r.sdp,[4,this._pc.setLocalDescription({type:"offer",sdp:n})];case 3:return o.sent(),t({localOfferSdp:r.sdp}),[3,5];case 4:throw o.sent(),new Error("set local offer sdp error");case 5:return[2]}}))}))}}))]}))}))},t}(r(0).Handler);t.Opera56=a},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Opera52=void 0;var a=function(e){function t(){return e.call(this)||this}return o(t,e),t.createFactory=function(){return function(){return new t}},Object.defineProperty(t.prototype,"name",{get:function(){return"Opera52"},enumerable:!1,configurable:!0}),t.prototype.run=function(e){var t=this,r=e.direction,n=e.iceServers,o=e.iceTransportPolicy;this._direction=r,this._pc=new RTCPeerConnection({iceServers:n||[],iceTransportPolicy:o||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"}),this._pc.onicecandidate=function(e){t._logger.debug("onicecandidate event:::",e)},this._pc.onicegatheringstatechange=function(e){t._logger.debug("onicegatheringstatechange:::",e)},this._pc.onsignalingstatechange=function(e){t._logger.debug("onsignalingstatechange:::",e)},this._pc.onconnectionstatechange=function(e){t._logger.debug("onconnectionstatechange:::",e)},this._pc.onaddstream=function(e){t._logger.debug("ontrack:::",e)}},t.prototype.setLocalOfferSdp=function(e){return i(this,void 0,void 0,(function(){var t;return s(this,(function(r){if("recv"===this._direction);else if("send"===this._direction){if(void 0===e)throw new Error("mediastream must be not exist.");if(t=e.mediastream,e.encodings,void 0===t)throw new Error("mediastream must be not exist.");this._pc.addStream(t),this._currentStream=t}return[2]}))}))},t.prototype.getLocalOfferSdp=function(){return i(this,void 0,void 0,(function(){var e,t,r;return s(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),e={offerToReceiveAudio:!1,offerToReceiveVideo:!1},"recv"===this._direction&&(e={offerToReceiveAudio:!0,offerToReceiveVideo:!0}),[4,this._pc.createOffer(e)];case 1:return t=n.sent(),r=void 0,r=0!==this._videoCustomBitrate||0!==this._audioCustomBitrate?this.setSdpCustomBitrate(t.sdp):t.sdp,[4,this._pc.setLocalDescription({type:"offer",sdp:r})];case 2:return n.sent(),[2,{localOfferSdp:t.sdp}];case 3:throw n.sent(),new Error("set local offer sdp error");case 4:return[2]}}))}))},t}(r(0).Handler);t.Opera52=a},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Opera45=void 0;var a=function(e){function t(){return e.call(this)||this}return o(t,e),t.createFactory=function(){return function(){return new t}},Object.defineProperty(t.prototype,"name",{get:function(){return"Opera45"},enumerable:!1,configurable:!0}),t.prototype.run=function(e){var t=this,r=e.direction,n=e.iceServers,o=e.iceTransportPolicy;this._direction=r,this._pc=new RTCPeerConnection({iceServers:n||[],iceTransportPolicy:o||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"}),this._pc.onicecandidate=function(e){t._logger.debug("onicecandidate event:::",e)},this._pc.onicegatheringstatechange=function(e){t._logger.debug("onicegatheringstatechange:::",e)},this._pc.onsignalingstatechange=function(e){t._logger.debug("onsignalingstatechange:::",e)},this._pc.onconnectionstatechange=function(e){t._logger.debug("onconnectionstatechange:::",e)}},t.prototype.setLocalOfferSdp=function(e){return i(this,void 0,void 0,(function(){var t;return s(this,(function(r){if("recv"===this._direction)this._pc.addStream(this._sendStream);else if("send"===this._direction){if(void 0===e)throw new Error("mediastream must be not exist.");if(t=e.mediastream,e.encodings,void 0===t)throw new Error("mediastream must be not exist.");this._pc.addStream(t),this._currentStream=t}return[2]}))}))},t.prototype.getLocalOfferSdp=function(){return i(this,void 0,void 0,(function(){var e=this;return s(this,(function(t){return[2,new Promise((function(t,r){e._pc.onnegotiationneeded=function(r){return i(e,void 0,void 0,(function(){var e,r,n;return s(this,(function(o){switch(o.label){case 0:if(this._isNegotiating)return[2];this._isNegotiating=!0,o.label=1;case 1:return o.trys.push([1,4,,5]),e={offerToReceiveAudio:!1,offerToReceiveVideo:!1},"recv"===this._direction&&(e={offerToReceiveAudio:!0,offerToReceiveVideo:!0}),[4,this._pc.createOffer(e)];case 2:return r=o.sent(),n=void 0,n=0!==this._videoCustomBitrate||0!==this._audioCustomBitrate?this.setSdpCustomBitrate(r.sdp):r.sdp,[4,this._pc.setLocalDescription({type:"offer",sdp:n})];case 3:return o.sent(),t({localOfferSdp:r.sdp}),[3,5];case 4:throw o.sent(),new Error("set local offer sdp error");case 5:return[2]}}))}))}}))]}))}))},t.prototype.getTrack=function(){var e=this;return new Promise((function(t,r){e._pc.onaddstream=function(r){e._hasTrack||(e._hasTrack=!0,e._logger.debug("ontrack:::",r),r.stream&&("recv"==e._direction&&(e._currentStream=r.stream),t(r.stream)))}}))},t}(r(0).Handler);t.Opera45=a},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.QQ=void 0;var c=function(e){function t(){return e.call(this)||this}return o(t,e),t.createFactory=function(){return function(){return new t}},Object.defineProperty(t.prototype,"name",{get:function(){return"QQ"},enumerable:!1,configurable:!0}),t.prototype.setLocalOfferSdp=function(e){return i(this,void 0,void 0,(function(){var t,r,n,o,i,c;return s(this,(function(s){if("send"===this._direction){if(void 0===e)throw new Error("mediastream must be not exist.");if(t=e.mediastream,e.encodings,void 0===t)throw new Error("mediastream must be not exist.");try{for(r=a(t.getTracks()),n=r.next();!n.done;n=r.next())o=n.value,this._pc.addTrack(o,this._sendStream)}catch(e){i={error:e}}finally{try{n&&!n.done&&(c=r.return)&&c.call(r)}finally{if(i)throw i.error}}}else"recv"===this._direction&&(this._transceiverArr.push(this._pc.addTransceiver("audio",{direction:"recvonly"})),this._transceiverArr.push(this._pc.addTransceiver("video",{direction:"recvonly"})));return[2]}))}))},t}(r(0).Handler);t.QQ=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.WeChat70=void 0;var c=function(e){function t(){return e.call(this)||this}return o(t,e),t.createFactory=function(){return function(){return new t}},Object.defineProperty(t.prototype,"name",{get:function(){return"WeChat70"},enumerable:!1,configurable:!0}),t.prototype.run=function(e){var t=this,r=e.direction,n=e.iceServers,o=e.iceTransportPolicy;this._direction=r,this._pc=new RTCPeerConnection({iceServers:n||[],iceTransportPolicy:o||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"}),this._pc.onicecandidate=function(e){t._logger.debug("onicecandidate event:::",e)},this._pc.onicegatheringstatechange=function(e){t._logger.debug("onicegatheringstatechange:::",e)},this._pc.onsignalingstatechange=function(e){t._logger.debug("onsignalingstatechange:::",e)},this._pc.onconnectionstatechange=function(e){t._logger.debug("onconnectionstatechange:::",e)}},t.prototype.setLocalOfferSdp=function(e){return i(this,void 0,void 0,(function(){var t,r,n,o,i,c,u;return s(this,(function(s){if("send"===this._direction){if(void 0===e)throw new Error("mediastream must be not exist.");if(t=e.mediastream,r=e.encodings,!t)throw new Error("mediastream must be not exist.");try{for(n=a(t.getTracks()),o=n.next();!o.done;o=n.next())i=o.value,this._transceiverArr.push(this._pc.addTransceiver(i,{direction:"sendonly",streams:[this._sendStream],sendEncodings:r}))}catch(e){c={error:e}}finally{try{o&&!o.done&&(u=n.return)&&u.call(n)}finally{if(c)throw c.error}}}return[2]}))}))},t.prototype.getLocalOfferSdp=function(){return i(this,void 0,void 0,(function(){var e,t,r;return s(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),e={offerToReceiveAudio:!1,offerToReceiveVideo:!1},"recv"===this._direction&&(e={offerToReceiveAudio:!0,offerToReceiveVideo:!0}),[4,this._pc.createOffer(e)];case 1:return t=n.sent(),r=void 0,r=0!==this._videoCustomBitrate||0!==this._audioCustomBitrate?this.setSdpCustomBitrate(t.sdp):t.sdp,[4,this._pc.setLocalDescription({type:"offer",sdp:r})];case 2:return n.sent(),[2,{localOfferSdp:t.sdp}];case 3:throw n.sent(),new Error("set local offer sdp error");case 4:return[2]}}))}))},t}(r(0).Handler);t.WeChat70=c},function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e){var t,r;this._cameras=[],this._microphones=[],this._speakers=[];try{for(var o=n(e),i=o.next();!i.done;i=o.next()){var s=i.value;this.append(s)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}}return Object.defineProperty(e.prototype,"cameras",{get:function(){return this._cameras},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"microphones",{get:function(){return this._microphones},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"speakers",{get:function(){return this._speakers},enumerable:!1,configurable:!0}),e.prototype.append=function(e){switch(e.kind){case"videoinput":this._cameras.push(e);break;case"audioinput":this._microphones.push(e);break;case"audiooutput":this._speakers.push(e)}},e}();t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecordMediastream=void 0;var n=function(){function e(e,t){var r=this;this._mimeType="",this._currentMediaStream=null,this._mediaRecordInstance=null,this._recordedBlobs=[],this.handleDataAvailable=function(e){e.data&&e.data.size>0&&r._recordedBlobs.push(e.data)},this._currentMediaStream=e,this._mimeType=t.mimeType+";"+t.codec,this._mediaRecordInstance=new MediaRecorder(this._currentMediaStream,{mimeType:this._mimeType}),this._mediaRecordInstance.ondataavailable=this.handleDataAvailable}return e.prototype.isSupport=function(){return!!MediaRecorder.isTypeSupported(this._mimeType)},e.prototype.start=function(){if(!this._mediaRecordInstance)throw new Error("mediaRecorder is not supported.");this._mediaRecordInstance.start()},e.prototype.stop=function(){if(!this._mediaRecordInstance)throw new Error("mediaRecorder is not supported.");this._mediaRecordInstance.stop()},e.prototype.download=function(){return new Blob(this._recordedBlobs,{type:this._mimeType})},e}();t.RecordMediastream=n},function(e,t,r){e.exports=function e(t,r,n){function o(s,a){if(!r[s]){if(!t[s]){if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=r[s]={exports:{}};t[s][0].call(u.exports,(function(e){return o(t[s][1][e]||e)}),u,u.exports,e,t,r,n)}return r[s].exports}for(var i=!1,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(e,t,r){"use strict";var n=Object.prototype.hasOwnProperty,o="~";function i(){}function s(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function a(e,t,r,n,i){if("function"!=typeof r)throw new TypeError("The listener must be a function");var a=new s(r,n||e,i),c=o?o+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function c(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function u(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(o=!1)),u.prototype.eventNames=function(){var e,t,r=[];if(0===this._eventsCount)return r;for(t in e=this._events)n.call(e,t)&&r.push(o?t.slice(1):t);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},u.prototype.listeners=function(e){var t=o?o+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,i=r.length,s=new Array(i);n<i;n++)s[n]=r[n].fn;return s},u.prototype.listenerCount=function(e){var t=o?o+e:e,r=this._events[t];return r?r.fn?1:r.length:0},u.prototype.emit=function(e,t,r,n,i,s){var a=o?o+e:e;if(!this._events[a])return!1;var c,u=this._events[a],l=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),l){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,n),!0;case 5:return u.fn.call(u.context,t,r,n,i),!0;case 6:return u.fn.call(u.context,t,r,n,i,s),!0}for(d=1,c=new Array(l-1);d<l;d++)c[d-1]=arguments[d];u.fn.apply(u.context,c)}else for(var p,f=u.length,d=0;d<f;d++)switch(u[d].once&&this.removeListener(e,u[d].fn,void 0,!0),l){case 1:u[d].fn.call(u[d].context);break;case 2:u[d].fn.call(u[d].context,t);break;case 3:u[d].fn.call(u[d].context,t,r);break;case 4:u[d].fn.call(u[d].context,t,r,n);break;default:if(!c)for(p=1,c=new Array(l-1);p<l;p++)c[p-1]=arguments[p];u[d].fn.apply(u[d].context,c)}return!0},u.prototype.on=function(e,t,r){return a(this,e,t,r,!1)},u.prototype.once=function(e,t,r){return a(this,e,t,r,!0)},u.prototype.removeListener=function(e,t,r,n){var i=o?o+e:e;if(!this._events[i])return this;if(!t)return c(this,i),this;var s=this._events[i];if(s.fn)s.fn!==t||n&&!s.once||r&&s.context!==r||c(this,i);else{for(var a=0,u=[],l=s.length;a<l;a++)(s[a].fn!==t||n&&!s[a].once||r&&s[a].context!==r)&&u.push(s[a]);u.length?this._events[i]=1===u.length?u[0]:u:c(this,i)}return this},u.prototype.removeAllListeners=function(e){var t;return e?(t=o?o+e:e,this._events[t]&&c(this,t)):(this._events=new i,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=o,u.EventEmitter=u,void 0!==t&&(t.exports=u)},{}]},{},[1])(1)}]).default}));