(function(e){function t(t){for(var i,s,a=t[0],c=t[1],u=t[2],l=0,d=[];l<a.length;l++)s=a[l],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&d.push(o[s][0]),o[s]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);g&&g(t);while(d.length)d.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],i=!0,s=1;s<n.length;s++){var a=n[s];0!==o[a]&&(i=!1)}i&&(r.splice(t--,1),e=c(c.s=n[0]))}return e}var i={},s={app:0},o={app:0},r=[];function a(e){return c.p+"js/"+({about:"about"}[e]||e)+"."+{about:"ef1d2a03"}[e]+".js"}function c(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n={about:1};s[e]?t.push(s[e]):0!==s[e]&&n[e]&&t.push(s[e]=new Promise((function(t,n){for(var i="css/"+({about:"about"}[e]||e)+"."+{about:"cdc297e1"}[e]+".css",o=c.p+i,r=document.getElementsByTagName("link"),a=0;a<r.length;a++){var u=r[a],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===i||l===o))return t()}var d=document.getElementsByTagName("style");for(a=0;a<d.length;a++){u=d[a],l=u.getAttribute("data-href");if(l===i||l===o)return t()}var g=document.createElement("link");g.rel="stylesheet",g.type="text/css",g.onload=t,g.onerror=function(t){var i=t&&t.target&&t.target.src||o,r=new Error("Loading CSS chunk "+e+" failed.\n("+i+")");r.code="CSS_CHUNK_LOAD_FAILED",r.request=i,delete s[e],g.parentNode.removeChild(g),n(r)},g.href=o;var f=document.getElementsByTagName("head")[0];f.appendChild(g)})).then((function(){s[e]=0})));var i=o[e];if(0!==i)if(i)t.push(i[2]);else{var r=new Promise((function(t,n){i=o[e]=[t,n]}));t.push(i[2]=r);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,c.nc&&l.setAttribute("nonce",c.nc),l.src=a(e);var d=new Error;u=function(t){l.onerror=l.onload=null,clearTimeout(g);var n=o[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+i+": "+s+")",d.name="ChunkLoadError",d.type=i,d.request=s,n[1](d)}o[e]=void 0}};var g=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},c.m=e,c.c=i,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)c.d(n,i,function(t){return e[t]}.bind(null,i));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var d=0;d<u.length;d++)t(u[d]);var g=l;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"090b":function(e,t,n){"use strict";n.r(t),n.d(t,"m",(function(){return i}));var i={show:"Start Streaming",watch:"Look Streaming",version:"version：1.1.010",refresh:"refresh",entry:"enter",noRoomList:"No room list for now",nobody:"No one in the room",connectionError:"An error occurred.",pullFail:"Pull flow failed",pushFail:"Push failed",joinRoom:"Join the room",anchorleave:"The anchor is off",leaveRoom:"Left the room.",unmute:"Unmuted",mute:"Muted",modifyResolution:"Resolution has been modified to",unsupportedResolution:"This resolution is not supported",roomID:"Room ID",userID:"User ID",cooperation:"cooperation",setting:"Setting",liveType:"Live type",audioAndVideo:"Audio and video    ",audio:"Audio-only",selectEnv:"Environment",prod:"Prod",test:"Test",videoDevices:"Video Devices",audioDevices:"Audiod Devices",resolution:"Resolution",low:"Low",middle:"Middle",hight:"Hight"}},"0cca":function(e,t,n){e.exports=n.p+"img/anwser@3x.693b6ff3.png"},"1a15":function(e,t,n){},2395:function(e,t,n){},"35a13":function(e,t,n){},"399b":function(e,t,n){"use strict";n("1a15")},"4be2":function(e,t,n){"use strict";n("d676")},5562:function(e,t,n){e.exports=n.p+"img/touxiang.74b1704f.jpg"},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view",{attrs:{id:"container"}})],1)},o=[],r=(n("7c55"),n("2877")),a={},c=Object(r["a"])(a,s,o,!1,null,null,null),u=c.exports,l=(n("d3b7"),n("3ca3"),n("ddb0"),n("8c4f")),d=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"home",attrs:{id:"login"}},[i("Nav"),i("div",{staticClass:"wrap"},[i("div",{staticClass:"content"},[e._m(0),i("div",{staticClass:"content-name"},[e._v("花无缺")]),i("div",{staticClass:"content-id"},[e._v("ID:"+e._s(e.selfUserId))]),i("div",{staticClass:"btns-list"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.userId,expression:"userId"}],class:{"content-input":!0},attrs:{type:"text"},domProps:{value:e.userId},on:{input:function(t){t.target.composing||(e.userId=t.target.value)}}}),i("button",{class:{btn:!0,"active-btn":e.userId&&e.isLogin},on:{click:e.call}},[e._v(" 呼叫 ")])])])]),i("el-dialog",{attrs:{visible:e.dialogVisible,width:e.isCall?"440px":"460px",modal:!1,"show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("div",{staticClass:"dialog-content"},[i("div",{staticClass:"dialog-content-img"},[i("img",{attrs:{src:n("5562")}})]),i("div",{staticClass:"dialog-content-name"},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.isCall,expression:"isCall"}],staticClass:"dialog-content-name-title"},[e._v("花无缺")]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isCall,expression:"isCall"}],staticClass:"dialog-content-name-content"},[e._v(" 邀请小鱼儿视频通话 ")]),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.isCall,expression:"!isCall"}],staticClass:"dialog-content-name-title"},[e._v("小鱼儿")]),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.isCall,expression:"!isCall"}],staticClass:"dialog-content-name-content"},[e._v(" 申请和你视频通话 ")])]),i("div",{staticClass:"dialog-content-icon"},[i("audio",{ref:"audio",attrs:{muted:"",autoPlay:"autoPlay",loop:"loop"},on:{click:e.audioClick}},[i("source",{attrs:{src:n("c782"),type:"audio/mp3"}})]),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.isCall,expression:"!isCall"}],staticClass:"dialog-content-icon-receive"},[i("img",{attrs:{src:n("0cca")},on:{click:e.receive}})]),i("div",{staticClass:"dialog-content-icon-refuse"},[i("img",{attrs:{src:n("c009")},on:{click:e.refuse}})])])])]),i("Settings",{attrs:{isShowSet:e.isShowSet,source:"home"},on:{"update:isShowSet":function(t){e.isShowSet=t},"update:is-show-set":function(t){e.isShowSet=t},"get-settings":e.getSettings}})],1)},g=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"content-logo"},[i("img",{attrs:{src:n("5562"),alt:""}})])}],f=n("1da1"),v=(n("96cf"),{environment:"development",imAppId:"linkvim",rtcAppId:"2880636251",appKey:"41160b64"}),p=v;n("a15b");function h(){return Math.floor(9e3*Math.random()+1e3)}var m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isShow?n("div",{staticClass:"settings"},[n("div",{staticClass:"header"},[n("span",{staticClass:"title"},[e._v(e._s(e.$t("m.setting")))]),n("a",{staticClass:"close-btn",on:{click:e.close}})]),n("ul",{staticClass:"list"},e._l(e.settingArrList,(function(t,i){return n("li",{key:i,staticClass:"item"},[n("label",{staticClass:"text",attrs:{for:"platform"}},[e._v(" "+e._s(t.name)+": ")]),n("div",{staticClass:"form-select"},[n("div",{staticClass:"form-title"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.checked.value,expression:"item.checked.value"}],staticClass:"form-input",attrs:{name:"platform",readonly:"",disabled:t.disabled},domProps:{value:t.checked.value},on:{click:function(t){return e.toSelectFun(i)},input:function(n){n.target.composing||e.$set(t.checked,"value",n.target.value)}}}),n("i",{staticClass:"fole-icon",class:{fold:!t.fold}})]),t.fold?e._e():n("ul",{staticClass:"form-list"},e._l(t.options,(function(t,s){return n("li",{key:s,staticClass:"form-item",on:{click:function(t){return e.selectItem(i,s)}}},[e._v(" "+e._s(t.value)+" ")])})),0)])])})),0)]):e._e()},C=[],b=n("b85c"),w=n("5530"),A=(n("4de4"),n("b64b"),n("07ac"),n("159b"),n("a925")),S=function(){i["default"].use(A["a"]);var e="zh",t=navigator.language||navigator.userLanguage;t=t.substr(0,2),"zh"!=t&&(e="en");var s=new A["a"]({locale:e,messages:{en:n("090b"),zh:n("abac")}});return s},k=S,D=k(),E={type:{key:"type",name:D.t("m.liveType"),options:[{key:"0",value:D.t("m.audioAndVideo")},{key:"1",value:D.t("m.audio")}]},videoDevices:{key:"videoDevices",name:D.t("m.videoDevices"),options:[]},audioDevices:{key:"audioDevices",name:D.t("m.audioDevices"),options:[]},resolution:{key:"resolution",name:D.t("m.resolution"),options:[{key:"2",value:D.t("m.middle")},{key:"1",value:D.t("m.low")},{key:"3",value:D.t("m.hight")}]}},y=E,x=n("2f62"),F={props:["isShowSet","source","isSettingShowVideoDeviceOptions","deviceConfigObj"],data:function(){return{settingResult:{},settingArr:[],devicesList:[]}},computed:Object(w["a"])({isShow:{get:function(){return this.isShowSet},set:function(e){this.$emit("update:isShowSet",e)}},settingArrList:function(){return this.settingArr.filter((function(e){return e.show}))}},Object(x["b"])(["storeSettingsConfig","scene"])),watch:{scene:function(e){this.currentSettingConfig&&0!=Object.keys(this.currentSettingConfig).length&&this.switchState(e)},isSettingShowVideoDeviceOptions:function(e){e?(this.currentSettingConfig.videoDevices.disabled=!1,this.currentSettingConfig.resolution.disabled=!1):(this.currentSettingConfig.videoDevices.disabled=!0,this.currentSettingConfig.resolution.disabled=!0)}},mounted:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.pageRender();case 1:case"end":return t.stop()}}),t)})))()},methods:{pageRender:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.pageLoad();case 2:e.settingArr=Object.values(e.currentSettingConfig),"home"==e.source&&e.getEmitSettingConfig(),console.log("render:::",e.settingArr);case 5:case"end":return t.stop()}}),t)})))()},pageLoad:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.storeSettingsConfig,console.log("get setting config:::",e.storeSettingsConfig,Object.keys(e.storeSettingsConfig)),0!=Object.keys(e.storeSettingsConfig).length){t.next=8;break}return t.next=5,e.addSettingConfig();case 5:i=t.sent,t.next=9;break;case 8:i=n;case 9:"home"==e.source?i.type.disabled=!1:"meet"==e.source&&(i.type.disabled=!0),console.log("getCurrentSettingConfig:::",i),e.currentSettingConfig=i,e.switchState();case 13:case"end":return t.stop()}}),t)})))()},addSettingConfig:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var n,i,s,o,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!=e.devicesList.length&&e.devicesList[0].label){t.next=4;break}return t.next=3,e.getDeviceList();case 3:e.devicesList=t.sent;case 4:if(0==y.audioDevices.options.length||0==y.videoDevices.options.length){n=Object(b["a"])(e.devicesList);try{for(n.s();!(i=n.n()).done;)s=i.value,"audioinput"==s.kind&&0!==s.label.length&&y.audioDevices.options.push({key:s.deviceId,value:s.label}),"videoinput"==s.kind&&0!==s.label.length&&y.videoDevices.options.push({key:s.deviceId,value:s.label})}catch(a){n.e(a)}finally{n.f()}}for(o in y)r=y[o],r.checked=0!==r.options.length?r.options[0]:"",r.show=!0,r.disabled=!1,r.fold=!0;return e.$store.commit("setSettingsConfig",y),t.abrupt("return",y);case 8:case"end":return t.stop()}}),t)})))()},switchState:function(){switch(console.log("current scene::",this.scene),this.scene){case"share":this.currentSettingConfig.videoDevices.disabled=!0,this.currentSettingConfig.audioDevices.disabled=!0,this.currentSettingConfig.resolution.disabled=!1;break;case"video":this.currentSettingConfig.videoDevices.disabled=!1,this.currentSettingConfig.audioDevices.disabled=!1,this.currentSettingConfig.resolution.disabled=!1;break;case"audio":this.currentSettingConfig.videoDevices.disabled=!0,this.currentSettingConfig.audioDevices.disabled=!1,this.currentSettingConfig.resolution.disabled=!0;break;default:0==this.currentSettingConfig.audioDevices.options.length&&(this.currentSettingConfig.audioDevices.show=!1),0==this.currentSettingConfig.videoDevices.options.length&&(this.currentSettingConfig.videoDevices.show=!1),this.currentSettingConfig.resolution.disabled=!1,console.log("home setting config:::",this.currentSettingConfig);break}},getDeviceList:function(){return Object(f["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices){e.next=3;break}return console.log("不支持 enumerateDevices() ."),e.abrupt("return");case 3:return e.next=5,navigator.mediaDevices.enumerateDevices();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))()},toSelectFun:function(e){var t=this;this.settingArrList[e].fold?(this.settingArrList.forEach((function(e,n){e.fold=!0,t.$set(t.settingArrList,n,e)})),this.settingArrList[e].fold=!1):this.settingArrList[e].fold=!0,this.$set(this.settingArrList,e,this.settingArrList[e])},selectItem:function(e,t){var n=this,i=this.settingArrList[e],s=i.options[t];i.checked=s,i.fold=!0,this.$set(this.settingArrList,e,i),"type"==i.key&&this.settingArrList.forEach((function(){1==s.key?n.$store.commit("updateScene","audio"):0==s.key&&n.$store.commit("updateScene","video")})),this.currentSettingConfig[i.key].checked=s},getEmitSettingConfig:function(){var e={};for(var t in this.currentSettingConfig){var n=this.currentSettingConfig[t];e[t]=n.checked.key}console.log("emit settings::",e),this.$emit("get-settings",e)},close:function(){this.isShow=!1,console.log("click close....",this.currentSettingConfig),this.getEmitSettingConfig(),this.$store.commit("setSettingsConfig",this.currentSettingConfig)}}},I=F,_=(n("399b"),Object(r["a"])(I,m,C,!1,null,"1c1fb98f",null)),R=_.exports,$=n("841e"),B=p.imAppId,j=p.rtcAppId,L=p.appKey,O=String(h()),T={name:"Home",data:function(){return{lvcEngine:null,isCall:!0,userId:"",dialogVisible:!1,selfUserId:O,personalManager:"",liveroomManager:"",handleObj:{linkv_video_call:this.videoHandle,linkv_anwser_call:this.anwserHandle,linkv_hangup_call:this.hangupHandle},isAudio:null,accept:null,isShowSet:!1,isLogin:!1}},created:function(){},components:{Nav:$["a"],Settings:R},mounted:function(){this.isLoading=this.$loading.service({fullscreen:!0,text:"登录中",background:"rgba(255, 255, 255, 0.3)"}),this.init()},methods:{audioClick:function(){this.$refs.audio.play()},getInfo:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$http({data:{appId:"YpqpJT2NG9zIrkI1N9SiAgXuA2xd8RMj",appSecret:"3AA052D3C91F66A94AE5FC4BDBE39A398274C5AF2410F5C3DB86E0FBA61DBF915915297CDCB1392B29DCE8A81987F9B8EBA6E877E3551BDF36691E627F132EA95BF998E3E616E2177A1F6C2B28FB6BE8E7071C2F5701F59DFA9EB2F0866C6FFF1FD46F26311D396AFC302B89B6B6E5ABB433E9112B2B902786936AEF8A8B5DA2DEC5906BF9CA6655908CDC26829C1A6FFEA46150EAA763CB63519343A01BDD7A71CA537154662AC88FDB19A0BE70C2629A6CEA4FFFD93D77D8434C098D8F4AB89D879686F00D8EC8EA1E033C3EBFB7E4259F37351965142F58DA1506B1230C4F3F50EC2D9E66A06D361F5A767804F35E6DF3D086E078CB7348A5F267552BA4473182F79BC072C92A84950259C86BD699FC6E86999816641446D516AF983D2670A3AF75ECFC1F743B720605A412021133E5CCE3DC5FE44959C60A7656029F51774CD177A46C2974F388741A948AE99780652CD3D58017F132A2C37ACB38CDFEA5543C961A0A6DF7D16C6745D3062AC0E0FBEA8470CBC9E137A8400B7D23A0C2737A32D14634223C2C7CFE4867752DDB346C271C23D82E92264AFA33B7170EFA0DC1648942F7A8937C3B0AF9BACAD9BB16"},method:"post",url:"/linkv_decrypt",baseURL:"https://linkv-rtc-web.linkv.fun/"});case 3:n=t.sent,e.info=n,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log("getInfo error",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},getToken:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$http({headers:{userid:e.selfUserId},method:"post",url:"/api/rest/getWebimTestToken",baseURL:"https://catchu-im-api.fusionv.com/"});case 3:n=t.sent,console.log(n),e.token=n.data.data,t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0),e.$message.error("获取 token 失败");case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()},getSettings:function(e){this.$store.commit("updateEnv",e.env),this.$store.commit("setResultSettingConfig",e)},init:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getInfo();case 2:return t.next=4,e.getToken();case 4:e.lvcEngine=new window.LVCEngine({imAppId:B,rtcAppId:j,appKey:L,userId:e.selfUserId,socketUrl:"wss://webimv2.fusionv.com/",token:e.token,timeout:6e4}),e.login();case 6:case"end":return t.stop()}}),t)})))()},login:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var n,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.lvcEngine.login();case 3:e.$message.success("登录成功"),e.isLoading.close(),e.isLogin=!0,n=e.lvcEngine,i=n.personalManager,s=n.liveroomManager,e.personalManager=i,e.liveroomManager=s,e.onEvent(),t.next=17;break;case 12:t.prev=12,t.t0=t["catch"](0),e.isLoading.close(),e.$message.error("登录失败请重新登录"),console.log("登录失败",t.t0);case 17:case"end":return t.stop()}}),t,null,[[0,12]])})))()},joinRoom:function(e){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function n(){var i,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.creatRoom,t.roomId=i?t.selfUserId:t.userId,n.prev=2,n.next=5,t.lvcEngine.joinRoom(t.roomId,i?1:2,"","");case 5:s=n.sent,t.$refs.audio.pause(),t.goMeet(i,s,t.lvcEngine),n.next=14;break;case 10:n.prev=10,n.t0=n["catch"](2),console.log(n.t0),t.$message.error("加入房间失败");case 14:case"end":return n.stop()}}),n,null,[[2,10]])})))()},goMeet:function(e,t,n){this.$router.push({name:"Meet",params:{source:e?1:2,roomId:e?this.selfUserId:this.userId,userId:this.selfUserId,streamListTemp:t,lvcEngine:n,peerUserId:this.userId}})},sendEventMessage:function(e,t){var n=this.personalManager,i=this.userId;if(n&&i)return e=JSON.stringify(e),n.sendEventMessage(i,e,t);this.$message.error("请选择要发送的用户")},call:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var n,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isCall=!0,n={isAudio:!1,extra:""},i="linkv_video_call",t.prev=3,s=e,t.next=7,e.sendEventMessage(n,i);case 7:e.dialogVisible=!0,e.callTimer=setTimeout((function(){e.$message.error("暂时无人接听请稍后重试"),s.hangUp(),e.$refs.audio.pause()}),3e4),setTimeout((function(){s.$refs.audio.play()})),t.next=16;break;case 12:t.prev=12,t.t0=t["catch"](3),console.log("发送呼叫消息失败",t.t0),e.$message.error("发送呼叫消息失败,请重新呼叫");case 16:case"end":return t.stop()}}),t,null,[[3,12]])})))()},receive:function(){var e=this.personalManager,t=this.userId;e&&t&&(this.dialogVisible=!1,this.receiveAndRefuse(!0))},refuse:function(){this.$refs.audio.pause(),this.isCall?this.hangUp():this.receiveAndRefuse(!1)},hangUp:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var n,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.userId,!n){t.next=16;break}return i={extra:""},s="linkv_hangup_call",t.prev=4,t.next=7,e.sendEventMessage(i,s);case 7:e.dialogVisible=!1,t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](4),console.log("发送主动挂断消息失败",t.t0),e.$message.error("发送主动挂断消息失败");case 14:t.next=17;break;case 16:e.$message.error("请选择需要发送的用户");case 17:case"end":return t.stop()}}),t,null,[[4,10]])})))()},receiveAndRefuse:function(e){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function n(){var i,s,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!e){n.next=4;break}t.joinRoom({creatRoom:!0}),n.next=16;break;case 4:return t.dialogVisible=!1,i=!1,s={isAudio:!1,extra:"",accept:i},o="linkv_anwser_call",n.prev=8,n.next=11,t.sendEventMessage(s,o);case 11:n.next=16;break;case 13:n.prev=13,n.t0=n["catch"](8),t.$message.error("挂断消息失败");case 16:case"end":return n.stop()}}),n,null,[[8,13]])})))()},videoHandle:function(e,t){var n=e.isAudio;this.isAudio=n,this.isCall=!1,this.dialogVisible=!0;var i=this;setTimeout((function(){i.$refs.audio.click()}),500),this.userId=t},anwserHandle:function(e){var t=e.isAudio,n=e.accept;this.isAudio=t,this.accept=n,clearTimeout(this.callTimer);var i=this;n?setTimeout((function(){i.joinRoom({createRoom:!1})})):(this.$refs.audio.pause(),this.dialogVisible=!1,this.$message({type:"error",message:"对方拒绝了您的视频",showClose:!0,duration:5e3,offset:200}))},hangupHandle:function(){this.$message.error("对端主动挂断了电话"),this.$refs.audio.pause(),this.dialogVisible=!1},onEvent:function(){var e=this.personalManager,t=this.liveroomManager,n=this;e&&e.on("message",(function(e){var t=e.$data,i=t.content,s=t.extend1,o=t.from;i=JSON.parse(i),n.handleObj[s](i,o)})),t&&t.on("message",(function(e){console.log(e)}))}},destroyed:function(){console.log("destroyed")}},M=T,N=(n("de16"),Object(r["a"])(M,d,g,!1,null,null,null)),P=N.exports;i["default"].use(l["a"]);var U=[{path:"/",name:"Home",component:P},{path:"/Meet",name:"Meet",component:function(){return n.e("about").then(n.bind(null,"415b"))}},{path:"*",component:P}],V=new l["a"]({mode:"history",base:"/",routes:U}),H=V,J=n("5c96");n("0fae");i["default"].use(x["a"]);var z=new x["a"].Store({state:{storeSettingsConfig:{},resultSettingConfig:{},scene:"",env:""},mutations:{setSettingsConfig:function(e,t){e.storeSettingsConfig=t},setResultSettingConfig:function(e,t){e.resultSettingConfig=t},updateScene:function(e,t){e.scene=t},updateEnv:function(e,t){e.env=t}},actions:{}}),K=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"toast"},[e._v(" "+e._s(e.content)+" ")])},q=[],G={name:"Toast",data:function(){return{content:"",duration:2e3}},mounted:function(){var e=this;console.log("toast params:::",this.content,this.duration),setTimeout((function(){e.$destroy(!0),e.$el.parentNode.removeChild(e.$el)}),this.duration)}},W=G,X=(n("d57e"),Object(r["a"])(W,K,q,!1,null,"1cdbc60c",null)),Y=X.exports,Q=i["default"].extend(Y),Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new Q({data:e}).$mount();document.getElementById("app").appendChild(t.$el)},ee=Z,te=n("bc3a"),ne=n.n(te),ie=n("2106"),se=n.n(ie),oe=[J["Table"],J["TableColumn"],J["Input"],J["Button"],J["Dialog"],J["Popconfirm"],J["Popover"]];oe.forEach((function(e){i["default"].use(e)}));n("35a13");i["default"].use(se.a,ne.a),i["default"].config.productionTip=!1,i["default"].prototype.$message=J["Message"],i["default"].prototype.$loading=J["Loading"],i["default"].prototype.$toast=ee,new i["default"]({router:H,store:z,i18n:k(),render:function(e){return e(u)}}).$mount("#app")},"7bd1":function(e,t,n){},"7c55":function(e,t,n){"use strict";n("2395")},"841e":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"nav"},[n("div",{staticClass:"logo"}),e.isShowContent?n("div",{staticClass:"nav-content"},[n("span",{},[e._v(e._s(e.$t("m.roomID"))+": "+e._s(e.navRoomId))]),n("span",{},[e._v(e._s(e.$t("m.userID"))+": "+e._s(e.navUserId))])]):n("div",{staticClass:"text"},[e._v(" "+e._s(e.$t("m.cooperation"))+"：develop@linkv.sg ")])])},s=[],o={props:["isShowContent","roomId","userId"],computed:{navRoomId:{get:function(){return this.roomId},set:function(e){this.$emit("update:roomId",e)}},navUserId:{get:function(){return this.userId},set:function(e){this.$emit("update:userId",e)}}}},r=o,a=(n("4be2"),n("2877")),c=Object(a["a"])(r,i,s,!1,null,"c60a0e4e",null);t["a"]=c.exports},"8d91":function(e,t,n){},abac:function(e,t,n){"use strict";n.r(t),n.d(t,"m",(function(){return i}));var i={show:"我要开播",watch:"我要看播",version:"版本号：1.1.010",refresh:"刷新",entry:"进入",noRoomList:"暂时没有房间列表哟~",nobody:"房间没有人哟~",connectionError:"连接出错了。",pullFail:"拉流失败",pushFail:"推流失败",joinRoom:"加入房间",anchorleave:"主播下播啦~",leaveRoom:"离开了房间。",unmute:"已取消静音",mute:"已静音",modifyResolution:"分辨率已修改为",unsupportedResolution:"设备不支持此分辨率",roomID:"房间ID",userID:"用户ID",cooperation:"市场合作",setting:"设置",liveType:"直播类型",audioAndVideo:"音视频",audio:"纯音频",selectEnv:"环境选择",prod:"生产环境",test:"测试环境",videoDevices:"视频设备选择",audioDevices:"音频设备选择",resolution:"分辨率选择",low:"低",middle:"中",hight:"高"}},c009:function(e,t,n){e.exports=n.p+"img/reject@3x.c27bd128.png"},c782:function(e,t,n){e.exports=n.p+"media/voip_call.a5eb5d87.mp3"},d57e:function(e,t,n){"use strict";n("7bd1")},d676:function(e,t,n){},de16:function(e,t,n){"use strict";n("8d91")}});
//# sourceMappingURL=app.a02cf86b.js.map